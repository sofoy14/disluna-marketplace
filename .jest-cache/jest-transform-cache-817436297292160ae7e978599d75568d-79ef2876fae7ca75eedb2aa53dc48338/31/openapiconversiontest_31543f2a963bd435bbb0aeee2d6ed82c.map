{"file":"C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\__tests__\\lib\\openapi-conversion.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\__tests__\\lib\\openapi-conversion.test.ts"],"sourcesContent":["import { openapiToFunctions } from \"@/lib/openapi-conversion\"\r\n\r\nconst validSchemaURL = JSON.stringify({\r\n  openapi: \"3.1.0\",\r\n  info: {\r\n    title: \"Get weather data\",\r\n    description: \"Retrieves current weather data for a location.\",\r\n    version: \"v1.0.0\"\r\n  },\r\n  servers: [\r\n    {\r\n      url: \"https://weather.example.com\"\r\n    }\r\n  ],\r\n  paths: {\r\n    \"/location\": {\r\n      get: {\r\n        description: \"Get temperature for a specific location\",\r\n        operationId: \"GetCurrentWeather\",\r\n        parameters: [\r\n          {\r\n            name: \"location\",\r\n            in: \"query\",\r\n            description: \"The city and state to retrieve the weather for\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/summary\": {\r\n      get: {\r\n        description: \"Get description of weather for a specific location\",\r\n        operationId: \"GetWeatherSummary\",\r\n        parameters: [\r\n          {\r\n            name: \"location\",\r\n            in: \"query\",\r\n            description: \"The city and state to retrieve the summary for\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\ndescribe(\"extractOpenapiData for url\", () => {\r\n  it(\"should parse a valid OpenAPI url schema\", async () => {\r\n    const { info, routes, functions } = await openapiToFunctions(\r\n      JSON.parse(validSchemaURL)\r\n    )\r\n\r\n    expect(info.title).toBe(\"Get weather data\")\r\n    expect(info.description).toBe(\r\n      \"Retrieves current weather data for a location.\"\r\n    )\r\n    expect(info.server).toBe(\"https://weather.example.com\")\r\n\r\n    expect(routes).toHaveLength(2)\r\n\r\n    expect(functions).toHaveLength(2)\r\n    expect(functions[0].function.name).toBe(\"GetCurrentWeather\")\r\n    expect(functions[1].function.name).toBe(\"GetWeatherSummary\")\r\n  })\r\n})\r\n\r\nconst validSchemaBody = JSON.stringify({\r\n  openapi: \"3.1.0\",\r\n  info: {\r\n    title: \"Get weather data\",\r\n    description: \"Retrieves current weather data for a location.\",\r\n    version: \"v1.0.0\"\r\n  },\r\n  servers: [\r\n    {\r\n      url: \"https://weather.example.com\"\r\n    }\r\n  ],\r\n  paths: {\r\n    \"/location\": {\r\n      post: {\r\n        description: \"Get temperature for a specific location\",\r\n        operationId: \"GetCurrentWeather\",\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: {\r\n                type: \"object\",\r\n                properties: {\r\n                  location: {\r\n                    type: \"string\",\r\n                    description:\r\n                      \"The city and state to retrieve the weather for\",\r\n                    example: \"New York, NY\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\ndescribe(\"extractOpenapiData for body\", () => {\r\n  it(\"should parse a valid OpenAPI body schema\", async () => {\r\n    const { info, routes, functions } = await openapiToFunctions(\r\n      JSON.parse(validSchemaBody)\r\n    )\r\n\r\n    expect(info.title).toBe(\"Get weather data\")\r\n    expect(info.description).toBe(\r\n      \"Retrieves current weather data for a location.\"\r\n    )\r\n    expect(info.server).toBe(\"https://weather.example.com\")\r\n\r\n    expect(routes).toHaveLength(1)\r\n    expect(routes[0].path).toBe(\"/location\")\r\n    expect(routes[0].method).toBe(\"post\")\r\n    expect(routes[0].operationId).toBe(\"GetCurrentWeather\")\r\n\r\n    expect(functions).toHaveLength(1)\r\n    expect(\r\n      functions[0].function.parameters.properties.requestBody.properties\r\n        .location.type\r\n    ).toBe(\"string\")\r\n    expect(\r\n      functions[0].function.parameters.properties.requestBody.properties\r\n        .location.description\r\n    ).toBe(\"The city and state to retrieve the weather for\")\r\n  })\r\n})\r\n\r\nconst validSchemaBody2 = JSON.stringify({\r\n  openapi: \"3.1.0\",\r\n  info: {\r\n    title: \"Polygon.io Stock and Crypto Data API\",\r\n    description:\r\n      \"API schema for accessing stock and crypto data from Polygon.io.\",\r\n    version: \"1.0.0\"\r\n  },\r\n  servers: [\r\n    {\r\n      url: \"https://api.polygon.io\"\r\n    }\r\n  ],\r\n  paths: {\r\n    \"/v1/open-close/{stocksTicker}/{date}\": {\r\n      get: {\r\n        summary: \"Get Stock Daily Open and Close\",\r\n        description: \"Get the daily open and close for a specific stock.\",\r\n        operationId: \"getStockDailyOpenClose\",\r\n        parameters: [\r\n          {\r\n            name: \"stocksTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          },\r\n          {\r\n            name: \"date\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\",\r\n              format: \"date\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v2/aggs/ticker/{stocksTicker}/prev\": {\r\n      get: {\r\n        summary: \"Get Stock Previous Close\",\r\n        description: \"Get the previous closing data for a specific stock.\",\r\n        operationId: \"getStockPreviousClose\",\r\n        parameters: [\r\n          {\r\n            name: \"stocksTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v3/trades/{stockTicker}\": {\r\n      get: {\r\n        summary: \"Get Stock Trades\",\r\n        description: \"Retrieve trades for a specific stock.\",\r\n        operationId: \"getStockTrades\",\r\n        parameters: [\r\n          {\r\n            name: \"stockTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v3/trades/{optionsTicker}\": {\r\n      get: {\r\n        summary: \"Get Options Trades\",\r\n        description: \"Retrieve trades for a specific options ticker.\",\r\n        operationId: \"getOptionsTrades\",\r\n        parameters: [\r\n          {\r\n            name: \"optionsTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v2/last/trade/{optionsTicker}\": {\r\n      get: {\r\n        summary: \"Get Last Options Trade\",\r\n        description: \"Get the last trade for a specific options ticker.\",\r\n        operationId: \"getLastOptionsTrade\",\r\n        parameters: [\r\n          {\r\n            name: \"optionsTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v1/open-close/crypto/{from}/{to}/{date}\": {\r\n      get: {\r\n        summary: \"Get Crypto Daily Open and Close\",\r\n        description:\r\n          \"Get daily open and close data for a specific cryptocurrency.\",\r\n        operationId: \"getCryptoDailyOpenClose\",\r\n        parameters: [\r\n          {\r\n            name: \"from\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          },\r\n          {\r\n            name: \"to\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          },\r\n          {\r\n            name: \"date\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\",\r\n              format: \"date\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"/v2/aggs/ticker/{cryptoTicker}/prev\": {\r\n      get: {\r\n        summary: \"Get Crypto Previous Close\",\r\n        description:\r\n          \"Get the previous closing data for a specific cryptocurrency.\",\r\n        operationId: \"getCryptoPreviousClose\",\r\n        parameters: [\r\n          {\r\n            name: \"cryptoTicker\",\r\n            in: \"path\",\r\n            required: true,\r\n            schema: {\r\n              type: \"string\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    securitySchemes: {\r\n      BearerAuth: {\r\n        type: \"http\",\r\n        scheme: \"bearer\",\r\n        bearerFormat: \"API Key\"\r\n      }\r\n    }\r\n  },\r\n  security: [\r\n    {\r\n      BearerAuth: []\r\n    }\r\n  ]\r\n})\r\n\r\ndescribe(\"extractOpenapiData for body 2\", () => {\r\n  it(\"should parse a valid OpenAPI body schema for body 2\", async () => {\r\n    const { info, routes, functions } = await openapiToFunctions(\r\n      JSON.parse(validSchemaBody2)\r\n    )\r\n\r\n    expect(info.title).toBe(\"Polygon.io Stock and Crypto Data API\")\r\n    expect(info.description).toBe(\r\n      \"API schema for accessing stock and crypto data from Polygon.io.\"\r\n    )\r\n    expect(info.server).toBe(\"https://api.polygon.io\")\r\n\r\n    expect(routes).toHaveLength(7)\r\n    expect(routes[0].path).toBe(\"/v1/open-close/{stocksTicker}/{date}\")\r\n    expect(routes[0].method).toBe(\"get\")\r\n    expect(routes[0].operationId).toBe(\"getStockDailyOpenClose\")\r\n\r\n    expect(functions[0].function.parameters.properties).toHaveProperty(\r\n      \"stocksTicker\"\r\n    )\r\n    expect(functions[0].function.parameters.properties.stocksTicker.type).toBe(\r\n      \"string\"\r\n    )\r\n    expect(\r\n      functions[0].function.parameters.properties.stocksTicker\r\n    ).toHaveProperty(\"required\", true)\r\n    expect(functions[0].function.parameters.properties).toHaveProperty(\"date\")\r\n    expect(functions[0].function.parameters.properties.date.type).toBe(\"string\")\r\n    expect(functions[0].function.parameters.properties.date).toHaveProperty(\r\n      \"format\",\r\n      \"date\"\r\n    )\r\n    expect(functions[0].function.parameters.properties.date).toHaveProperty(\r\n      \"required\",\r\n      true\r\n    )\r\n    expect(routes[1].path).toBe(\"/v2/aggs/ticker/{stocksTicker}/prev\")\r\n    expect(routes[1].method).toBe(\"get\")\r\n    expect(routes[1].operationId).toBe(\"getStockPreviousClose\")\r\n    expect(functions[1].function.parameters.properties).toHaveProperty(\r\n      \"stocksTicker\"\r\n    )\r\n    expect(functions[1].function.parameters.properties.stocksTicker.type).toBe(\r\n      \"string\"\r\n    )\r\n    expect(\r\n      functions[1].function.parameters.properties.stocksTicker\r\n    ).toHaveProperty(\"required\", true)\r\n  })\r\n})\r\n"],"version":3}