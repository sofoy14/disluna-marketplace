{"version":3,"names":["cov_1dzu24fhc7","actualCoverage","s","context_1","require","assistant_collections_1","assistant_files_1","assistant_tools_1","chats_1","collection_files_1","messages_1","build_prompt_1","navigation_1","react_1","llm_list_1","chat_helpers_1","useChatHandler","f","router","useRouter","userInput","chatFiles","setUserInput","setNewMessageImages","profile","setIsGenerating","setChatMessages","setFirstTokenReceived","selectedChat","selectedWorkspace","setSelectedChat","setChats","setSelectedTools","availableLocalModels","availableOpenRouterModels","abortController","setAbortController","chatSettings","newMessageImages","selectedAssistant","chatMessages","chatImages","setChatImages","setChatFiles","setNewMessageFiles","setShowFilesDisplay","newMessageFiles","chatFileItems","setChatFileItems","setToolInUse","useRetrieval","sourceCount","setIsPromptPickerOpen","setIsFilePickerOpen","selectedTools","selectedPreset","setChatSettings","models","isPromptPickerOpen","isFilePickerOpen","isToolPickerOpen","setShowPlaceholderSuggestions","setSuggestedQuestions","setShowSuggestedQuestions","useContext","ChatbotUIContext","chatInputRef","useRef","useEffect","b","current","focus","handleNewChat","model","prompt","temperature","contextLength","context_length","includeProfileContext","include_profile_context","includeWorkspaceInstructions","include_workspace_instructions","embeddingsProvider","embeddings_provider","allFiles","assistantFiles","getAssistantFilesByAssistantId","id","files","assistantCollections","getAssistantCollectionsByAssistantId","collections","collection","collectionFiles","getCollectionFilesByCollectionId","assistantTools","getAssistantToolsByAssistantId","tools","map","file","name","type","length","push","handleFocusChatInput","handleStopMessage","abort","handleSendMessage","messageContent","isRegeneration","startingInput","console","log","newAbortController","AbortController","modelData","modelId","model_id","modelName","provider","hostedId","platformLink","imageInput","LLM_LIST","find","llm","validateChatSettings","currentChat","b64Images","image","base64","retrievedFileItems","handleRetrieval","tempUserChatMessage","tempAssistantChatMessage","createTempMessages","payload","workspaceInstructions","instructions","assistant","assistant_id","messageFileItems","generatedText","formattedMessages","buildFinalMessages","lastMessage","queryText","content","toLowerCase","legalKeywords","isLegalQuery","some","keyword","includes","match","endpoint","response","fetch","method","headers","body","JSON","stringify","messages","ok","contentType","get","isPlainText","bibliography","undefined","text","data","json","message","updatedMessage","prev","errorData","handleLocalChat","handleHostedChat","handleCreateChat","updatedChat","updateChat","updated_at","Date","toISOString","prevChats","updatedChats","prevChat","handleCreateMessages","error","handleSendEdit","editedContent","sequenceNumber","deleteMessagesIncludingAndAfter","user_id","filteredMessages","filter","chatMessage","sequence_number","exports"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\components\\chat\\chat-hooks\\use-chat-handler.tsx"],"sourcesContent":["import { ChatbotUIContext } from \"@/context/context\"\nimport { getAssistantCollectionsByAssistantId } from \"@/db/assistant-collections\"\nimport { getAssistantFilesByAssistantId } from \"@/db/assistant-files\"\nimport { getAssistantToolsByAssistantId } from \"@/db/assistant-tools\"\nimport { updateChat } from \"@/db/chats\"\nimport { getCollectionFilesByCollectionId } from \"@/db/collection-files\"\nimport { deleteMessagesIncludingAndAfter } from \"@/db/messages\"\nimport { buildFinalMessages } from \"@/lib/build-prompt\"\nimport { Tables } from \"@/supabase/types\"\nimport { ChatMessage, ChatPayload, LLMID, ModelProvider } from \"@/types\"\nimport { useRouter } from \"next/navigation\"\nimport { useContext, useEffect, useRef } from \"react\"\nimport { LLM_LIST } from \"../../../lib/models/llm/llm-list\"\nimport {\n  createTempMessages,\n  handleCreateChat,\n  handleCreateMessages,\n  handleHostedChat,\n  handleLocalChat,\n  handleRetrieval,\n  processResponse,\n  validateChatSettings\n} from \"../chat-helpers\"\n\nexport const useChatHandler = () => {\n  const router = useRouter()\n\n  const {\n    userInput,\n    chatFiles,\n    setUserInput,\n    setNewMessageImages,\n    profile,\n    setIsGenerating,\n    setChatMessages,\n    setFirstTokenReceived,\n    selectedChat,\n    selectedWorkspace,\n    setSelectedChat,\n    setChats,\n    setSelectedTools,\n    availableLocalModels,\n    availableOpenRouterModels,\n    abortController,\n    setAbortController,\n    chatSettings,\n    newMessageImages,\n    selectedAssistant,\n    chatMessages,\n    chatImages,\n    setChatImages,\n    setChatFiles,\n    setNewMessageFiles,\n    setShowFilesDisplay,\n    newMessageFiles,\n    chatFileItems,\n    setChatFileItems,\n    setToolInUse,\n    useRetrieval,\n    sourceCount,\n    setIsPromptPickerOpen,\n    setIsFilePickerOpen,\n    selectedTools,\n    selectedPreset,\n    setChatSettings,\n    models,\n    isPromptPickerOpen,\n    isFilePickerOpen,\n    isToolPickerOpen,\n    setShowPlaceholderSuggestions,\n    setSuggestedQuestions,\n    setShowSuggestedQuestions\n  } = useContext(ChatbotUIContext)\n\n  const chatInputRef = useRef<HTMLTextAreaElement>(null)\n\n  useEffect(() => {\n    if (!isPromptPickerOpen || !isFilePickerOpen || !isToolPickerOpen) {\n      chatInputRef.current?.focus()\n    }\n  }, [isPromptPickerOpen, isFilePickerOpen, isToolPickerOpen])\n\n  const handleNewChat = async () => {\n    if (!selectedWorkspace) return\n\n    setUserInput(\"\")\n    setChatMessages([])\n    setSelectedChat(null)\n    setChatFileItems([])\n\n    setIsGenerating(false)\n    setFirstTokenReceived(false)\n\n    setChatFiles([])\n    setChatImages([])\n    setNewMessageFiles([])\n    setNewMessageImages([])\n    setShowFilesDisplay(false)\n    setIsPromptPickerOpen(false)\n    setIsFilePickerOpen(false)\n\n    setSelectedTools([])\n    setToolInUse(\"none\")\n    \n    // Reiniciar sugerencias para el nuevo chat\n    setShowPlaceholderSuggestions(true)\n    \n    // Reiniciar preguntas sugeridas\n    setSuggestedQuestions([])\n    setShowSuggestedQuestions(false)\n\n    if (selectedAssistant) {\n      setChatSettings({\n        model: selectedAssistant.model as LLMID,\n        prompt: selectedAssistant.prompt,\n        temperature: selectedAssistant.temperature,\n        contextLength: selectedAssistant.context_length,\n        includeProfileContext: selectedAssistant.include_profile_context,\n        includeWorkspaceInstructions:\n          selectedAssistant.include_workspace_instructions,\n        embeddingsProvider: selectedAssistant.embeddings_provider as\n          | \"openai\"\n          | \"local\"\n      })\n\n      let allFiles = []\n\n      const assistantFiles = (\n        await getAssistantFilesByAssistantId(selectedAssistant.id)\n      ).files\n      allFiles = [...assistantFiles]\n      const assistantCollections = (\n        await getAssistantCollectionsByAssistantId(selectedAssistant.id)\n      ).collections\n      for (const collection of assistantCollections) {\n        const collectionFiles = (\n          await getCollectionFilesByCollectionId(collection.id)\n        ).files\n        allFiles = [...allFiles, ...collectionFiles]\n      }\n      const assistantTools = (\n        await getAssistantToolsByAssistantId(selectedAssistant.id)\n      ).tools\n\n      setSelectedTools(assistantTools)\n      setChatFiles(\n        allFiles.map(file => ({\n          id: file.id,\n          name: file.name,\n          type: file.type,\n          file: null\n        }))\n      )\n\n      if (allFiles.length > 0) setShowFilesDisplay(true)\n    } else if (selectedPreset) {\n      setChatSettings({\n        model: selectedPreset.model as LLMID,\n        prompt: selectedPreset.prompt,\n        temperature: selectedPreset.temperature,\n        contextLength: selectedPreset.context_length,\n        includeProfileContext: selectedPreset.include_profile_context,\n        includeWorkspaceInstructions:\n          selectedPreset.include_workspace_instructions,\n        embeddingsProvider: selectedPreset.embeddings_provider as\n          | \"openai\"\n          | \"local\"\n      })\n    } else if (selectedWorkspace) {\n      // setChatSettings({\n      //   model: (selectedWorkspace.default_model ||\n      //     \"gpt-4-1106-preview\") as LLMID,\n      //   prompt:\n      //     selectedWorkspace.default_prompt ||\n      //     \"You are a friendly, helpful AI assistant.\",\n      //   temperature: selectedWorkspace.default_temperature || 0.5,\n      //   contextLength: selectedWorkspace.default_context_length || 4096,\n      //   includeProfileContext:\n      //     selectedWorkspace.include_profile_context || true,\n      //   includeWorkspaceInstructions:\n      //     selectedWorkspace.include_workspace_instructions || true,\n      //   embeddingsProvider:\n      //     (selectedWorkspace.embeddings_provider as \"openai\" | \"local\") ||\n      //     \"openai\"\n      // })\n    }\n\n    return router.push(`/${selectedWorkspace.id}/chat`)\n  }\n\n  const handleFocusChatInput = () => {\n    chatInputRef.current?.focus()\n  }\n\n  const handleStopMessage = () => {\n    if (abortController) {\n      abortController.abort()\n    }\n  }\n\n  const handleSendMessage = async (\n    messageContent: string,\n    chatMessages: ChatMessage[],\n    isRegeneration: boolean\n  ) => {\n    const startingInput = messageContent\n\n    try {\n      console.log('handleSendMessage iniciado')\n      console.log('messageContent:', messageContent)\n      console.log('chatSettings:', chatSettings)\n      console.log('profile:', profile)\n      console.log('selectedWorkspace:', selectedWorkspace)\n      \n      setUserInput(\"\")\n      setIsGenerating(true)\n      setIsPromptPickerOpen(false)\n      setIsFilePickerOpen(false)\n      setNewMessageImages([])\n\n      const newAbortController = new AbortController()\n      setAbortController(newAbortController)\n\n      // Usar GPT-4o por defecto para asegurar funcionalidad\n      let modelData = [\n        ...models.map(model => ({\n          modelId: model.model_id as LLMID,\n          modelName: model.name,\n          provider: \"custom\" as ModelProvider,\n          hostedId: model.id,\n          platformLink: \"\",\n          imageInput: false\n        })),\n        ...LLM_LIST,\n        ...availableLocalModels,\n        ...availableOpenRouterModels\n      ].find(llm => llm.modelId === chatSettings?.model)\n\n      // Si no se encuentra el modelo, usar Tongyi Deep Research por defecto\n      if (!modelData) {\n        modelData = {\n          modelId: \"alibaba/tongyi-deepresearch-30b-a3b\" as LLMID,\n          modelName: \"Tongyi Deep Research 30B\",\n          provider: \"openrouter\" as ModelProvider,\n          hostedId: \"alibaba/tongyi-deepresearch-30b-a3b\",\n          platformLink: \"https://openrouter.ai\",\n          imageInput: false\n        }\n        \n        console.log('âœ… Usando Tongyi Deep Research por defecto:', modelData)\n      }\n\n      console.log('âœ… Modelo configurado:', modelData.modelId, '- Proveedor:', modelData.provider)\n\n      validateChatSettings(\n        chatSettings,\n        modelData,\n        profile,\n        selectedWorkspace,\n        messageContent\n      )\n      \n      console.log('ValidaciÃ³n de chat settings pasada')\n\n      let currentChat = selectedChat ? { ...selectedChat } : null\n\n      const b64Images = newMessageImages.map(image => image.base64)\n\n      let retrievedFileItems: Tables<\"file_items\">[] = []\n\n      if (\n        (newMessageFiles.length > 0 || chatFiles.length > 0) &&\n        useRetrieval\n      ) {\n        setToolInUse(\"retrieval\")\n\n        retrievedFileItems = await handleRetrieval(\n          userInput,\n          newMessageFiles,\n          chatFiles,\n          chatSettings!.embeddingsProvider,\n          sourceCount\n        )\n      }\n\n      const { tempUserChatMessage, tempAssistantChatMessage } =\n        createTempMessages(\n          messageContent,\n          chatMessages,\n          chatSettings!,\n          b64Images,\n          isRegeneration,\n          setChatMessages,\n          selectedAssistant\n        )\n\n      let payload: ChatPayload = {\n        chatSettings: chatSettings!,\n        workspaceInstructions: selectedWorkspace!.instructions || \"\",\n        chatMessages: isRegeneration\n          ? [...chatMessages]\n          : [...chatMessages, tempUserChatMessage],\n        assistant: selectedChat?.assistant_id ? selectedAssistant : null,\n        messageFileItems: retrievedFileItems,\n        chatFileItems: chatFileItems\n      }\n\n      let generatedText = \"\"\n\n      if (selectedTools.length > 0) {\n        setToolInUse(\"Tools\")\n\n        const formattedMessages = await buildFinalMessages(\n          payload,\n          profile!,\n          chatImages\n        )\n\n        // Detectar si es consulta legal para usar endpoint especializado\n        const lastMessage = formattedMessages[formattedMessages.length - 1]\n        const queryText = lastMessage?.content?.toLowerCase() || ''\n        \n        const legalKeywords = [\n          'constituciÃ³n', 'artÃ­culo', 'ley', 'legal', 'jurÃ­dico', 'norma', 'cÃ³digo',\n          'sentencia', 'tribunal', 'corte', 'constitucional', 'consejo', 'estado',\n          'decreto', 'resoluciÃ³n', 'circular', 'jurisprudencia', 'doctrina',\n          'sociedad', 'SAS', 'SRL', 'SA', 'contrato', 'obligaciÃ³n', 'responsabilidad',\n          'daÃ±o', 'penal', 'civil', 'comercial', 'laboral', 'administrativo',\n          'tributario', 'fiscal', 'impuesto', 'DIAN', 'superintendencia',\n          'ministerio', 'gobierno', 'municipio', 'departamento', 'colombia',\n          'colombiano', 'derecho', 'proceso', 'trÃ¡mite', 'procedimiento',\n          'requisito', 'documento', 'certificado', 'registro', 'matrÃ­cula',\n          'reforma', 'modificaciÃ³n', 'vigencia', 'derogaciÃ³n', 'vigente',\n          'actualizado', 'reciente', 'nuevo', 'Ãºltimo', 'buscar', 'investigar',\n          'encontrar', 'informaciÃ³n', 'datos', 'consulta', 'pregunta'\n        ]\n        \n        const isLegalQuery = legalKeywords.some(keyword => queryText.includes(keyword)) ||\n                            queryText.length > 30 ||\n                            (queryText.match(/\\?/g) || []).length > 0\n        \n        const endpoint = isLegalQuery ? \"/api/chat/legal\" : \"/api/chat/simple-direct\"\n        \n        console.log(`ðŸ” Consulta ${isLegalQuery ? 'LEGAL' : 'GENERAL'} detectada, usando endpoint: ${endpoint}`)\n        \n        const response = await fetch(endpoint, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            chatSettings: payload.chatSettings,\n            messages: formattedMessages\n          })\n        })\n\n        setToolInUse(\"none\")\n\n        // Manejar respuesta del endpoint simple-direct (JSON con bibliografÃ­a separada)\n        if (response.ok) {\n          const contentType = response.headers.get('content-type') || ''\n          const isPlainText = contentType.includes('text/plain')\n          \n          let bibliography = undefined\n          \n          if (isPlainText) {\n            // Respuesta de texto plano (legacy)\n            generatedText = await response.text()\n          } else {\n            // Respuesta JSON con bibliografÃ­a separada\n            const data = await response.json()\n            generatedText = data.message || \"No se pudo generar respuesta\"\n            bibliography = data.bibliography\n            \n            // Guardar bibliografÃ­a en el estado global si existe\n            if (data.bibliography && data.bibliography.length > 0) {\n              console.log('ðŸ“š BibliografÃ­a recibida:', data.bibliography)\n            }\n          }\n          \n          // Actualizar el mensaje del asistente\n          const updatedMessage = {\n            ...tempAssistantChatMessage,\n            content: generatedText,\n            bibliography: bibliography\n          }\n          \n          setChatMessages(prev => [...prev, updatedMessage])\n        } else {\n          const errorData = await response.json()\n          generatedText = errorData.message || \"Error en el chat\"\n        }\n      } else {\n        if (modelData!.provider === \"ollama\") {\n          generatedText = await handleLocalChat(\n            payload,\n            profile!,\n            chatSettings!,\n            tempAssistantChatMessage,\n            isRegeneration,\n            newAbortController,\n            setIsGenerating,\n            setFirstTokenReceived,\n            setChatMessages,\n            setToolInUse\n          )\n        } else {\n          generatedText = await handleHostedChat(\n            payload,\n            profile!,\n            modelData!,\n            tempAssistantChatMessage,\n            isRegeneration,\n            newAbortController,\n            newMessageImages,\n            chatImages,\n            setIsGenerating,\n            setFirstTokenReceived,\n            setChatMessages,\n            setToolInUse\n          )\n        }\n      }\n\n      if (!currentChat) {\n        currentChat = await handleCreateChat(\n          chatSettings!,\n          profile!,\n          selectedWorkspace!,\n          messageContent,\n          selectedAssistant!,\n          newMessageFiles,\n          setSelectedChat,\n          setChats,\n          setChatFiles\n        )\n      } else {\n        const updatedChat = await updateChat(currentChat.id, {\n          updated_at: new Date().toISOString()\n        })\n\n        setChats(prevChats => {\n          const updatedChats = prevChats.map(prevChat =>\n            prevChat.id === updatedChat.id ? updatedChat : prevChat\n          )\n\n          return updatedChats\n        })\n      }\n\n      await handleCreateMessages(\n        chatMessages,\n        currentChat,\n        profile!,\n        modelData!,\n        messageContent,\n        generatedText,\n        newMessageImages,\n        isRegeneration,\n        retrievedFileItems,\n        setChatMessages,\n        setChatFileItems,\n        setChatImages,\n        selectedAssistant\n      )\n\n      setIsGenerating(false)\n      setFirstTokenReceived(false)\n    } catch (error) {\n      console.error('Error en handleSendMessage:', error)\n      setIsGenerating(false)\n      setFirstTokenReceived(false)\n      setUserInput(startingInput)\n    }\n  }\n\n  const handleSendEdit = async (\n    editedContent: string,\n    sequenceNumber: number\n  ) => {\n    if (!selectedChat) return\n\n    await deleteMessagesIncludingAndAfter(\n      selectedChat.user_id,\n      selectedChat.id,\n      sequenceNumber\n    )\n\n    const filteredMessages = chatMessages.filter(\n      chatMessage => chatMessage.message.sequence_number < sequenceNumber\n    )\n\n    setChatMessages(filteredMessages)\n\n    handleSendMessage(editedContent, filteredMessages, false)\n  }\n\n  return {\n    chatInputRef,\n    prompt,\n    handleNewChat,\n    handleSendMessage,\n    handleFocusChatInput,\n    handleStopMessage,\n    handleSendEdit\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}