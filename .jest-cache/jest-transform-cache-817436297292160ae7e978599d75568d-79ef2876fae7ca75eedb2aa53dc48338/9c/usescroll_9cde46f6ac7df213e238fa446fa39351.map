{"version":3,"names":["cov_zvfy53xxr","actualCoverage","s","context_1","require","react_1","useScroll","f","isGenerating","chatMessages","useContext","ChatbotUIContext","messagesStartRef","useRef","messagesEndRef","isAutoScrolling","isAtTop","setIsAtTop","useState","isAtBottom","setIsAtBottom","userScrolled","setUserScrolled","isOverflowing","setIsOverflowing","useEffect","b","scrollToBottom","handleScroll","useCallback","e","target","bottom","Math","round","scrollHeight","scrollTop","clientHeight","top","current","isOverflow","scrollToTop","scrollIntoView","behavior","setTimeout","exports"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\components\\chat\\chat-hooks\\use-scroll.tsx"],"sourcesContent":["import { ChatbotUIContext } from \"@/context/context\"\r\nimport {\r\n  type UIEventHandler,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState\r\n} from \"react\"\r\n\r\nexport const useScroll = () => {\r\n  const { isGenerating, chatMessages } = useContext(ChatbotUIContext)\r\n\r\n  const messagesStartRef = useRef<HTMLDivElement>(null)\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n  const isAutoScrolling = useRef(false)\r\n\r\n  const [isAtTop, setIsAtTop] = useState(false)\r\n  const [isAtBottom, setIsAtBottom] = useState(true)\r\n  const [userScrolled, setUserScrolled] = useState(false)\r\n  const [isOverflowing, setIsOverflowing] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setUserScrolled(false)\r\n\r\n    if (!isGenerating && userScrolled) {\r\n      setUserScrolled(false)\r\n    }\r\n  }, [isGenerating])\r\n\r\n  useEffect(() => {\r\n    if (isGenerating && !userScrolled) {\r\n      scrollToBottom()\r\n    }\r\n  }, [chatMessages])\r\n\r\n  const handleScroll: UIEventHandler<HTMLDivElement> = useCallback(e => {\r\n    const target = e.target as HTMLDivElement\r\n    const bottom =\r\n      Math.round(target.scrollHeight) - Math.round(target.scrollTop) ===\r\n      Math.round(target.clientHeight)\r\n    setIsAtBottom(bottom)\r\n\r\n    const top = target.scrollTop === 0\r\n    setIsAtTop(top)\r\n\r\n    if (!bottom && !isAutoScrolling.current) {\r\n      setUserScrolled(true)\r\n    } else {\r\n      setUserScrolled(false)\r\n    }\r\n\r\n    const isOverflow = target.scrollHeight > target.clientHeight\r\n    setIsOverflowing(isOverflow)\r\n  }, [])\r\n\r\n  const scrollToTop = useCallback(() => {\r\n    if (messagesStartRef.current) {\r\n      messagesStartRef.current.scrollIntoView({ behavior: \"instant\" })\r\n    }\r\n  }, [])\r\n\r\n  const scrollToBottom = useCallback(() => {\r\n    isAutoScrolling.current = true\r\n\r\n    setTimeout(() => {\r\n      if (messagesEndRef.current) {\r\n        messagesEndRef.current.scrollIntoView({ behavior: \"instant\" })\r\n      }\r\n\r\n      isAutoScrolling.current = false\r\n    }, 100)\r\n  }, [])\r\n\r\n  return {\r\n    messagesStartRef,\r\n    messagesEndRef,\r\n    isAtTop,\r\n    isAtBottom,\r\n    userScrolled,\r\n    isOverflowing,\r\n    handleScroll,\r\n    scrollToTop,\r\n    scrollToBottom,\r\n    setIsAtBottom\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}