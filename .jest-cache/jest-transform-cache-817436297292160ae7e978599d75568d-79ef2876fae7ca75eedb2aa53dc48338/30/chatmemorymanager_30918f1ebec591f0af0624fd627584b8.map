{"version":3,"names":["cov_d4nuuq9o1","actualCoverage","s","supabase_js_1","require","supabaseUrl","process","env","NEXT_PUBLIC_SUPABASE_URL","supabaseKey","NEXT_PUBLIC_SUPABASE_ANON_KEY","supabase","createClient","ChatMemoryManager","instance","memoryCache","Map","sourceCache","MAX_MEMORY_ENTRIES","MAX_CONTEXT_LENGTH","SOURCE_CACHE_TTL","MAX_CACHED_SOURCES","generateValidUUID","input","f","uuidRegex","test","b","crypto","randomUUID","hex","uuid","i","Math","floor","random","substring","parseInt","toString","join","simpleHash","str","hash","length","char","charCodeAt","abs","padStart","getInstance","getChatContext","chatId","userId","cacheKey","has","get","context","loadChatContextFromDB","set","saveMessage","messageId","content","role","metadata","validChatId","validUserId","memory","id","timestamp","Date","saveMemoryToDB","conversationHistory","push","slice","currentContext","buildCurrentContext","error","console","getRelevantHistory","currentQuery","maxMessages","relevantMessages","filter","msg","getSearchContext","previousSearches","searchHistory","userPreferences","updateUserPreferences","preferences","saveContextToDB","recordSearch","query","results","quality","researchMode","verificationPassed","updateQualityMetrics","recordResearchMode","mode","processingTime","confidence","modeMetrics","qualityMetrics","modePerformance","count","avgQuality","avgTime","verificationStats","totalVerifications","passedVerifications","averageConfidence","totalQueries","averageQuality","cacheVerifiedSources","sources","now","expiresAt","getTime","cachedSources","toLowerCase","trim","map","source","lastUsed","createdAt","cleanExpiredSources","getCachedLegalSources","maxAge","queryLower","relevantCachedSources","cached","age","isQuerySimilar","allSources","flatMap","uniqueSources","index","self","findIndex","url","forEach","calculateModePerformance","modeStats","react","totalQuality","totalTime","iter_research","hybrid","determineTopPerformingMode","Object","entries","reduce","best","stats","currentBest","generateRecommendations","successRate","recommendations","topMode","getQualityMetrics","timeRange","data","contexts","from","select","eq","getDefaultQualityMetrics","totalConfidence","metrics","quality_metrics","keys","modeData","topPerformingMode","undefined","query1","query2","words1","split","word","words2","commonWords","includes","similarity","max","modes","bestMode","buildConversationHistorySection","recentMessages","contextParts","modeInfo","qualityInfo","finalQuality","buildSearchHistorySection","search","verificationInfo","buildCachedSourcesSection","recentCachedSources","verifiedCount","verified","buildPerformanceMetricsSection","toFixed","usedModes","_","buildUserPreferencesSection","preferredSearchStrategy","maxSearchRounds","enableModelDecision","preferredResearchMode","qualityThreshold","loadMessagesFromDB","messages","messagesError","order","ascending","limit","chat_id","user_id","created_at","loadContextDataFromDB","contextData","contextError","single","buildEmptyContext","search_history","user_preferences","cached_sources","upsert","toISOString","updated_at","clearChatMemory","delete","getAdvancedMemoryStats","totalMessages","totalSearches","lastActivity","researchModeStats","cachedSourcesCount","exports"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\memory\\chat-memory-manager.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\nconst supabase = createClient(supabaseUrl, supabaseKey)\n\nexport interface ChatMemory {\n  id: string\n  chatId: string\n  userId: string\n  messageId: string\n  content: string\n  role: 'user' | 'assistant' | 'system'\n  timestamp: Date\n  metadata?: {\n    searchRounds?: number\n    totalSearches?: number\n    totalResults?: number\n    finalQuality?: number\n    modelDecisions?: number\n    searchStrategy?: string\n    researchMode?: 'react' | 'iter_research' | 'hybrid'\n    verificationPassed?: boolean\n    confidence?: number\n    processingTime?: number\n    sources?: Array<{\n      title: string\n      url: string\n      type: string\n      quality: number\n      authorityScore?: number\n      verified?: boolean\n    }>\n  }\n}\n\nexport interface ChatContext {\n  chatId: string\n  userId: string\n  conversationHistory: ChatMemory[]\n  currentContext: string\n  searchHistory: Array<{\n    query: string\n    results: number\n    quality: number\n    timestamp: Date\n    researchMode?: 'react' | 'iter_research' | 'hybrid'\n    verificationPassed?: boolean\n  }>\n  userPreferences: {\n    preferredSearchStrategy: string\n    maxSearchRounds: number\n    enableModelDecision: boolean\n    preferredResearchMode?: 'react' | 'iter_research' | 'hybrid'\n    qualityThreshold?: number\n  }\n  cachedSources: Array<{\n    query: string\n    sources: Array<{\n      title: string\n      url: string\n      type: string\n      authorityScore: number\n      verified: boolean\n      lastUsed: Date\n    }>\n    createdAt: Date\n    expiresAt: Date\n  }>\n  qualityMetrics: {\n    totalQueries: number\n    averageQuality: number\n    modePerformance: {\n      react: { count: number; avgQuality: number; avgTime: number }\n      iter_research: { count: number; avgQuality: number; avgTime: number }\n      hybrid: { count: number; avgQuality: number; avgTime: number }\n    }\n    verificationStats: {\n      totalVerifications: number\n      passedVerifications: number\n      averageConfidence: number\n    }\n  }\n}\n\n/**\n * Sistema de memoria para chat con capacidades agenticas\n */\nexport class ChatMemoryManager {\n  private static instance: ChatMemoryManager\n  private memoryCache: Map<string, ChatContext> = new Map()\n  private sourceCache: Map<string, Array<{\n    title: string\n    url: string\n    type: string\n    authorityScore: number\n    verified: boolean\n    lastUsed: Date\n  }>> = new Map()\n  private readonly MAX_MEMORY_ENTRIES = 50\n  private readonly MAX_CONTEXT_LENGTH = 8000\n  private readonly SOURCE_CACHE_TTL = 24 * 60 * 60 * 1000 // 24 horas\n  private readonly MAX_CACHED_SOURCES = 1000\n\n  /**\n   * Genera un UUID válido para IDs que no son UUIDs válidos\n   */\n  private generateValidUUID(input: string): string {\n    // Si ya es un UUID válido, devolverlo\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i\n    if (uuidRegex.test(input)) {\n      return input\n    }\n    \n    // Generar un UUID v4 válido usando crypto.randomUUID si está disponible\n    if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n      return crypto.randomUUID()\n    }\n    \n    // Fallback: generar UUID v4 manualmente con formato correcto\n    const hex = '0123456789abcdef'\n    let uuid = ''\n    \n    // Generar 32 caracteres hexadecimales\n    for (let i = 0; i < 32; i++) {\n      uuid += hex[Math.floor(Math.random() * 16)]\n    }\n    \n    // Insertar guiones en las posiciones correctas para UUID v4\n    return [\n      uuid.substring(0, 8),\n      uuid.substring(8, 12),\n      '4' + uuid.substring(13, 16), // Versión 4\n      ((parseInt(uuid.substring(16, 17), 16) & 0x3) | 0x8).toString(16) + uuid.substring(17, 20), // Variante\n      uuid.substring(20, 32)\n    ].join('-')\n  }\n\n  /**\n   * Función hash simple compatible con Edge Runtime\n   */\n  private simpleHash(str: string): string {\n    let hash = 0\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // Convertir a entero de 32 bits\n    }\n    \n    // Convertir a hexadecimal y asegurar longitud de 32 caracteres\n    const hex = Math.abs(hash).toString(16)\n    return hex.padStart(32, '0').substring(0, 32)\n  }\n\n  static getInstance(): ChatMemoryManager {\n    if (!ChatMemoryManager.instance) {\n      ChatMemoryManager.instance = new ChatMemoryManager()\n    }\n    return ChatMemoryManager.instance\n  }\n\n  /**\n   * Obtiene o crea el contexto de chat\n   */\n  async getChatContext(chatId: string, userId: string): Promise<ChatContext> {\n    const cacheKey = `${chatId}-${userId}`\n    \n    if (this.memoryCache.has(cacheKey)) {\n      return this.memoryCache.get(cacheKey)!\n    }\n\n    // Cargar desde base de datos\n    const context = await this.loadChatContextFromDB(chatId, userId)\n    this.memoryCache.set(cacheKey, context)\n    return context\n  }\n\n  /**\n   * Guarda un mensaje en la memoria\n   */\n  async saveMessage(\n    chatId: string,\n    userId: string,\n    messageId: string,\n    content: string,\n    role: 'user' | 'assistant' | 'system',\n    metadata?: ChatMemory['metadata']\n  ): Promise<void> {\n    try {\n      // Generar UUIDs válidos\n      const validChatId = this.generateValidUUID(chatId)\n      const validUserId = this.generateValidUUID(userId)\n      \n      const memory: ChatMemory = {\n        id: `${validChatId}-${messageId}`,\n        chatId: validChatId,\n        userId: validUserId,\n        messageId,\n        content,\n        role,\n        timestamp: new Date(),\n        metadata\n      }\n\n      // Guardar en base de datos\n      await this.saveMemoryToDB(memory)\n\n      // Actualizar cache\n      const context = await this.getChatContext(validChatId, validUserId)\n      context.conversationHistory.push(memory)\n      \n      // Limitar tamaño de memoria\n      if (context.conversationHistory.length > this.MAX_MEMORY_ENTRIES) {\n        context.conversationHistory = context.conversationHistory.slice(-this.MAX_MEMORY_ENTRIES)\n      }\n\n      // Actualizar contexto actual\n      context.currentContext = this.buildCurrentContext(context)\n    } catch (error) {\n      console.error('Error guardando memoria:', error)\n    }\n  }\n\n  /**\n   * Obtiene el historial de conversación relevante\n   */\n  async getRelevantHistory(\n    chatId: string,\n    userId: string,\n    currentQuery: string,\n    maxMessages: number = 10\n  ): Promise<ChatMemory[]> {\n    try {\n      // Generar UUIDs válidos\n      const validChatId = this.generateValidUUID(chatId)\n      const validUserId = this.generateValidUUID(userId)\n      \n      const context = await this.getChatContext(validChatId, validUserId)\n      \n      // Filtrar mensajes relevantes basándose en similitud semántica\n      const relevantMessages = context.conversationHistory\n        .filter(msg => msg.role !== 'system')\n        .slice(-maxMessages)\n\n      return relevantMessages\n    } catch (error) {\n      console.error('Error en getRelevantHistory:', error)\n      return []\n    }\n  }\n\n  /**\n   * Obtiene el contexto de búsqueda relevante\n   */\n  async getSearchContext(\n    chatId: string,\n    userId: string\n  ): Promise<{\n    previousSearches: Array<{\n      query: string\n      results: number\n      quality: number\n      timestamp: Date\n    }>\n    userPreferences: {\n      preferredSearchStrategy: string\n      maxSearchRounds: number\n      enableModelDecision: boolean\n    }\n  }> {\n    const context = await this.getChatContext(chatId, userId)\n    \n    return {\n      previousSearches: context.searchHistory.slice(-5), // Últimas 5 búsquedas\n      userPreferences: context.userPreferences\n    }\n  }\n\n  /**\n   * Actualiza las preferencias del usuario\n   */\n  async updateUserPreferences(\n    chatId: string,\n    userId: string,\n    preferences: Partial<ChatContext['userPreferences']>\n  ): Promise<void> {\n    const context = await this.getChatContext(chatId, userId)\n    context.userPreferences = { ...context.userPreferences, ...preferences }\n    \n    // Guardar en base de datos\n    await this.saveContextToDB(context)\n  }\n\n  /**\n   * Registra una búsqueda realizada con métricas avanzadas\n   */\n  async recordSearch(\n    chatId: string,\n    userId: string,\n    query: string,\n    results: number,\n    quality: number,\n    researchMode?: 'react' | 'iter_research' | 'hybrid',\n    verificationPassed?: boolean\n  ): Promise<void> {\n    const context = await this.getChatContext(chatId, userId)\n    \n    context.searchHistory.push({\n      query,\n      results,\n      quality,\n      timestamp: new Date(),\n      researchMode,\n      verificationPassed\n    })\n\n    // Actualizar métricas de calidad\n    this.updateQualityMetrics(context, quality, researchMode, verificationPassed)\n\n    // Limitar historial de búsquedas\n    if (context.searchHistory.length > 20) {\n      context.searchHistory = context.searchHistory.slice(-20)\n    }\n\n    await this.saveContextToDB(context)\n  }\n\n  /**\n   * Registra el modo de investigación utilizado\n   */\n  async recordResearchMode(\n    chatId: string,\n    userId: string,\n    query: string,\n    mode: 'react' | 'iter_research' | 'hybrid',\n    quality: number,\n    processingTime: number,\n    verificationPassed: boolean,\n    confidence: number\n  ): Promise<void> {\n    const context = await this.getChatContext(chatId, userId)\n    \n    // Actualizar métricas de rendimiento por modo\n    const modeMetrics = context.qualityMetrics.modePerformance[mode]\n    modeMetrics.count += 1\n    modeMetrics.avgQuality = (modeMetrics.avgQuality * (modeMetrics.count - 1) + quality) / modeMetrics.count\n    modeMetrics.avgTime = (modeMetrics.avgTime * (modeMetrics.count - 1) + processingTime) / modeMetrics.count\n\n    // Actualizar estadísticas de verificación\n    context.qualityMetrics.verificationStats.totalVerifications += 1\n    if (verificationPassed) {\n      context.qualityMetrics.verificationStats.passedVerifications += 1\n    }\n    context.qualityMetrics.verificationStats.averageConfidence = \n      (context.qualityMetrics.verificationStats.averageConfidence * (context.qualityMetrics.verificationStats.totalVerifications - 1) + confidence) / \n      context.qualityMetrics.verificationStats.totalVerifications\n\n    // Actualizar calidad promedio general\n    context.qualityMetrics.totalQueries += 1\n    context.qualityMetrics.averageQuality = \n      (context.qualityMetrics.averageQuality * (context.qualityMetrics.totalQueries - 1) + quality) / \n      context.qualityMetrics.totalQueries\n\n    await this.saveContextToDB(context)\n  }\n\n  /**\n   * Cachea fuentes verificadas para reutilización\n   */\n  async cacheVerifiedSources(\n    chatId: string,\n    userId: string,\n    query: string,\n    sources: Array<{\n      title: string\n      url: string\n      type: string\n      authorityScore: number\n      verified: boolean\n    }>\n  ): Promise<void> {\n    const context = await this.getChatContext(chatId, userId)\n    const now = new Date()\n    const expiresAt = new Date(now.getTime() + this.SOURCE_CACHE_TTL)\n\n    // Agregar fuentes al caché\n    context.cachedSources.push({\n      query: query.toLowerCase().trim(),\n      sources: sources.map(source => ({\n        ...source,\n        lastUsed: now\n      })),\n      createdAt: now,\n      expiresAt\n    })\n\n    // Limpiar fuentes expiradas\n    this.cleanExpiredSources(context)\n\n    // Limitar número de fuentes cacheadas\n    if (context.cachedSources.length > 50) {\n      context.cachedSources = context.cachedSources.slice(-50)\n    }\n\n    await this.saveContextToDB(context)\n  }\n\n  /**\n   * Obtiene fuentes cacheadas para una consulta similar\n   */\n  async getCachedLegalSources(\n    chatId: string,\n    userId: string,\n    query: string,\n    maxAge: number = this.SOURCE_CACHE_TTL\n  ): Promise<Array<{\n    title: string\n    url: string\n    type: string\n    authorityScore: number\n    verified: boolean\n  }>> {\n    const context = await this.getChatContext(chatId, userId)\n    const now = new Date()\n    const queryLower = query.toLowerCase().trim()\n\n    // Buscar fuentes cacheadas similares\n    const relevantCachedSources = context.cachedSources.filter(cached => {\n      const age = now.getTime() - cached.createdAt.getTime()\n      return age <= maxAge && this.isQuerySimilar(queryLower, cached.query)\n    })\n\n    if (relevantCachedSources.length === 0) {\n      return []\n    }\n\n    // Combinar fuentes de todas las consultas similares\n    const allSources = relevantCachedSources.flatMap(cached => cached.sources)\n    \n    // Eliminar duplicados basándose en URL\n    const uniqueSources = allSources.filter((source, index, self) => \n      index === self.findIndex(s => s.url === source.url)\n    )\n\n    // Actualizar lastUsed para las fuentes encontradas\n    uniqueSources.forEach(source => {\n      source.lastUsed = now\n    })\n\n    return uniqueSources\n  }\n\n  /**\n   * Obtiene métricas de calidad por tipo de consulta\n   */\n  /**\n   * Calcula estadísticas por modo de investigación\n   */\n  private calculateModePerformance(modeStats: any): {\n    react: { count: number; avgQuality: number; avgTime: number }\n    iter_research: { count: number; avgQuality: number; avgTime: number }\n    hybrid: { count: number; avgQuality: number; avgTime: number }\n  } {\n    return {\n      react: {\n        count: modeStats.react.count,\n        avgQuality: modeStats.react.count > 0 ? modeStats.react.totalQuality / modeStats.react.count : 0,\n        avgTime: modeStats.react.count > 0 ? modeStats.react.totalTime / modeStats.react.count : 0\n      },\n      iter_research: {\n        count: modeStats.iter_research.count,\n        avgQuality: modeStats.iter_research.count > 0 ? modeStats.iter_research.totalQuality / modeStats.iter_research.count : 0,\n        avgTime: modeStats.iter_research.count > 0 ? modeStats.iter_research.totalTime / modeStats.iter_research.count : 0\n      },\n      hybrid: {\n        count: modeStats.hybrid.count,\n        avgQuality: modeStats.hybrid.count > 0 ? modeStats.hybrid.totalQuality / modeStats.hybrid.count : 0,\n        avgTime: modeStats.hybrid.count > 0 ? modeStats.hybrid.totalTime / modeStats.hybrid.count : 0\n      }\n    }\n  }\n\n  /**\n   * Determina el modo con mejor rendimiento\n   */\n  private determineTopPerformingMode(modePerformance: any): 'react' | 'iter_research' | 'hybrid' {\n    return Object.entries(modePerformance).reduce((best, [mode, stats]) => {\n      if (stats.count === 0) return best\n      const currentBest = modePerformance[best as keyof typeof modePerformance]\n      return stats.avgQuality > currentBest.avgQuality ? (mode as 'react' | 'iter_research' | 'hybrid') : best\n    }, 'react' as 'react' | 'iter_research' | 'hybrid')\n  }\n\n  /**\n   * Genera recomendaciones basadas en métricas\n   */\n  private generateRecommendations(\n    modePerformance: any, \n    averageQuality: number, \n    successRate: number\n  ): string[] {\n    const recommendations: string[] = []\n    \n    if (averageQuality < 7) {\n      recommendations.push(\"Considera aumentar el número de rondas de búsqueda para mejorar la calidad\")\n    }\n    \n    if (successRate < 0.8) {\n      recommendations.push(\"Revisa la configuración de verificación para mejorar la tasa de éxito\")\n    }\n    \n    const topMode = this.determineTopPerformingMode(modePerformance)\n    if (topMode !== 'react') {\n      recommendations.push(`El modo ${topMode} muestra mejor rendimiento, considera usarlo más frecuentemente`)\n    }\n    \n    return recommendations\n  }\n\n  async getQualityMetrics(\n    userId: string,\n    timeRange?: { start: Date; end: Date }\n  ): Promise<{\n    totalQueries: number\n    averageQuality: number\n    modePerformance: {\n      react: { count: number; avgQuality: number; avgTime: number }\n      iter_research: { count: number; avgQuality: number; avgTime: number }\n      hybrid: { count: number; avgQuality: number; avgTime: number }\n    }\n    verificationStats: {\n      totalVerifications: number\n      passedVerifications: number\n      averageConfidence: number\n      successRate: number\n    }\n    topPerformingMode: 'react' | 'iter_research' | 'hybrid'\n    recommendations: string[]\n  }> {\n    try {\n      // Cargar métricas de todos los chats del usuario\n      const { data: contexts, error } = await supabase\n        .from('chat_contexts')\n        .select('quality_metrics, search_history, created_at')\n        .eq('user_id', userId)\n\n      if (error) {\n        console.error('Error cargando métricas:', error)\n        return this.getDefaultQualityMetrics()\n      }\n\n      // Agregar métricas de todos los contextos\n      let totalQueries = 0\n      let totalQuality = 0\n      let totalVerifications = 0\n      let passedVerifications = 0\n      let totalConfidence = 0\n\n      const modeStats = {\n        react: { count: 0, totalQuality: 0, totalTime: 0 },\n        iter_research: { count: 0, totalQuality: 0, totalTime: 0 },\n        hybrid: { count: 0, totalQuality: 0, totalTime: 0 }\n      }\n\n      contexts?.forEach(context => {\n        const metrics = context.quality_metrics || this.getDefaultQualityMetrics()\n        totalQueries += metrics.totalQueries\n        totalQuality += metrics.averageQuality * metrics.totalQueries\n        totalVerifications += metrics.verificationStats.totalVerifications\n        passedVerifications += metrics.verificationStats.passedVerifications\n        totalConfidence += metrics.verificationStats.averageConfidence * metrics.verificationStats.totalVerifications\n\n        // Agregar estadísticas por modo\n        Object.keys(modeStats).forEach(mode => {\n          const modeData = metrics.modePerformance[mode as keyof typeof metrics.modePerformance]\n          modeStats[mode as keyof typeof modeStats].count += modeData.count\n          modeStats[mode as keyof typeof modeStats].totalQuality += modeData.avgQuality * modeData.count\n          modeStats[mode as keyof typeof modeStats].totalTime += modeData.avgTime * modeData.count\n        })\n      })\n\n      // Calcular promedios\n      const averageQuality = totalQueries > 0 ? totalQuality / totalQueries : 0\n      const averageConfidence = totalVerifications > 0 ? totalConfidence / totalVerifications : 0\n      const successRate = totalVerifications > 0 ? passedVerifications / totalVerifications : 0\n\n      // Calcular estadísticas por modo usando función auxiliar\n      const modePerformance = this.calculateModePerformance(modeStats)\n\n      // Determinar modo con mejor rendimiento usando función auxiliar\n      const topPerformingMode = this.determineTopPerformingMode(modePerformance)\n\n      // Generar recomendaciones usando función auxiliar\n      const recommendations = this.generateRecommendations(modePerformance, averageQuality, successRate)\n\n      return {\n        totalQueries,\n        averageQuality,\n        modePerformance,\n        verificationStats: {\n          totalVerifications,\n          passedVerifications,\n          averageConfidence,\n          successRate\n        },\n        topPerformingMode,\n        recommendations\n      }\n\n    } catch (error) {\n      console.error('Error obteniendo métricas de calidad:', error)\n      return this.getDefaultQualityMetrics()\n    }\n  }\n\n  /**\n   * Actualiza métricas de calidad en el contexto\n   */\n  private updateQualityMetrics(\n    context: ChatContext,\n    quality: number,\n    researchMode?: 'react' | 'iter_research' | 'hybrid',\n    verificationPassed?: boolean\n  ): void {\n    context.qualityMetrics.totalQueries += 1\n    context.qualityMetrics.averageQuality = \n      (context.qualityMetrics.averageQuality * (context.qualityMetrics.totalQueries - 1) + quality) / \n      context.qualityMetrics.totalQueries\n\n    if (researchMode) {\n      const modeMetrics = context.qualityMetrics.modePerformance[researchMode]\n      modeMetrics.count += 1\n      modeMetrics.avgQuality = (modeMetrics.avgQuality * (modeMetrics.count - 1) + quality) / modeMetrics.count\n    }\n\n    if (verificationPassed !== undefined) {\n      context.qualityMetrics.verificationStats.totalVerifications += 1\n      if (verificationPassed) {\n        context.qualityMetrics.verificationStats.passedVerifications += 1\n      }\n    }\n  }\n\n  /**\n   * Limpia fuentes expiradas del caché\n   */\n  private cleanExpiredSources(context: ChatContext): void {\n    const now = new Date()\n    context.cachedSources = context.cachedSources.filter(cached => cached.expiresAt > now)\n  }\n\n  /**\n   * Verifica si dos consultas son similares\n   */\n  private isQuerySimilar(query1: string, query2: string): boolean {\n    // Algoritmo simple de similitud basado en palabras clave\n    const words1 = query1.split(' ').filter(word => word.length > 3)\n    const words2 = query2.split(' ').filter(word => word.length > 3)\n    \n    if (words1.length === 0 || words2.length === 0) return false\n    \n    const commonWords = words1.filter(word => words2.includes(word))\n    const similarity = commonWords.length / Math.max(words1.length, words2.length)\n    \n    return similarity >= 0.3 // 30% de similitud mínima\n  }\n\n  /**\n   * Genera recomendaciones basadas en métricas\n   */\n  private generateRecommendations(\n    modePerformance: any,\n    averageQuality: number,\n    successRate: number\n  ): string[] {\n    const recommendations: string[] = []\n\n    // Recomendaciones basadas en calidad promedio\n    if (averageQuality < 7.0) {\n      recommendations.push(\"Considera reformular tus consultas para ser más específicas y obtener mejores resultados.\")\n    }\n\n    // Recomendaciones basadas en modo de rendimiento\n    const modes = Object.entries(modePerformance) as [string, any][]\n    const bestMode = modes.reduce((best, [mode, stats]) => {\n      if (stats.count === 0) return best\n      return stats.avgQuality > best.avgQuality ? { mode, ...stats } : best\n    }, { mode: 'react', avgQuality: 0 })\n\n    if (bestMode.mode !== 'react' && bestMode.count > 5) {\n      recommendations.push(`El modo ${bestMode.mode} ha mostrado mejor rendimiento para tus consultas. Considera usarlo más frecuentemente.`)\n    }\n\n    // Recomendaciones basadas en tasa de verificación\n    if (successRate < 0.8) {\n      recommendations.push(\"La tasa de verificación es baja. Considera consultas más específicas o revisar la calidad de las fuentes.\")\n    }\n\n    // Recomendaciones generales\n    if (recommendations.length === 0) {\n      recommendations.push(\"Tus consultas están obteniendo buenos resultados. Continúa con el mismo enfoque.\")\n    }\n\n    return recommendations\n  }\n\n  /**\n   * Obtiene métricas por defecto\n   */\n  private getDefaultQualityMetrics(): any {\n    return {\n      totalQueries: 0,\n      averageQuality: 0,\n      modePerformance: {\n        react: { count: 0, avgQuality: 0, avgTime: 0 },\n        iter_research: { count: 0, avgQuality: 0, avgTime: 0 },\n        hybrid: { count: 0, avgQuality: 0, avgTime: 0 }\n      },\n      verificationStats: {\n        totalVerifications: 0,\n        passedVerifications: 0,\n        averageConfidence: 0,\n        successRate: 0\n      },\n      topPerformingMode: 'react' as const,\n      recommendations: []\n    }\n  }\n\n  /**\n   * Construye el contexto actual para el modelo\n   */\n  /**\n   * Construye la sección de historial de conversación\n   */\n  private buildConversationHistorySection(recentMessages: ChatMemory[]): string[] {\n    const contextParts: string[] = []\n    \n    if (recentMessages.length > 0) {\n      contextParts.push(\"## HISTORIAL DE CONVERSACIÓN RELEVANTE:\")\n      recentMessages.forEach(msg => {\n        if (msg.role === 'user') {\n          contextParts.push(`Usuario: ${msg.content}`)\n        } else if (msg.role === 'assistant') {\n          const metadata = msg.metadata\n          const modeInfo = metadata?.researchMode ? ` (Modo: ${metadata.researchMode})` : ''\n          const qualityInfo = metadata?.finalQuality ? ` (Calidad: ${metadata.finalQuality}/10)` : ''\n          contextParts.push(`Asistente: ${msg.content.substring(0, 200)}...${modeInfo}${qualityInfo}`)\n        }\n      })\n    }\n    \n    return contextParts\n  }\n\n  /**\n   * Construye la sección de historial de búsquedas\n   */\n  private buildSearchHistorySection(searchHistory: ChatContext['searchHistory']): string[] {\n    const contextParts: string[] = []\n    \n    if (searchHistory.length > 0) {\n      contextParts.push(\"\\n## BÚSQUEDAS ANTERIORES:\")\n      searchHistory.slice(-3).forEach(search => {\n        const modeInfo = search.researchMode ? ` [${search.researchMode}]` : ''\n        const verificationInfo = search.verificationPassed !== undefined ? \n          ` (Verificación: ${search.verificationPassed ? '✅' : '❌'})` : ''\n        contextParts.push(`- \"${search.query}\"${modeInfo} (${search.results} resultados, calidad: ${search.quality}/10)${verificationInfo}`)\n      })\n    }\n    \n    return contextParts\n  }\n\n  /**\n   * Construye la sección de fuentes cacheadas\n   */\n  private buildCachedSourcesSection(cachedSources: ChatContext['cachedSources']): string[] {\n    const contextParts: string[] = []\n    \n    if (cachedSources.length > 0) {\n      const recentCachedSources = cachedSources\n        .filter(cached => {\n          const age = Date.now() - cached.createdAt.getTime()\n          return age <= this.SOURCE_CACHE_TTL\n        })\n        .slice(-2) // Últimas 2 consultas cacheadas\n\n      if (recentCachedSources.length > 0) {\n        contextParts.push(\"\\n## FUENTES VERIFICADAS DISPONIBLES:\")\n        recentCachedSources.forEach(cached => {\n          const verifiedCount = cached.sources.filter(s => s.verified).length\n          contextParts.push(`- Consulta: \"${cached.query}\" (${verifiedCount}/${cached.sources.length} fuentes verificadas)`)\n        })\n      }\n    }\n    \n    return contextParts\n  }\n\n  /**\n   * Construye la sección de métricas de rendimiento\n   */\n  private buildPerformanceMetricsSection(qualityMetrics: ChatContext['qualityMetrics']): string[] {\n    const contextParts: string[] = []\n    \n    if (qualityMetrics.totalQueries > 0) {\n      contextParts.push(\"\\n## MÉTRICAS DE RENDIMIENTO:\")\n      contextParts.push(`- Total consultas: ${qualityMetrics.totalQueries}`)\n      contextParts.push(`- Calidad promedio: ${qualityMetrics.averageQuality.toFixed(1)}/10`)\n      \n      const modeStats = qualityMetrics.modePerformance\n      const usedModes = Object.entries(modeStats).filter(([_, stats]) => stats.count > 0)\n      if (usedModes.length > 0) {\n        contextParts.push(\"- Rendimiento por modo:\")\n        usedModes.forEach(([mode, stats]) => {\n          contextParts.push(`  • ${mode}: ${stats.count} consultas, calidad ${stats.avgQuality.toFixed(1)}/10`)\n        })\n      }\n\n      const verificationStats = qualityMetrics.verificationStats\n      if (verificationStats.totalVerifications > 0) {\n        const successRate = (verificationStats.passedVerifications / verificationStats.totalVerifications * 100).toFixed(1)\n        contextParts.push(`- Tasa de verificación: ${successRate}%`)\n      }\n    }\n    \n    return contextParts\n  }\n\n  /**\n   * Construye la sección de preferencias del usuario\n   */\n  private buildUserPreferencesSection(userPreferences: ChatContext['userPreferences']): string[] {\n    const contextParts: string[] = []\n    \n    contextParts.push(\"\\n## PREFERENCIAS DEL USUARIO:\")\n    contextParts.push(`- Estrategia de búsqueda: ${userPreferences.preferredSearchStrategy}`)\n    contextParts.push(`- Máximo de rondas: ${userPreferences.maxSearchRounds}`)\n    contextParts.push(`- Decisión del modelo: ${userPreferences.enableModelDecision ? 'Activada' : 'Desactivada'}`)\n    \n    if (userPreferences.preferredResearchMode) {\n      contextParts.push(`- Modo preferido: ${userPreferences.preferredResearchMode}`)\n    }\n    \n    if (userPreferences.qualityThreshold) {\n      contextParts.push(`- Umbral de calidad: ${userPreferences.qualityThreshold}`)\n    }\n    \n    return contextParts\n  }\n\n  private buildCurrentContext(context: ChatContext): string {\n    const recentMessages = context.conversationHistory.slice(-10)\n    const contextParts: string[] = []\n\n    // Construir cada sección usando las funciones extraídas\n    contextParts.push(...this.buildConversationHistorySection(recentMessages))\n    contextParts.push(...this.buildSearchHistorySection(context.searchHistory))\n    contextParts.push(...this.buildCachedSourcesSection(context.cachedSources))\n    contextParts.push(...this.buildPerformanceMetricsSection(context.qualityMetrics))\n    contextParts.push(...this.buildUserPreferencesSection(context.userPreferences))\n\n    return contextParts.join('\\n')\n  }\n  /**\n   * Carga mensajes del chat desde la base de datos\n   */\n  private async loadMessagesFromDB(chatId: string, userId: string): Promise<ChatMemory[]> {\n    const { data: messages, error: messagesError } = await supabase\n      .from('messages')\n      .select('*')\n      .eq('chat_id', chatId)\n      .eq('user_id', userId)\n      .order('created_at', { ascending: true })\n      .limit(this.MAX_MEMORY_ENTRIES)\n\n    if (messagesError) {\n      console.error('Error cargando mensajes:', messagesError)\n      return []\n    }\n\n    return (messages || []).map(msg => ({\n      id: msg.id,\n      chatId: msg.chat_id,\n      userId: msg.user_id,\n      messageId: msg.id,\n      content: msg.content,\n      role: msg.role,\n      timestamp: new Date(msg.created_at),\n      metadata: msg.metadata\n    }))\n  }\n\n  /**\n   * Carga contexto del chat desde la base de datos\n   */\n  private async loadContextDataFromDB(chatId: string, userId: string): Promise<any> {\n    const { data: contextData, error: contextError } = await supabase\n      .from('chat_contexts')\n      .select('*')\n      .eq('chat_id', chatId)\n      .eq('user_id', userId)\n      .single()\n\n    if (contextError) {\n      console.error('Error cargando contexto:', contextError)\n      return null\n    }\n\n    return contextData\n  }\n\n  /**\n   * Construye contexto vacío por defecto\n   */\n  private buildEmptyContext(chatId: string, userId: string): ChatContext {\n    return {\n      chatId,\n      userId,\n      conversationHistory: [],\n      currentContext: '',\n      searchHistory: [],\n      userPreferences: {\n        preferredSearchStrategy: 'AGENTE_UNIFICADO_TONGYI',\n        maxSearchRounds: 8,\n        enableModelDecision: true,\n        preferredResearchMode: undefined,\n        qualityThreshold: 0.85\n      },\n      cachedSources: [],\n      qualityMetrics: {\n        totalQueries: 0,\n        averageQuality: 0,\n        modePerformance: {\n          react: { count: 0, avgQuality: 0, avgTime: 0 },\n          iter_research: { count: 0, avgQuality: 0, avgTime: 0 },\n          hybrid: { count: 0, avgQuality: 0, avgTime: 0 }\n        },\n        verificationStats: {\n          totalVerifications: 0,\n          passedVerifications: 0,\n          averageConfidence: 0,\n          successRate: 0\n        }\n      }\n    }\n  }\n\n  private async loadChatContextFromDB(chatId: string, userId: string): Promise<ChatContext> {\n    try {\n      // Cargar mensajes del chat\n      const { data: messages, error: messagesError } = await supabase\n        .from('messages')\n        .select('*')\n        .eq('chat_id', chatId)\n        .eq('user_id', userId)\n        .order('created_at', { ascending: true })\n        .limit(this.MAX_MEMORY_ENTRIES)\n\n      if (messagesError) {\n        console.error('Error cargando mensajes:', messagesError)\n      }\n\n      // Cargar contexto del chat\n      const { data: contextData, error: contextError } = await supabase\n        .from('chat_contexts')\n        .select('*')\n        .eq('chat_id', chatId)\n        .eq('user_id', userId)\n        .single()\n\n      const conversationHistory: ChatMemory[] = (messages || []).map(msg => ({\n        id: msg.id,\n        chatId: msg.chat_id,\n        userId: msg.user_id,\n        messageId: msg.id,\n        content: msg.content,\n        role: msg.role,\n        timestamp: new Date(msg.created_at),\n        metadata: msg.metadata\n      }))\n\n      const context: ChatContext = {\n        chatId,\n        userId,\n        conversationHistory,\n        currentContext: '',\n        searchHistory: contextData?.search_history || [],\n        userPreferences: contextData?.user_preferences || {\n          preferredSearchStrategy: 'AGENTE_UNIFICADO_TONGYI',\n          maxSearchRounds: 8,\n          enableModelDecision: true,\n          preferredResearchMode: undefined,\n          qualityThreshold: 0.85\n        },\n        cachedSources: contextData?.cached_sources || [],\n        qualityMetrics: contextData?.quality_metrics || {\n          totalQueries: 0,\n          averageQuality: 0,\n          modePerformance: {\n            react: { count: 0, avgQuality: 0, avgTime: 0 },\n            iter_research: { count: 0, avgQuality: 0, avgTime: 0 },\n            hybrid: { count: 0, avgQuality: 0, avgTime: 0 }\n          },\n          verificationStats: {\n            totalVerifications: 0,\n            passedVerifications: 0,\n            averageConfidence: 0\n          }\n        }\n      }\n\n      context.currentContext = this.buildCurrentContext(context)\n      return context\n\n    } catch (error) {\n      console.error('Error cargando contexto:', error)\n      \n      // Retornar contexto vacío en caso de error\n      return {\n        chatId,\n        userId,\n        conversationHistory: [],\n        currentContext: '',\n        searchHistory: [],\n        userPreferences: {\n          preferredSearchStrategy: 'AGENTE_UNIFICADO_TONGYI',\n          maxSearchRounds: 8,\n          enableModelDecision: true,\n          preferredResearchMode: undefined,\n          qualityThreshold: 0.85\n        },\n        cachedSources: [],\n        qualityMetrics: {\n          totalQueries: 0,\n          averageQuality: 0,\n          modePerformance: {\n            react: { count: 0, avgQuality: 0, avgTime: 0 },\n            iter_research: { count: 0, avgQuality: 0, avgTime: 0 },\n            hybrid: { count: 0, avgQuality: 0, avgTime: 0 }\n          },\n          verificationStats: {\n            totalVerifications: 0,\n            passedVerifications: 0,\n            averageConfidence: 0\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Guarda memoria en base de datos\n   */\n  private async saveMemoryToDB(memory: ChatMemory): Promise<void> {\n    try {\n      const { error } = await supabase\n        .from('messages')\n        .upsert({\n          id: memory.id,\n          chat_id: memory.chatId,\n          user_id: memory.userId,\n          content: memory.content,\n          role: memory.role,\n          metadata: memory.metadata,\n          created_at: memory.timestamp.toISOString()\n        })\n\n      if (error) {\n        console.error('Error guardando memoria:', error)\n      }\n    } catch (error) {\n      console.error('Error guardando memoria:', error)\n    }\n  }\n\n  /**\n   * Guarda contexto en base de datos\n   */\n  private async saveContextToDB(context: ChatContext): Promise<void> {\n    try {\n      const { error } = await supabase\n        .from('chat_contexts')\n        .upsert({\n          chat_id: context.chatId,\n          user_id: context.userId,\n          search_history: context.searchHistory,\n          user_preferences: context.userPreferences,\n          cached_sources: context.cachedSources,\n          quality_metrics: context.qualityMetrics,\n          updated_at: new Date().toISOString()\n        })\n\n      if (error) {\n        console.error('Error guardando contexto:', error)\n      }\n    } catch (error) {\n      console.error('Error guardando contexto:', error)\n    }\n  }\n\n  /**\n   * Limpia la memoria del chat\n   */\n  async clearChatMemory(chatId: string, userId: string): Promise<void> {\n    const cacheKey = `${chatId}-${userId}`\n    this.memoryCache.delete(cacheKey)\n\n    try {\n      // Limpiar mensajes de la base de datos\n      await supabase\n        .from('messages')\n        .delete()\n        .eq('chat_id', chatId)\n        .eq('user_id', userId)\n\n      // Limpiar contexto\n      await supabase\n        .from('chat_contexts')\n        .delete()\n        .eq('chat_id', chatId)\n        .eq('user_id', userId)\n\n    } catch (error) {\n      console.error('Error limpiando memoria:', error)\n    }\n  }\n\n  /**\n   * Obtiene estadísticas avanzadas de memoria\n   */\n  async getAdvancedMemoryStats(chatId: string, userId: string): Promise<{\n    totalMessages: number\n    totalSearches: number\n    averageQuality: number\n    lastActivity: Date | null\n    researchModeStats: {\n      react: { count: number; avgQuality: number; avgTime: number }\n      iter_research: { count: number; avgQuality: number; avgTime: number }\n      hybrid: { count: number; avgQuality: number; avgTime: number }\n    }\n    verificationStats: {\n      totalVerifications: number\n      passedVerifications: number\n      averageConfidence: number\n      successRate: number\n    }\n    cachedSourcesCount: number\n    topPerformingMode: 'react' | 'iter_research' | 'hybrid'\n    recommendations: string[]\n  }> {\n    const context = await this.getChatContext(chatId, userId)\n    \n    const totalMessages = context.conversationHistory.length\n    const totalSearches = context.searchHistory.length\n    const averageQuality = context.qualityMetrics.averageQuality\n    const lastActivity = context.conversationHistory.length > 0 \n      ? context.conversationHistory[context.conversationHistory.length - 1].timestamp\n      : null\n\n    const verificationStats = context.qualityMetrics.verificationStats\n    const successRate = verificationStats.totalVerifications > 0 \n      ? verificationStats.passedVerifications / verificationStats.totalVerifications \n      : 0\n\n    // Determinar modo con mejor rendimiento\n    const modePerformance = context.qualityMetrics.modePerformance\n    const topPerformingMode = Object.entries(modePerformance).reduce((best, [mode, stats]) => {\n      if (stats.count === 0) return best\n      const currentBest = modePerformance[best as keyof typeof modePerformance]\n      return stats.avgQuality > currentBest.avgQuality ? (mode as 'react' | 'iter_research' | 'hybrid') : best\n    }, 'react' as 'react' | 'iter_research' | 'hybrid')\n\n    // Generar recomendaciones\n    const recommendations = this.generateRecommendations(modePerformance, averageQuality, successRate)\n\n    return {\n      totalMessages,\n      totalSearches,\n      averageQuality,\n      lastActivity,\n      researchModeStats: modePerformance,\n      verificationStats: {\n        ...verificationStats,\n        successRate\n      },\n      cachedSourcesCount: context.cachedSources.length,\n      topPerformingMode,\n      recommendations\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}