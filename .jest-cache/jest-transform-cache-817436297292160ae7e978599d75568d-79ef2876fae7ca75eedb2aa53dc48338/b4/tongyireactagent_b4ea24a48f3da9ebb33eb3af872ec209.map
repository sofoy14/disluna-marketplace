{"version":3,"names":["cov_21f3i3skoz","actualCoverage","exports","createTongyiReActAgent","openai_1","s","__importDefault","require","enhanced_search_orchestrator_1","chat_memory_manager_1","anti_hallucination_system_1","TongyiReActAgent","client","memoryManager","antiHallucinationSystem","modelName","constructor","apiKey","f","default","baseURL","ChatMemoryManager","getInstance","createAntiHallucinationSystem","processQueryWithReAct","userQuery","chatId","userId","options","startTime","Date","now","console","log","repeat","reactSteps","currentStep","searchResults","verificationPassed","finalResponse","initialThought","generateThought","push","step","thought","action","observation","confidence","analysisResult","analyzeQuery","nextAction","needsSearch","b","maxRounds","maxSearchRounds","searchRound","roundResults","executeEnhancedSearch","maxResults","includeOfficialSources","includeAcademicSources","includeGeneralSources","prioritizeFreshness","searchObservation","observeSearchResults","length","calculateSearchConfidence","sufficiencyCheck","checkInformationSufficiency","sufficient","verificationResult","verifyInformation","passed","synthesisResult","synthesizeResponse","content","finalVerification","regenerateWithCorrections","processingTime","Math","ceil","toFixed","sources","map","result","title","url","type","metadata","searchEngine","quality","relevance","analysis","calculateResponseAnalysis","recommendations","generateRecommendations","warnings","generateEnhancedWarnings","searchRounds","totalSources","modelDecisions","error","query","context","phase","thoughtPrompt","c","join","response","chat","completions","create","model","messages","role","temperature","max_tokens","choices","message","analysisPrompt","JSON","parse","allResults","observationPrompt","results","verificationPrompt","verification","synthesisPrompt","index","authority","substring","finalVerificationPrompt","originalResponse","correctionPrompt","issues","source","reason","officialSources","filter","r","domain","includes","avgQuality","reduce","sum","avgRelevance","avgAuthority","completeness","min","accuracy","overall","some","freshness"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\tongyi-react-agent.ts"],"sourcesContent":["import OpenAI from \"openai\"\r\nimport { executeEnhancedSearch, EnhancedSearchResult } from \"@/lib/tools/enhanced-search-orchestrator\"\r\nimport { ChatMemoryManager } from \"@/lib/memory/chat-memory-manager\"\r\nimport { createAntiHallucinationSystem } from \"@/lib/anti-hallucination/anti-hallucination-system\"\r\n\r\nexport interface ReActStep {\r\n  step: number\r\n  thought: string\r\n  action: 'search' | 'analyze' | 'verify' | 'synthesize' | 'respond'\r\n  observation: string\r\n  confidence: number\r\n  nextAction?: string\r\n}\r\n\r\nexport interface ReActResponse {\r\n  content: string\r\n  sources: Array<{\r\n    title: string\r\n    url: string\r\n    type: string\r\n    quality: number\r\n    relevance: number\r\n  }>\r\n  analysis?: {\r\n    completeness: number\r\n    accuracy: number\r\n    relevance: number\r\n    authority: number\r\n    overall: number\r\n  }\r\n  recommendations?: string[]\r\n  warnings?: string[]\r\n  reactSteps: ReActStep[]\r\n  metadata: {\r\n    searchRounds: number\r\n    totalSources: number\r\n    processingTime: number\r\n    modelDecisions: number\r\n    confidence: number\r\n    verificationPassed: boolean\r\n  }\r\n}\r\n\r\n/**\r\n * Agente Tongyi 30B con ciclo ReAct (Pensamiento-Acci√≥n-Observaci√≥n)\r\n * Implementa verificaci√≥n continua y toma de decisiones aut√≥noma\r\n */\r\nexport class TongyiReActAgent {\r\n  private client: OpenAI\r\n  private memoryManager: ChatMemoryManager\r\n  private antiHallucinationSystem: any\r\n  private modelName: string = 'alibaba/tongyi-deepresearch-30b-a3b'\r\n\r\n  constructor(apiKey: string) {\r\n    this.client = new OpenAI({\r\n      apiKey,\r\n      baseURL: \"https://openrouter.ai/api/v1\"\r\n    })\r\n    this.memoryManager = ChatMemoryManager.getInstance()\r\n    this.antiHallucinationSystem = createAntiHallucinationSystem(apiKey)\r\n  }\r\n\r\n  /**\r\n   * Procesa una consulta usando el ciclo ReAct\r\n   */\r\n  async processQueryWithReAct(\r\n    userQuery: string,\r\n    chatId: string,\r\n    userId: string,\r\n    options?: {\r\n      maxSearchRounds?: number\r\n      enableAnalysis?: boolean\r\n      enableRecommendations?: boolean\r\n      preferredDetailLevel?: 'brief' | 'detailed' | 'comprehensive'\r\n    }\r\n  ): Promise<ReActResponse> {\r\n    const startTime = Date.now()\r\n    \r\n    console.log(`\\nüß† TONGYI REACT AGENT - CICLO PENSAMIENTO-ACCI√ìN-OBSERVACI√ìN`)\r\n    console.log(`üìù Query: \"${userQuery}\"`)\r\n    console.log(`üí¨ Chat ID: ${chatId}`)\r\n    console.log(`üë§ User ID: ${userId}`)\r\n    console.log(`${'='.repeat(80)}`)\r\n\r\n    const reactSteps: ReActStep[] = []\r\n    let currentStep = 1\r\n    let searchResults: EnhancedSearchResult[] = []\r\n    let verificationPassed = false\r\n    let finalResponse = \"\"\r\n\r\n    try {\r\n      // PASO 1: PENSAMIENTO INICIAL\r\n      console.log(`\\nüß† PASO ${currentStep}: PENSAMIENTO INICIAL`)\r\n      const initialThought = await this.generateThought(userQuery, [], \"initial\")\r\n      \r\n      reactSteps.push({\r\n        step: currentStep,\r\n        thought: initialThought,\r\n        action: 'analyze',\r\n        observation: 'Analizando la consulta del usuario',\r\n        confidence: 0.7\r\n      })\r\n      \r\n      console.log(`üí≠ Pensamiento: ${initialThought}`)\r\n      currentStep++\r\n\r\n      // PASO 2: AN√ÅLISIS Y PLANIFICACI√ìN\r\n      console.log(`\\nüîç PASO ${currentStep}: AN√ÅLISIS Y PLANIFICACI√ìN`)\r\n      const analysisResult = await this.analyzeQuery(userQuery, reactSteps)\r\n      \r\n      reactSteps.push({\r\n        step: currentStep,\r\n        thought: analysisResult.thought,\r\n        action: 'search',\r\n        observation: analysisResult.observation,\r\n        confidence: analysisResult.confidence,\r\n        nextAction: 'search'\r\n      })\r\n      \r\n      console.log(`üìä An√°lisis: ${analysisResult.thought}`)\r\n      currentStep++\r\n\r\n      // PASO 3: B√öSQUEDAS ITERATIVAS CON OBSERVACI√ìN\r\n      if (analysisResult.needsSearch) {\r\n        console.log(`\\nüîç PASO ${currentStep}: B√öSQUEDAS ITERATIVAS`)\r\n        \r\n        const maxRounds = options?.maxSearchRounds || 6\r\n        let searchRound = 0\r\n        \r\n        while (searchRound < maxRounds && !verificationPassed) {\r\n          searchRound++\r\n          console.log(`\\nüîç RONDA ${searchRound} DE B√öSQUEDA`)\r\n          \r\n          // Ejecutar b√∫squeda\r\n          const roundResults = await executeEnhancedSearch(userQuery, {\r\n            maxResults: 8,\r\n            includeOfficialSources: true,\r\n            includeAcademicSources: true,\r\n            includeGeneralSources: true,\r\n            prioritizeFreshness: true\r\n          })\r\n          \r\n          searchResults.push(...roundResults)\r\n          \r\n          // Observar resultados\r\n          const searchObservation = await this.observeSearchResults(roundResults, searchResults, userQuery)\r\n          \r\n          reactSteps.push({\r\n            step: currentStep,\r\n            thought: `B√∫squeda ronda ${searchRound}: ${roundResults.length} resultados`,\r\n            action: 'search',\r\n            observation: searchObservation,\r\n            confidence: this.calculateSearchConfidence(roundResults),\r\n            nextAction: searchRound < 3 ? 'search' : 'verify'\r\n          })\r\n          \r\n          console.log(`üëÅÔ∏è Observaci√≥n: ${searchObservation}`)\r\n          currentStep++\r\n          \r\n          // Verificar si tenemos suficiente informaci√≥n\r\n          if (searchRound >= 3) {\r\n            const sufficiencyCheck = await this.checkInformationSufficiency(searchResults, userQuery)\r\n            if (sufficiencyCheck.sufficient) {\r\n              console.log(`‚úÖ Informaci√≥n suficiente encontrada`)\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // PASO 4: VERIFICACI√ìN DE INFORMACI√ìN\r\n      console.log(`\\nüõ°Ô∏è PASO ${currentStep}: VERIFICACI√ìN DE INFORMACI√ìN`)\r\n      const verificationResult = await this.verifyInformation(searchResults, userQuery)\r\n      \r\n      reactSteps.push({\r\n        step: currentStep,\r\n        thought: verificationResult.thought,\r\n        action: 'verify',\r\n        observation: verificationResult.observation,\r\n        confidence: verificationResult.confidence\r\n      })\r\n      \r\n      verificationPassed = verificationResult.passed\r\n      console.log(`üîç Verificaci√≥n: ${verificationResult.observation}`)\r\n      currentStep++\r\n\r\n      // PASO 5: S√çNTESIS Y GENERACI√ìN DE RESPUESTA\r\n      console.log(`\\nüìù PASO ${currentStep}: S√çNTESIS Y GENERACI√ìN`)\r\n      const synthesisResult = await this.synthesizeResponse(userQuery, searchResults, reactSteps, verificationResult)\r\n      \r\n      reactSteps.push({\r\n        step: currentStep,\r\n        thought: synthesisResult.thought,\r\n        action: 'synthesize',\r\n        observation: synthesisResult.observation,\r\n        confidence: synthesisResult.confidence\r\n      })\r\n      \r\n      finalResponse = synthesisResult.content\r\n      console.log(`üìÑ S√≠ntesis: ${synthesisResult.observation}`)\r\n      currentStep++\r\n\r\n      // PASO 6: VERIFICACI√ìN FINAL DE LA RESPUESTA\r\n      console.log(`\\nüîç PASO ${currentStep}: VERIFICACI√ìN FINAL`)\r\n      const finalVerification = await this.finalVerification(finalResponse, searchResults, userQuery)\r\n      \r\n      reactSteps.push({\r\n        step: currentStep,\r\n        thought: finalVerification.thought,\r\n        action: 'verify',\r\n        observation: finalVerification.observation,\r\n        confidence: finalVerification.confidence\r\n      })\r\n      \r\n      // Si la verificaci√≥n final falla, regenerar respuesta\r\n      if (!finalVerification.passed) {\r\n        console.log(`üîÑ Regenerando respuesta con correcciones`)\r\n        finalResponse = await this.regenerateWithCorrections(finalResponse, finalVerification, searchResults, userQuery)\r\n      }\r\n      \r\n      console.log(`‚úÖ Verificaci√≥n final: ${finalVerification.observation}`)\r\n\r\n      const processingTime = Date.now() - startTime\r\n\r\n      console.log(`\\nüéØ CICLO REACT COMPLETADO`)\r\n      console.log(`üìä Resumen:`)\r\n      console.log(`   üß† Pasos de pensamiento: ${reactSteps.length}`)\r\n      console.log(`   üîç Rondas de b√∫squeda: ${searchResults.length > 0 ? Math.ceil(searchResults.length / 8) : 0}`)\r\n      console.log(`   üìÑ Fuentes encontradas: ${searchResults.length}`)\r\n      console.log(`   üõ°Ô∏è Verificaci√≥n: ${verificationPassed ? '‚úÖ' : '‚ùå'}`)\r\n      console.log(`   ‚è±Ô∏è Tiempo de procesamiento: ${(processingTime / 1000).toFixed(1)}s`)\r\n      console.log(`${'='.repeat(80)}`)\r\n\r\n      return {\r\n        content: finalResponse,\r\n        sources: searchResults.map(result => ({\r\n          title: result.title,\r\n          url: result.url,\r\n          type: result.metadata.searchEngine,\r\n          quality: result.quality,\r\n          relevance: result.relevance\r\n        })),\r\n        analysis: this.calculateResponseAnalysis(searchResults, finalResponse),\r\n        recommendations: await this.generateRecommendations(userQuery, searchResults),\r\n        warnings: await this.generateEnhancedWarnings(userQuery, searchResults, finalVerification),\r\n        reactSteps,\r\n        metadata: {\r\n          searchRounds: Math.ceil(searchResults.length / 8),\r\n          totalSources: searchResults.length,\r\n          processingTime,\r\n          modelDecisions: reactSteps.length,\r\n          confidence: finalVerification.confidence,\r\n          verificationPassed: finalVerification.passed\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Error en ciclo ReAct:', error)\r\n      \r\n      return {\r\n        content: `Disculpe, hubo un error procesando su consulta. Por favor, intente reformular su pregunta de manera m√°s espec√≠fica.`,\r\n        sources: [],\r\n        reactSteps,\r\n        metadata: {\r\n          searchRounds: 0,\r\n          totalSources: 0,\r\n          processingTime: Date.now() - startTime,\r\n          modelDecisions: reactSteps.length,\r\n          confidence: 0.3,\r\n          verificationPassed: false\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Genera un pensamiento sobre la consulta\r\n   */\r\n  private async generateThought(query: string, context: ReActStep[], phase: string): Promise<string> {\r\n    const thoughtPrompt = `\r\nEres un asistente legal experto en derecho colombiano. Genera un pensamiento sobre la consulta del usuario.\r\n\r\nCONSULTA: \"${query}\"\r\nFASE: ${phase}\r\nCONTEXTO: ${context.length > 0 ? context.map(c => c.thought).join('; ') : 'Ninguno'}\r\n\r\nGenera un pensamiento claro y espec√≠fico sobre:\r\n1. Qu√© tipo de consulta legal es\r\n2. Qu√© informaci√≥n necesitas encontrar\r\n3. Qu√© fuentes ser√≠an m√°s relevantes\r\n4. Qu√© nivel de detalle requiere\r\n\r\nResponde en m√°ximo 2 oraciones:\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: thoughtPrompt\r\n          }\r\n        ],\r\n        temperature: 0.3,\r\n        max_tokens: 200\r\n      })\r\n\r\n      return response.choices[0]?.message?.content || 'Analizando consulta legal...'\r\n    } catch (error) {\r\n      return 'Analizando consulta legal...'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Analiza la consulta y determina la estrategia\r\n   */\r\n  private async analyzeQuery(query: string, context: ReActStep[]): Promise<{\r\n    thought: string\r\n    observation: string\r\n    confidence: number\r\n    needsSearch: boolean\r\n  }> {\r\n    const analysisPrompt = `\r\nEres un asistente legal experto. Analiza la consulta y determina la estrategia de investigaci√≥n.\r\n\r\nCONSULTA: \"${query}\"\r\nCONTEXTO: ${context.map(c => c.thought).join('; ')}\r\n\r\nAnaliza:\r\n1. ¬øEs una consulta que requiere b√∫squeda web?\r\n2. ¬øQu√© tipo de fuentes necesitas? (oficiales, acad√©micas, generales)\r\n3. ¬øCu√°l es el nivel de complejidad?\r\n4. ¬øQu√© informaci√≥n espec√≠fica necesitas encontrar?\r\n\r\nResponde en formato JSON:\r\n{\r\n  \"thought\": \"Pensamiento sobre la consulta\",\r\n  \"observation\": \"Observaci√≥n sobre lo que necesitas\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"needsSearch\": true/false,\r\n  \"searchStrategy\": \"estrategia de b√∫squeda\"\r\n}\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: analysisPrompt\r\n          }\r\n        ],\r\n        temperature: 0.2,\r\n        max_tokens: 300\r\n      })\r\n\r\n      const content = response.choices[0]?.message?.content || '{}'\r\n      const result = JSON.parse(content)\r\n\r\n      return {\r\n        thought: result.thought || 'Analizando consulta...',\r\n        observation: result.observation || 'Determinando estrategia...',\r\n        confidence: result.confidence || 0.7,\r\n        needsSearch: result.needsSearch !== false\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        thought: 'Analizando consulta legal...',\r\n        observation: 'Determinando estrategia de investigaci√≥n...',\r\n        confidence: 0.7,\r\n        needsSearch: true\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Observa los resultados de b√∫squeda\r\n   */\r\n  private async observeSearchResults(\r\n    roundResults: EnhancedSearchResult[],\r\n    allResults: EnhancedSearchResult[],\r\n    query: string\r\n  ): Promise<string> {\r\n    const observationPrompt = `\r\nEres un asistente legal experto. Observa los resultados de b√∫squeda.\r\n\r\nCONSULTA: \"${query}\"\r\nRESULTADOS DE ESTA RONDA: ${roundResults.length}\r\nTOTAL RESULTADOS: ${allResults.length}\r\n\r\nObserva:\r\n1. ¬øLa calidad de los resultados?\r\n2. ¬øLa relevancia para la consulta?\r\n3. ¬øLa autoridad de las fuentes?\r\n4. ¬øNecesitas m√°s informaci√≥n?\r\n\r\nResponde en m√°ximo 2 oraciones:\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: observationPrompt\r\n          }\r\n        ],\r\n        temperature: 0.2,\r\n        max_tokens: 150\r\n      })\r\n\r\n      return response.choices[0]?.message?.content || 'Observando resultados de b√∫squeda...'\r\n    } catch (error) {\r\n      return 'Observando resultados de b√∫squeda...'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verifica la informaci√≥n encontrada\r\n   */\r\n  private async verifyInformation(\r\n    results: EnhancedSearchResult[],\r\n    query: string\r\n  ): Promise<{\r\n    thought: string\r\n    observation: string\r\n    confidence: number\r\n    passed: boolean\r\n  }> {\r\n    console.log(`üîç Verificando ${results.length} fuentes`)\r\n\r\n    const verificationPrompt = `\r\nEres un verificador de hechos especializado en derecho colombiano.\r\n\r\nCONSULTA: \"${query}\"\r\nFUENTES ENCONTRADAS: ${results.length}\r\n\r\nVerifica:\r\n1. ¬øLa informaci√≥n es suficiente para responder?\r\n2. ¬øLas fuentes son confiables y autorizadas?\r\n3. ¬øLa informaci√≥n est√° actualizada?\r\n4. ¬øHay consistencia entre las fuentes?\r\n\r\nResponde en formato JSON:\r\n{\r\n  \"thought\": \"Pensamiento sobre la verificaci√≥n\",\r\n  \"observation\": \"Observaci√≥n sobre la calidad de la informaci√≥n\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"passed\": true/false,\r\n  \"issues\": [\"problema1\", \"problema2\"]\r\n}\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: verificationPrompt\r\n          }\r\n        ],\r\n        temperature: 0.1,\r\n        max_tokens: 300\r\n      })\r\n\r\n      const content = response.choices[0]?.message?.content || '{}'\r\n      const result = JSON.parse(content)\r\n\r\n      return {\r\n        thought: result.thought || 'Verificando informaci√≥n...',\r\n        observation: result.observation || 'Evaluando calidad de fuentes...',\r\n        confidence: result.confidence || 0.7,\r\n        passed: result.passed !== false\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        thought: 'Verificando informaci√≥n encontrada...',\r\n        observation: 'Evaluando calidad y suficiencia de fuentes...',\r\n        confidence: 0.6,\r\n        passed: results.length >= 3\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sintetiza la respuesta bas√°ndose en la informaci√≥n verificada\r\n   */\r\n  private async synthesizeResponse(\r\n    query: string,\r\n    results: EnhancedSearchResult[],\r\n    context: ReActStep[],\r\n    verification: any\r\n  ): Promise<{\r\n    thought: string\r\n    observation: string\r\n    confidence: number\r\n    content: string\r\n  }> {\r\n    console.log(`üìù Sintetizando respuesta con ${results.length} fuentes`)\r\n\r\n    const synthesisPrompt = `\r\nEres un asistente legal experto en derecho colombiano. Sintetiza una respuesta precisa bas√°ndote en la informaci√≥n verificada.\r\n\r\nCONSULTA: \"${query}\"\r\nFUENTES VERIFICADAS: ${results.length}\r\nCONTEXTO DEL PROCESO: ${context.map(c => c.thought).join('; ')}\r\n\r\nINFORMACI√ìN DISPONIBLE:\r\n${results.map((result, index) => `\r\n${index + 1}. ${result.title}\r\n   URL: ${result.url}\r\n   Calidad: ${result.quality}/10\r\n   Autoridad: ${result.authority}/10\r\n   Contenido: ${result.content.substring(0, 300)}...\r\n`).join('\\n')}\r\n\r\nINSTRUCCIONES:\r\n1. Responde √öNICAMENTE con informaci√≥n respaldada por las fuentes\r\n2. Usa lenguaje conservador y preciso\r\n3. Incluye referencias espec√≠ficas cuando sea posible\r\n4. Si hay informaci√≥n insuficiente, ind√≠calo claramente\r\n5. Termina con advertencias sobre consulta profesional\r\n\r\nGenera la respuesta sintetizada:\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: synthesisPrompt\r\n          }\r\n        ],\r\n        temperature: 0.2,\r\n        max_tokens: 3000\r\n      })\r\n\r\n      const content = response.choices[0]?.message?.content || 'No se pudo generar respuesta'\r\n\r\n      return {\r\n        thought: 'Sintetizando informaci√≥n verificada...',\r\n        observation: `Respuesta generada con ${results.length} fuentes verificadas`,\r\n        confidence: verification.confidence,\r\n        content\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        thought: 'Sintetizando informaci√≥n...',\r\n        observation: 'Generando respuesta basada en fuentes verificadas',\r\n        confidence: 0.6,\r\n        content: 'Disculpe, hubo un error generando la respuesta.'\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verificaci√≥n final de la respuesta\r\n   */\r\n  private async finalVerification(\r\n    response: string,\r\n    sources: EnhancedSearchResult[],\r\n    query: string\r\n  ): Promise<{\r\n    thought: string\r\n    observation: string\r\n    confidence: number\r\n    passed: boolean\r\n  }> {\r\n    console.log(`üîç Verificaci√≥n final de la respuesta`)\r\n\r\n    const finalVerificationPrompt = `\r\nEres un verificador de hechos especializado en derecho colombiano. Verifica la respuesta final.\r\n\r\nCONSULTA: \"${query}\"\r\nRESPUESTA: \"${response}\"\r\nFUENTES: ${sources.length}\r\n\r\nVerifica:\r\n1. ¬øLa respuesta es precisa y est√° respaldada por las fuentes?\r\n2. ¬øHay informaci√≥n inventada o especulativa?\r\n3. ¬øLas referencias legales son correctas?\r\n4. ¬øEl lenguaje es apropiado y conservador?\r\n\r\nResponde en formato JSON:\r\n{\r\n  \"thought\": \"Pensamiento sobre la verificaci√≥n final\",\r\n  \"observation\": \"Observaci√≥n sobre la calidad de la respuesta\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"passed\": true/false,\r\n  \"issues\": [\"problema1\", \"problema2\"]\r\n}\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: finalVerificationPrompt\r\n          }\r\n        ],\r\n        temperature: 0.1,\r\n        max_tokens: 300\r\n      })\r\n\r\n      const content = response.choices[0]?.message?.content || '{}'\r\n      const result = JSON.parse(content)\r\n\r\n      return {\r\n        thought: result.thought || 'Verificando respuesta final...',\r\n        observation: result.observation || 'Evaluando precisi√≥n y calidad...',\r\n        confidence: result.confidence || 0.7,\r\n        passed: result.passed !== false\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        thought: 'Verificando respuesta final...',\r\n        observation: 'Evaluando precisi√≥n y calidad de la respuesta',\r\n        confidence: 0.6,\r\n        passed: true\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Regenera la respuesta con correcciones\r\n   */\r\n  private async regenerateWithCorrections(\r\n    originalResponse: string,\r\n    verification: any,\r\n    sources: EnhancedSearchResult[],\r\n    query: string\r\n  ): Promise<string> {\r\n    console.log(`üîÑ Regenerando respuesta con correcciones`)\r\n\r\n    const correctionPrompt = `\r\nEres un asistente legal experto. Corrige la respuesta eliminando problemas identificados.\r\n\r\nCONSULTA: \"${query}\"\r\nRESPUESTA ORIGINAL: \"${originalResponse}\"\r\nPROBLEMAS IDENTIFICADOS: ${verification.issues?.join(', ') || 'Ninguno espec√≠fico'}\r\n\r\nFUENTES DISPONIBLES:\r\n${sources.map((source, index) => `\r\n${index + 1}. ${source.title}\r\n   Contenido: ${source.content.substring(0, 300)}...\r\n`).join('\\n')}\r\n\r\nINSTRUCCIONES:\r\n1. Elimina informaci√≥n no respaldada por las fuentes\r\n2. Corrige referencias legales incorrectas\r\n3. Usa lenguaje conservador\r\n4. Incluye advertencias sobre limitaciones\r\n5. Recomienda consulta profesional\r\n\r\nGenera la respuesta corregida:\r\n`\r\n\r\n    try {\r\n      const response = await this.client.chat.completions.create({\r\n        model: this.modelName,\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: correctionPrompt\r\n          }\r\n        ],\r\n        temperature: 0.2,\r\n        max_tokens: 3000\r\n      })\r\n\r\n      return response.choices[0]?.message?.content || originalResponse\r\n    } catch (error) {\r\n      return originalResponse + '\\n\\n‚ö†Ô∏è ADVERTENCIA: Esta respuesta puede contener informaci√≥n no verificada. Consulte fuentes oficiales.'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verifica si la informaci√≥n es suficiente\r\n   */\r\n  private async checkInformationSufficiency(\r\n    results: EnhancedSearchResult[],\r\n    query: string\r\n  ): Promise<{ sufficient: boolean; reason: string }> {\r\n    if (results.length < 3) {\r\n      return { sufficient: false, reason: 'Pocas fuentes encontradas' }\r\n    }\r\n\r\n    const officialSources = results.filter(r => r.metadata.domain.includes('.gov.co')).length\r\n    if (officialSources === 0) {\r\n      return { sufficient: false, reason: 'No se encontraron fuentes oficiales' }\r\n    }\r\n\r\n    const avgQuality = results.reduce((sum, r) => sum + r.quality, 0) / results.length\r\n    if (avgQuality < 6) {\r\n      return { sufficient: false, reason: 'Calidad promedio baja' }\r\n    }\r\n\r\n    return { sufficient: true, reason: 'Informaci√≥n suficiente encontrada' }\r\n  }\r\n\r\n  /**\r\n   * Calcula la confianza de los resultados de b√∫squeda\r\n   */\r\n  private calculateSearchConfidence(results: EnhancedSearchResult[]): number {\r\n    if (results.length === 0) return 0.2\r\n    \r\n    const avgQuality = results.reduce((sum, r) => sum + r.quality, 0) / results.length\r\n    const avgRelevance = results.reduce((sum, r) => sum + r.relevance, 0) / results.length\r\n    const avgAuthority = results.reduce((sum, r) => sum + r.authority, 0) / results.length\r\n    \r\n    return (avgQuality + avgRelevance + avgAuthority) / 30 // Normalizar a 0-1\r\n  }\r\n\r\n  /**\r\n   * Calcula an√°lisis de la respuesta\r\n   */\r\n  private calculateResponseAnalysis(results: EnhancedSearchResult[], content: string): ReActResponse['analysis'] {\r\n    const completeness = Math.min(10, results.length * 0.4 + (content.length > 1000 ? 3 : 0))\r\n    const accuracy = results.length > 0 ? results.reduce((sum, r) => sum + r.quality, 0) / results.length : 5\r\n    const relevance = results.length > 0 ? results.reduce((sum, r) => sum + r.relevance, 0) / results.length : 5\r\n    const authority = results.length > 0 ? results.reduce((sum, r) => sum + r.authority, 0) / results.length : 5\r\n    const overall = (completeness + accuracy + relevance + authority) / 4\r\n\r\n    return {\r\n      completeness,\r\n      accuracy,\r\n      relevance,\r\n      authority,\r\n      overall\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Genera recomendaciones\r\n   */\r\n  private async generateRecommendations(query: string, results: EnhancedSearchResult[]): Promise<string[]> {\r\n    const recommendations: string[] = []\r\n    \r\n    if (results.some(r => r.metadata.domain.includes('.gov.co'))) {\r\n      recommendations.push('Consulte las fuentes oficiales para informaci√≥n actualizada')\r\n    }\r\n    \r\n    if (results.some(r => r.metadata.domain.includes('.edu.co'))) {\r\n      recommendations.push('Revise la jurisprudencia y doctrina acad√©mica para an√°lisis profundos')\r\n    }\r\n    \r\n    if (results.length > 10) {\r\n      recommendations.push('Considere consultar con un abogado especializado para casos espec√≠ficos')\r\n    }\r\n\r\n    return recommendations\r\n  }\r\n\r\n  /**\r\n   * Genera advertencias mejoradas\r\n   */\r\n  private async generateEnhancedWarnings(\r\n    userQuery: string,\r\n    results: EnhancedSearchResult[],\r\n    verification: any\r\n  ): Promise<string[]> {\r\n    const warnings: string[] = []\r\n    \r\n    if (!verification.passed) {\r\n      warnings.push('‚ö†Ô∏è Esta respuesta ha sido verificada y puede contener informaci√≥n no completamente precisa')\r\n    }\r\n    \r\n    if (verification.confidence < 0.8) {\r\n      warnings.push('‚ö†Ô∏è Nivel de confianza bajo - consulte fuentes oficiales para confirmar')\r\n    }\r\n    \r\n    if (results.length < 5) {\r\n      warnings.push('‚ö†Ô∏è Informaci√≥n limitada encontrada - consulte fuentes adicionales')\r\n    }\r\n    \r\n    if (results.some(r => r.freshness < 5)) {\r\n      warnings.push('‚ö†Ô∏è Algunas fuentes pueden estar desactualizadas - verifique la vigencia')\r\n    }\r\n    \r\n    warnings.push('‚ö†Ô∏è Esta informaci√≥n es de car√°cter general - consulte con un abogado especializado para casos espec√≠ficos')\r\n    \r\n    return warnings\r\n  }\r\n}\r\n\r\n/**\r\n * Instancia singleton del agente ReAct\r\n */\r\nexport function createTongyiReActAgent(apiKey: string): TongyiReActAgent {\r\n  return new TongyiReActAgent(apiKey)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}