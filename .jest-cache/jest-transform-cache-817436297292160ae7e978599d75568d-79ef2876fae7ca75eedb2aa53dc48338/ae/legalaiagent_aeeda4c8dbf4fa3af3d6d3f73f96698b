0752c90d17b2403292324a25dc212ad1
"use strict";

/* istanbul ignore next */
function cov_k5221buk5() {
  var path = "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\legal-ai-agent.ts";
  var hash = "05d074be946d26c1bf22a440df2dd4311c6522e1";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\legal-ai-agent.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 2,
          column: 62
        }
      },
      "1": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 3,
          column: 30
        }
      },
      "2": {
        start: {
          line: 4,
          column: 30
        },
        end: {
          line: 4,
          column: 73
        }
      },
      "3": {
        start: {
          line: 5,
          column: 38
        },
        end: {
          line: 5,
          column: 88
        }
      },
      "4": {
        start: {
          line: 6,
          column: 36
        },
        end: {
          line: 6,
          column: 84
        }
      },
      "5": {
        start: {
          line: 7,
          column: 31
        },
        end: {
          line: 7,
          column: 74
        }
      },
      "6": {
        start: {
          line: 15,
          column: 8
        },
        end: {
          line: 15,
          column: 31
        }
      },
      "7": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 83
        }
      },
      "8": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 57
        }
      },
      "9": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 48
        }
      },
      "10": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 58
        }
      },
      "11": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 58
        }
      },
      "12": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 93
        }
      },
      "13": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 110
        }
      },
      "14": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 41
        }
      },
      "15": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 83,
          column: 9
        }
      },
      "16": {
        start: {
          line: 31,
          column: 30
        },
        end: {
          line: 31,
          column: 34
        }
      },
      "17": {
        start: {
          line: 32,
          column: 12
        },
        end: {
          line: 35,
          column: 13
        }
      },
      "18": {
        start: {
          line: 33,
          column: 16
        },
        end: {
          line: 33,
          column: 112
        }
      },
      "19": {
        start: {
          line: 34,
          column: 16
        },
        end: {
          line: 34,
          column: 103
        }
      },
      "20": {
        start: {
          line: 37,
          column: 29
        },
        end: {
          line: 37,
          column: 83
        }
      },
      "21": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 38,
          column: 115
        }
      },
      "22": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 39,
          column: 66
        }
      },
      "23": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 57,
          column: 13
        }
      },
      "24": {
        start: {
          line: 44,
          column: 20
        },
        end: {
          line: 44,
          column: 96
        }
      },
      "25": {
        start: {
          line: 45,
          column: 20
        },
        end: {
          line: 45,
          column: 26
        }
      },
      "26": {
        start: {
          line: 47,
          column: 20
        },
        end: {
          line: 47,
          column: 87
        }
      },
      "27": {
        start: {
          line: 48,
          column: 20
        },
        end: {
          line: 48,
          column: 26
        }
      },
      "28": {
        start: {
          line: 50,
          column: 20
        },
        end: {
          line: 50,
          column: 87
        }
      },
      "29": {
        start: {
          line: 51,
          column: 20
        },
        end: {
          line: 51,
          column: 26
        }
      },
      "30": {
        start: {
          line: 53,
          column: 20
        },
        end: {
          line: 53,
          column: 88
        }
      },
      "31": {
        start: {
          line: 54,
          column: 20
        },
        end: {
          line: 54,
          column: 26
        }
      },
      "32": {
        start: {
          line: 56,
          column: 20
        },
        end: {
          line: 56,
          column: 87
        }
      },
      "33": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 61,
          column: 13
        }
      },
      "34": {
        start: {
          line: 60,
          column: 16
        },
        end: {
          line: 60,
          column: 156
        }
      },
      "35": {
        start: {
          line: 62,
          column: 12
        },
        end: {
          line: 62,
          column: 87
        }
      },
      "36": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 63,
          column: 28
        }
      },
      "37": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 66,
          column: 57
        }
      },
      "38": {
        start: {
          line: 68,
          column: 34
        },
        end: {
          line: 78,
          column: 13
        }
      },
      "39": {
        start: {
          line: 79,
          column: 12
        },
        end: {
          line: 81,
          column: 13
        }
      },
      "40": {
        start: {
          line: 80,
          column: 16
        },
        end: {
          line: 80,
          column: 166
        }
      },
      "41": {
        start: {
          line: 82,
          column: 12
        },
        end: {
          line: 82,
          column: 33
        }
      },
      "42": {
        start: {
          line: 89,
          column: 8
        },
        end: {
          line: 165,
          column: 9
        }
      },
      "43": {
        start: {
          line: 90,
          column: 32
        },
        end: {
          line: 101,
          column: 26
        }
      },
      "44": {
        start: {
          line: 95,
          column: 47
        },
        end: {
          line: 95,
          column: 115
        }
      },
      "45": {
        start: {
          line: 102,
          column: 35
        },
        end: {
          line: 133,
          column: 2
        }
      },
      "46": {
        start: {
          line: 134,
          column: 29
        },
        end: {
          line: 143,
          column: 14
        }
      },
      "47": {
        start: {
          line: 144,
          column: 28
        },
        end: {
          line: 144,
          column: 75
        }
      },
      "48": {
        start: {
          line: 145,
          column: 29
        },
        end: {
          line: 145,
          column: 61
        }
      },
      "49": {
        start: {
          line: 147,
          column: 12
        },
        end: {
          line: 151,
          column: 13
        }
      },
      "50": {
        start: {
          line: 148,
          column: 16
        },
        end: {
          line: 148,
          column: 43
        }
      },
      "51": {
        start: {
          line: 149,
          column: 16
        },
        end: {
          line: 149,
          column: 42
        }
      },
      "52": {
        start: {
          line: 150,
          column: 16
        },
        end: {
          line: 150,
          column: 85
        }
      },
      "53": {
        start: {
          line: 152,
          column: 12
        },
        end: {
          line: 152,
          column: 28
        }
      },
      "54": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 155,
          column: 64
        }
      },
      "55": {
        start: {
          line: 157,
          column: 12
        },
        end: {
          line: 164,
          column: 14
        }
      },
      "56": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 171,
          column: 98
        }
      },
      "57": {
        start: {
          line: 172,
          column: 8
        },
        end: {
          line: 272,
          column: 9
        }
      },
      "58": {
        start: {
          line: 175,
          column: 12
        },
        end: {
          line: 255,
          column: 13
        }
      },
      "59": {
        start: {
          line: 177,
          column: 16
        },
        end: {
          line: 184,
          column: 19
        }
      },
      "60": {
        start: {
          line: 185,
          column: 16
        },
        end: {
          line: 199,
          column: 18
        }
      },
      "61": {
        start: {
          line: 193,
          column: 83
        },
        end: {
          line: 198,
          column: 21
        }
      },
      "62": {
        start: {
          line: 201,
          column: 16
        },
        end: {
          line: 203,
          column: 17
        }
      },
      "63": {
        start: {
          line: 202,
          column: 20
        },
        end: {
          line: 202,
          column: 183
        }
      },
      "64": {
        start: {
          line: 205,
          column: 33
        },
        end: {
          line: 205,
          column: 122
        }
      },
      "65": {
        start: {
          line: 206,
          column: 16
        },
        end: {
          line: 214,
          column: 18
        }
      },
      "66": {
        start: {
          line: 218,
          column: 35
        },
        end: {
          line: 223,
          column: 18
        }
      },
      "67": {
        start: {
          line: 224,
          column: 33
        },
        end: {
          line: 229,
          column: 18
        }
      },
      "68": {
        start: {
          line: 230,
          column: 16
        },
        end: {
          line: 243,
          column: 18
        }
      },
      "69": {
        start: {
          line: 237,
          column: 61
        },
        end: {
          line: 242,
          column: 21
        }
      },
      "70": {
        start: {
          line: 245,
          column: 33
        },
        end: {
          line: 245,
          column: 118
        }
      },
      "71": {
        start: {
          line: 246,
          column: 16
        },
        end: {
          line: 254,
          column: 18
        }
      },
      "72": {
        start: {
          line: 258,
          column: 12
        },
        end: {
          line: 258,
          column: 64
        }
      },
      "73": {
        start: {
          line: 260,
          column: 29
        },
        end: {
          line: 260,
          column: 151
        }
      },
      "74": {
        start: {
          line: 261,
          column: 12
        },
        end: {
          line: 271,
          column: 14
        }
      },
      "75": {
        start: {
          line: 278,
          column: 8
        },
        end: {
          line: 278,
          column: 65
        }
      },
      "76": {
        start: {
          line: 279,
          column: 25
        },
        end: {
          line: 279,
          column: 166
        }
      },
      "77": {
        start: {
          line: 280,
          column: 8
        },
        end: {
          line: 290,
          column: 10
        }
      },
      "78": {
        start: {
          line: 296,
          column: 8
        },
        end: {
          line: 296,
          column: 48
        }
      },
      "79": {
        start: {
          line: 297,
          column: 36
        },
        end: {
          line: 297,
          column: 176
        }
      },
      "80": {
        start: {
          line: 298,
          column: 25
        },
        end: {
          line: 307,
          column: 10
        }
      },
      "81": {
        start: {
          line: 308,
          column: 24
        },
        end: {
          line: 308,
          column: 112
        }
      },
      "82": {
        start: {
          line: 309,
          column: 8
        },
        end: {
          line: 319,
          column: 10
        }
      },
      "83": {
        start: {
          line: 325,
          column: 8
        },
        end: {
          line: 325,
          column: 60
        }
      },
      "84": {
        start: {
          line: 326,
          column: 31
        },
        end: {
          line: 326,
          column: 184
        }
      },
      "85": {
        start: {
          line: 327,
          column: 25
        },
        end: {
          line: 336,
          column: 10
        }
      },
      "86": {
        start: {
          line: 337,
          column: 24
        },
        end: {
          line: 337,
          column: 130
        }
      },
      "87": {
        start: {
          line: 338,
          column: 8
        },
        end: {
          line: 348,
          column: 10
        }
      },
      "88": {
        start: {
          line: 354,
          column: 29
        },
        end: {
          line: 367,
          column: 34
        }
      },
      "89": {
        start: {
          line: 368,
          column: 25
        },
        end: {
          line: 377,
          column: 10
        }
      },
      "90": {
        start: {
          line: 378,
          column: 8
        },
        end: {
          line: 378,
          column: 100
        }
      },
      "91": {
        start: {
          line: 384,
          column: 8
        },
        end: {
          line: 406,
          column: 9
        }
      },
      "92": {
        start: {
          line: 385,
          column: 29
        },
        end: {
          line: 385,
          column: 54
        }
      },
      "93": {
        start: {
          line: 386,
          column: 27
        },
        end: {
          line: 386,
          column: 47
        }
      },
      "94": {
        start: {
          line: 387,
          column: 12
        },
        end: {
          line: 394,
          column: 14
        }
      },
      "95": {
        start: {
          line: 397,
          column: 12
        },
        end: {
          line: 397,
          column: 73
        }
      },
      "96": {
        start: {
          line: 398,
          column: 12
        },
        end: {
          line: 405,
          column: 14
        }
      },
      "97": {
        start: {
          line: 412,
          column: 22
        },
        end: {
          line: 412,
          column: 42
        }
      },
      "98": {
        start: {
          line: 413,
          column: 20
        },
        end: {
          line: 413,
          column: 44
        }
      },
      "99": {
        start: {
          line: 414,
          column: 8
        },
        end: {
          line: 416,
          column: 9
        }
      },
      "100": {
        start: {
          line: 415,
          column: 12
        },
        end: {
          line: 415,
          column: 66
        }
      },
      "101": {
        start: {
          line: 417,
          column: 8
        },
        end: {
          line: 417,
          column: 45
        }
      },
      "102": {
        start: {
          line: 423,
          column: 26
        },
        end: {
          line: 423,
          column: 107
        }
      },
      "103": {
        start: {
          line: 424,
          column: 8
        },
        end: {
          line: 429,
          column: 10
        }
      },
      "104": {
        start: {
          line: 432,
          column: 0
        },
        end: {
          line: 432,
          column: 36
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        },
        loc: {
          start: {
            line: 14,
            column: 25
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 14
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        loc: {
          start: {
            line: 21,
            column: 45
          },
          end: {
            line: 84,
            column: 5
          }
        },
        line: 21
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 88,
            column: 4
          },
          end: {
            line: 88,
            column: 5
          }
        },
        loc: {
          start: {
            line: 88,
            column: 54
          },
          end: {
            line: 166,
            column: 5
          }
        },
        line: 88
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 95,
            column: 42
          },
          end: {
            line: 95,
            column: 43
          }
        },
        loc: {
          start: {
            line: 95,
            column: 47
          },
          end: {
            line: 95,
            column: 115
          }
        },
        line: 95
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 170,
            column: 5
          }
        },
        loc: {
          start: {
            line: 170,
            column: 64
          },
          end: {
            line: 273,
            column: 5
          }
        },
        line: 170
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 193,
            column: 70
          },
          end: {
            line: 193,
            column: 71
          }
        },
        loc: {
          start: {
            line: 193,
            column: 83
          },
          end: {
            line: 198,
            column: 21
          }
        },
        line: 193
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 237,
            column: 50
          },
          end: {
            line: 237,
            column: 51
          }
        },
        loc: {
          start: {
            line: 237,
            column: 61
          },
          end: {
            line: 242,
            column: 21
          }
        },
        line: 237
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 277,
            column: 4
          },
          end: {
            line: 277,
            column: 5
          }
        },
        loc: {
          start: {
            line: 277,
            column: 55
          },
          end: {
            line: 291,
            column: 5
          }
        },
        line: 277
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 295,
            column: 4
          },
          end: {
            line: 295,
            column: 5
          }
        },
        loc: {
          start: {
            line: 295,
            column: 55
          },
          end: {
            line: 320,
            column: 5
          }
        },
        line: 295
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 324,
            column: 4
          },
          end: {
            line: 324,
            column: 5
          }
        },
        loc: {
          start: {
            line: 324,
            column: 56
          },
          end: {
            line: 349,
            column: 5
          }
        },
        line: 324
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 353,
            column: 4
          },
          end: {
            line: 353,
            column: 5
          }
        },
        loc: {
          start: {
            line: 353,
            column: 77
          },
          end: {
            line: 379,
            column: 5
          }
        },
        line: 353
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 383,
            column: 4
          },
          end: {
            line: 383,
            column: 5
          }
        },
        loc: {
          start: {
            line: 383,
            column: 32
          },
          end: {
            line: 407,
            column: 5
          }
        },
        line: 383
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 411,
            column: 4
          },
          end: {
            line: 411,
            column: 5
          }
        },
        loc: {
          start: {
            line: 411,
            column: 25
          },
          end: {
            line: 418,
            column: 5
          }
        },
        line: 411
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 422,
            column: 4
          },
          end: {
            line: 422,
            column: 5
          }
        },
        loc: {
          start: {
            line: 422,
            column: 26
          },
          end: {
            line: 430,
            column: 5
          }
        },
        line: 422
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 26,
            column: 35
          },
          end: {
            line: 26,
            column: 89
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 26,
            column: 63
          },
          end: {
            line: 26,
            column: 73
          }
        }, {
          start: {
            line: 26,
            column: 76
          },
          end: {
            line: 26,
            column: 89
          }
        }],
        line: 26
      },
      "1": {
        loc: {
          start: {
            line: 27,
            column: 45
          },
          end: {
            line: 27,
            column: 106
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 27,
            column: 80
          },
          end: {
            line: 27,
            column: 90
          }
        }, {
          start: {
            line: 27,
            column: 93
          },
          end: {
            line: 27,
            column: 106
          }
        }],
        line: 27
      },
      "2": {
        loc: {
          start: {
            line: 32,
            column: 12
          },
          end: {
            line: 35,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 32,
            column: 12
          },
          end: {
            line: 35,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 32
      },
      "3": {
        loc: {
          start: {
            line: 42,
            column: 12
          },
          end: {
            line: 57,
            column: 13
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 43,
            column: 16
          },
          end: {
            line: 45,
            column: 26
          }
        }, {
          start: {
            line: 46,
            column: 16
          },
          end: {
            line: 48,
            column: 26
          }
        }, {
          start: {
            line: 49,
            column: 16
          },
          end: {
            line: 51,
            column: 26
          }
        }, {
          start: {
            line: 52,
            column: 16
          },
          end: {
            line: 54,
            column: 26
          }
        }, {
          start: {
            line: 55,
            column: 16
          },
          end: {
            line: 56,
            column: 87
          }
        }],
        line: 42
      },
      "4": {
        loc: {
          start: {
            line: 59,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 12
          },
          end: {
            line: 61,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 59
      },
      "5": {
        loc: {
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 81,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 79,
            column: 12
          },
          end: {
            line: 81,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 79
      },
      "6": {
        loc: {
          start: {
            line: 90,
            column: 32
          },
          end: {
            line: 101,
            column: 26
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 90,
            column: 46
          },
          end: {
            line: 101,
            column: 1
          }
        }, {
          start: {
            line: 101,
            column: 4
          },
          end: {
            line: 101,
            column: 26
          }
        }],
        line: 90
      },
      "7": {
        loc: {
          start: {
            line: 100,
            column: 25
          },
          end: {
            line: 100,
            column: 101
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 100,
            column: 75
          },
          end: {
            line: 100,
            column: 85
          }
        }, {
          start: {
            line: 100,
            column: 88
          },
          end: {
            line: 100,
            column: 101
          }
        }],
        line: 100
      },
      "8": {
        loc: {
          start: {
            line: 144,
            column: 28
          },
          end: {
            line: 144,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 144,
            column: 28
          },
          end: {
            line: 144,
            column: 67
          }
        }, {
          start: {
            line: 144,
            column: 71
          },
          end: {
            line: 144,
            column: 75
          }
        }],
        line: 144
      },
      "9": {
        loc: {
          start: {
            line: 147,
            column: 12
          },
          end: {
            line: 151,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 147,
            column: 12
          },
          end: {
            line: 151,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 147
      },
      "10": {
        loc: {
          start: {
            line: 147,
            column: 16
          },
          end: {
            line: 147,
            column: 108
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 147,
            column: 16
          },
          end: {
            line: 147,
            column: 32
          }
        }, {
          start: {
            line: 147,
            column: 36
          },
          end: {
            line: 147,
            column: 108
          }
        }],
        line: 147
      },
      "11": {
        loc: {
          start: {
            line: 175,
            column: 12
          },
          end: {
            line: 255,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 175,
            column: 12
          },
          end: {
            line: 255,
            column: 13
          }
        }, {
          start: {
            line: 216,
            column: 17
          },
          end: {
            line: 255,
            column: 13
          }
        }],
        line: 175
      },
      "12": {
        loc: {
          start: {
            line: 175,
            column: 16
          },
          end: {
            line: 175,
            column: 93
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 175,
            column: 16
          },
          end: {
            line: 175,
            column: 53
          }
        }, {
          start: {
            line: 175,
            column: 57
          },
          end: {
            line: 175,
            column: 93
          }
        }],
        line: 175
      },
      "13": {
        loc: {
          start: {
            line: 180,
            column: 37
          },
          end: {
            line: 180,
            column: 87
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 180,
            column: 37
          },
          end: {
            line: 180,
            column: 55
          }
        }, {
          start: {
            line: 180,
            column: 59
          },
          end: {
            line: 180,
            column: 87
          }
        }],
        line: 180
      },
      "14": {
        loc: {
          start: {
            line: 201,
            column: 16
          },
          end: {
            line: 203,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 201,
            column: 16
          },
          end: {
            line: 203,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 201
      },
      "15": {
        loc: {
          start: {
            line: 201,
            column: 20
          },
          end: {
            line: 201,
            column: 60
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 201,
            column: 20
          },
          end: {
            line: 201,
            column: 45
          }
        }, {
          start: {
            line: 201,
            column: 49
          },
          end: {
            line: 201,
            column: 60
          }
        }],
        line: 201
      },
      "16": {
        loc: {
          start: {
            line: 226,
            column: 42
          },
          end: {
            line: 226,
            column: 72
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 226,
            column: 42
          },
          end: {
            line: 226,
            column: 67
          }
        }, {
          start: {
            line: 226,
            column: 71
          },
          end: {
            line: 226,
            column: 72
          }
        }],
        line: 226
      },
      "17": {
        loc: {
          start: {
            line: 235,
            column: 34
          },
          end: {
            line: 235,
            column: 69
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 235,
            column: 64
          },
          end: {
            line: 235,
            column: 65
          }
        }, {
          start: {
            line: 235,
            column: 68
          },
          end: {
            line: 235,
            column: 69
          }
        }],
        line: 235
      },
      "18": {
        loc: {
          start: {
            line: 308,
            column: 24
          },
          end: {
            line: 308,
            column: 112
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 308,
            column: 24
          },
          end: {
            line: 308,
            column: 63
          }
        }, {
          start: {
            line: 308,
            column: 67
          },
          end: {
            line: 308,
            column: 112
          }
        }],
        line: 308
      },
      "19": {
        loc: {
          start: {
            line: 337,
            column: 24
          },
          end: {
            line: 337,
            column: 130
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 337,
            column: 24
          },
          end: {
            line: 337,
            column: 63
          }
        }, {
          start: {
            line: 337,
            column: 67
          },
          end: {
            line: 337,
            column: 130
          }
        }],
        line: 337
      },
      "20": {
        loc: {
          start: {
            line: 358,
            column: 2
          },
          end: {
            line: 359,
            column: 35
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 358,
            column: 16
          },
          end: {
            line: 359,
            column: 30
          }
        }, {
          start: {
            line: 359,
            column: 33
          },
          end: {
            line: 359,
            column: 35
          }
        }],
        line: 358
      },
      "21": {
        loc: {
          start: {
            line: 378,
            column: 15
          },
          end: {
            line: 378,
            column: 99
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 378,
            column: 15
          },
          end: {
            line: 378,
            column: 54
          }
        }, {
          start: {
            line: 378,
            column: 58
          },
          end: {
            line: 378,
            column: 99
          }
        }],
        line: 378
      },
      "22": {
        loc: {
          start: {
            line: 388,
            column: 24
          },
          end: {
            line: 388,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 388,
            column: 24
          },
          end: {
            line: 388,
            column: 37
          }
        }, {
          start: {
            line: 388,
            column: 41
          },
          end: {
            line: 388,
            column: 49
          }
        }],
        line: 388
      },
      "23": {
        loc: {
          start: {
            line: 389,
            column: 28
          },
          end: {
            line: 389,
            column: 52
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 389,
            column: 28
          },
          end: {
            line: 389,
            column: 45
          }
        }, {
          start: {
            line: 389,
            column: 49
          },
          end: {
            line: 389,
            column: 52
          }
        }],
        line: 389
      },
      "24": {
        loc: {
          start: {
            line: 390,
            column: 27
          },
          end: {
            line: 390,
            column: 79
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 390,
            column: 27
          },
          end: {
            line: 390,
            column: 43
          }
        }, {
          start: {
            line: 390,
            column: 47
          },
          end: {
            line: 390,
            column: 79
          }
        }],
        line: 390
      },
      "25": {
        loc: {
          start: {
            line: 391,
            column: 32
          },
          end: {
            line: 391,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 391,
            column: 32
          },
          end: {
            line: 391,
            column: 53
          }
        }, {
          start: {
            line: 391,
            column: 57
          },
          end: {
            line: 391,
            column: 66
          }
        }],
        line: 391
      },
      "26": {
        loc: {
          start: {
            line: 392,
            column: 31
          },
          end: {
            line: 392,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 392,
            column: 31
          },
          end: {
            line: 392,
            column: 51
          }
        }, {
          start: {
            line: 392,
            column: 55
          },
          end: {
            line: 392,
            column: 57
          }
        }],
        line: 392
      },
      "27": {
        loc: {
          start: {
            line: 393,
            column: 27
          },
          end: {
            line: 393,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 393,
            column: 27
          },
          end: {
            line: 393,
            column: 43
          }
        }, {
          start: {
            line: 393,
            column: 47
          },
          end: {
            line: 393,
            column: 75
          }
        }],
        line: 393
      },
      "28": {
        loc: {
          start: {
            line: 414,
            column: 8
          },
          end: {
            line: 416,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 414,
            column: 8
          },
          end: {
            line: 416,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 414
      },
      "29": {
        loc: {
          start: {
            line: 414,
            column: 12
          },
          end: {
            line: 414,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 414,
            column: 12
          },
          end: {
            line: 414,
            column: 24
          }
        }, {
          start: {
            line: 414,
            column: 28
          },
          end: {
            line: 414,
            column: 38
          }
        }, {
          start: {
            line: 414,
            column: 42
          },
          end: {
            line: 414,
            column: 54
          }
        }],
        line: 414
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0, 0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\legal-ai-agent.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\legal-ai-agent.ts"],
      sourcesContent: ["import OpenAI from \"openai\"\r\nimport { ChatMemoryManager, ChatContext } from \"@/lib/memory/chat-memory-manager\"\r\nimport { runDynamicSearchWorkflow } from \"@/lib/tools/dynamic-search-orchestrator\"\r\nimport { runLegalSearchWorkflow } from \"@/lib/tools/legal-search-orchestrator\"\r\nimport { planLegalSearchStrategy } from \"@/lib/tools/legal-search-planner\"\r\n\r\nexport interface AgentDecision {\r\n  action: 'search' | 'respond' | 'clarify' | 'follow_up'\r\n  confidence: number\r\n  reasoning: string\r\n  searchStrategy?: 'dynamic' | 'traditional' | 'hybrid'\r\n  searchQueries?: string[]\r\n  maxRounds?: number\r\n}\r\n\r\nexport interface AgentResponse {\r\n  content: string\r\n  action: string\r\n  metadata: {\r\n    searchExecuted: boolean\r\n    searchRounds?: number\r\n    totalSearches?: number\r\n    totalResults?: number\r\n    finalQuality?: number\r\n    modelDecisions?: number\r\n    searchStrategy?: string\r\n    sources?: Array<{\r\n      title: string\r\n      url: string\r\n      type: string\r\n      quality: number\r\n    }>\r\n  }\r\n  memory: {\r\n    messageId: string\r\n    timestamp: Date\r\n  }\r\n}\r\n\r\nexport interface AgentOptions {\r\n  client: OpenAI\r\n  model: string\r\n  chatId: string\r\n  userId: string\r\n  enableMemory: boolean\r\n  enableAgenticSearch: boolean\r\n  maxSearchRounds: number\r\n  searchTimeoutMs: number\r\n}\r\n\r\n/**\r\n * AI Agent con capacidades agenticas de b\xFAsqueda y memoria\r\n */\r\nexport class LegalAIAgent {\r\n  private memoryManager: ChatMemoryManager\r\n  private options: AgentOptions\r\n\r\n  constructor(options: AgentOptions) {\r\n    this.options = options\r\n    this.memoryManager = ChatMemoryManager.getInstance()\r\n  }\r\n\r\n  /**\r\n   * Procesa una consulta del usuario con capacidades agenticas\r\n   */\r\n  async processQuery(\r\n    userQuery: string,\r\n    messageId: string\r\n  ): Promise<AgentResponse> {\r\n    console.log(`\\n\uD83E\uDD16 AI AGENT PROCESANDO CONSULTA`)\r\n    console.log(`\uD83D\uDCDD Query: \"${userQuery}\"`)\r\n    console.log(`\uD83D\uDCAC Chat ID: ${this.options.chatId}`)\r\n    console.log(`\uD83D\uDC64 User ID: ${this.options.userId}`)\r\n    console.log(`\uD83E\uDDE0 Memoria: ${this.options.enableMemory ? 'ACTIVADA' : 'DESACTIVADA'}`)\r\n    console.log(`\uD83D\uDD0D B\xFAsqueda agentica: ${this.options.enableAgenticSearch ? 'ACTIVADA' : 'DESACTIVADA'}`)\r\n    console.log(`${'='.repeat(80)}`)\r\n\r\n    try {\r\n      // 1. Cargar contexto de memoria si est\xE1 habilitado\r\n      let chatContext: ChatContext | null = null\r\n      if (this.options.enableMemory) {\r\n        chatContext = await this.memoryManager.getChatContext(\r\n          this.options.chatId,\r\n          this.options.userId\r\n        )\r\n        console.log(`\uD83E\uDDE0 Contexto cargado: ${chatContext.conversationHistory.length} mensajes`)\r\n      }\r\n\r\n      // 2. Tomar decisi\xF3n agentica sobre qu\xE9 hacer\r\n      const decision = await this.makeAgenticDecision(userQuery, chatContext)\r\n      console.log(`\uD83E\uDD16 Decisi\xF3n agentica: ${decision.action} (confianza: ${decision.confidence.toFixed(2)})`)\r\n      console.log(`\uD83D\uDCAD Razonamiento: ${decision.reasoning}`)\r\n\r\n      // 3. Ejecutar acci\xF3n basada en la decisi\xF3n\r\n      let response: AgentResponse\r\n\r\n      switch (decision.action) {\r\n        case 'search':\r\n          response = await this.executeSearchAction(userQuery, decision, chatContext)\r\n          break\r\n        case 'respond':\r\n          response = await this.executeRespondAction(userQuery, chatContext)\r\n          break\r\n        case 'clarify':\r\n          response = await this.executeClarifyAction(userQuery, chatContext)\r\n          break\r\n        case 'follow_up':\r\n          response = await this.executeFollowUpAction(userQuery, chatContext)\r\n          break\r\n        default:\r\n          response = await this.executeRespondAction(userQuery, chatContext)\r\n      }\r\n\r\n      // 4. Guardar en memoria si est\xE1 habilitado\r\n      if (this.options.enableMemory) {\r\n        await this.memoryManager.saveMessage(\r\n          this.options.chatId,\r\n          this.options.userId,\r\n          messageId,\r\n          response.content,\r\n          'assistant',\r\n          response.metadata\r\n        )\r\n      }\r\n\r\n      console.log(`\u2705 Respuesta generada: ${response.content.length} caracteres`)\r\n      return response\r\n\r\n    } catch (error) {\r\n      console.error(`\u274C Error en AI Agent:`, error)\r\n      \r\n      // Respuesta de error con fallback\r\n      const errorResponse: AgentResponse = {\r\n        content: `Disculpa, hubo un error t\xE9cnico al procesar tu consulta. Por favor, intenta nuevamente.`,\r\n        action: 'error',\r\n        metadata: {\r\n          searchExecuted: false\r\n        },\r\n        memory: {\r\n          messageId,\r\n          timestamp: new Date()\r\n        }\r\n      }\r\n\r\n      if (this.options.enableMemory) {\r\n        await this.memoryManager.saveMessage(\r\n          this.options.chatId,\r\n          this.options.userId,\r\n          messageId,\r\n          errorResponse.content,\r\n          'assistant',\r\n          errorResponse.metadata\r\n        )\r\n      }\r\n\r\n      return errorResponse\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toma una decisi\xF3n agentica sobre qu\xE9 acci\xF3n realizar\r\n   */\r\n  private async makeAgenticDecision(\r\n    userQuery: string,\r\n    chatContext: ChatContext | null\r\n  ): Promise<AgentDecision> {\r\n    try {\r\n      const contextInfo = chatContext ? `\r\nHISTORIAL DE CONVERSACI\xD3N:\r\n${chatContext.currentContext}\r\n\r\nB\xDASQUEDAS ANTERIORES:\r\n${chatContext.searchHistory.slice(-3).map(s => `- \"${s.query}\" (${s.results} resultados, calidad: ${s.quality}/10)`).join('\\n')}\r\n\r\nPREFERENCIAS DEL USUARIO:\r\n- Estrategia: ${chatContext.userPreferences.preferredSearchStrategy}\r\n- M\xE1ximo de rondas: ${chatContext.userPreferences.maxSearchRounds}\r\n- Decisi\xF3n del modelo: ${chatContext.userPreferences.enableModelDecision ? 'Activada' : 'Desactivada'}\r\n` : 'Sin historial previo'\r\n\r\n      const decisionPrompt = `Eres un agente de IA legal experto que debe decidir qu\xE9 acci\xF3n tomar para responder una consulta del usuario.\r\n\r\nCONSULTA ACTUAL: \"${userQuery}\"\r\n\r\n${contextInfo}\r\n\r\nCAPACIDADES DISPONIBLES:\r\n1. **search**: Realizar b\xFAsqueda web din\xE1mica con m\xFAltiples rondas\r\n2. **respond**: Responder directamente con conocimiento existente\r\n3. **clarify**: Pedir aclaraciones al usuario\r\n4. **follow_up**: Hacer preguntas de seguimiento\r\n\r\nCRITERIOS DE DECISI\xD3N:\r\n- Si la consulta requiere informaci\xF3n actualizada o espec\xEDfica \u2192 **search**\r\n- Si la consulta es general y tienes conocimiento suficiente \u2192 **respond**\r\n- Si la consulta es ambigua o incompleta \u2192 **clarify**\r\n- Si necesitas m\xE1s informaci\xF3n para completar la respuesta \u2192 **follow_up**\r\n\r\nESTRATEGIAS DE B\xDASQUEDA:\r\n- **dynamic**: Sistema de b\xFAsqueda din\xE1mica (hasta 10 rondas, modelo decide)\r\n- **traditional**: Sistema tradicional (hasta 5 rondas, criterios fijos)\r\n- **hybrid**: Combinaci\xF3n de ambos sistemas\r\n\r\nResponde en formato JSON:\r\n{\r\n  \"action\": \"search|respond|clarify|follow_up\",\r\n  \"confidence\": 0.0-1.0,\r\n  \"reasoning\": \"explicaci\xF3n detallada de la decisi\xF3n\",\r\n  \"searchStrategy\": \"dynamic|traditional|hybrid\",\r\n  \"searchQueries\": [\"consulta espec\xEDfica 1\", \"consulta espec\xEDfica 2\"],\r\n  \"maxRounds\": 5-10\r\n}`\r\n\r\n      const response = await this.options.client.chat.completions.create({\r\n        model: this.options.model,\r\n        messages: [\r\n          { role: \"system\", content: decisionPrompt },\r\n          { role: \"user\", content: `Analiza la consulta y decide qu\xE9 acci\xF3n tomar: \"${userQuery}\"` }\r\n        ],\r\n        temperature: 0.1,\r\n        max_tokens: 800,\r\n        stream: false\r\n      })\r\n\r\n      const content = response.choices?.[0]?.message?.content || '{}'\r\n      const decision = this.parseAgentDecision(content)\r\n\r\n      // Validar decisi\xF3n\r\n      if (!decision.action || !['search', 'respond', 'clarify', 'follow_up'].includes(decision.action)) {\r\n        decision.action = 'search' // Fallback a b\xFAsqueda\r\n        decision.confidence = 0.5\r\n        decision.reasoning = 'Decisi\xF3n inv\xE1lida, usando fallback a b\xFAsqueda'\r\n      }\r\n\r\n      return decision\r\n\r\n    } catch (error) {\r\n      console.error('Error en decisi\xF3n agentica:', error)\r\n      \r\n      // Fallback a b\xFAsqueda din\xE1mica\r\n      return {\r\n        action: 'search',\r\n        confidence: 0.5,\r\n        reasoning: 'Error en decisi\xF3n agentica, usando fallback a b\xFAsqueda',\r\n        searchStrategy: 'dynamic',\r\n        searchQueries: [userQuery],\r\n        maxRounds: this.options.maxSearchRounds\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ejecuta acci\xF3n de b\xFAsqueda\r\n   */\r\n  private async executeSearchAction(\r\n    userQuery: string,\r\n    decision: AgentDecision,\r\n    chatContext: ChatContext | null\r\n  ): Promise<AgentResponse> {\r\n    console.log(`\uD83D\uDD0D Ejecutando b\xFAsqueda agentica con estrategia: ${decision.searchStrategy}`)\r\n\r\n    try {\r\n      let searchResult: any\r\n      let metadata: AgentResponse['metadata']\r\n\r\n      if (decision.searchStrategy === 'dynamic' || decision.searchStrategy === 'hybrid') {\r\n        // Usar sistema de b\xFAsqueda din\xE1mica\r\n        searchResult = await runDynamicSearchWorkflow(userQuery, {\r\n          client: this.options.client,\r\n          model: this.options.model,\r\n          maxSearchRounds: decision.maxRounds || this.options.maxSearchRounds,\r\n          maxSearchesPerRound: 8,\r\n          searchTimeoutMs: this.options.searchTimeoutMs,\r\n          enableModelDecision: true\r\n        })\r\n\r\n        metadata = {\r\n          searchExecuted: true,\r\n          searchRounds: searchResult.metadata.totalRounds,\r\n          totalSearches: searchResult.metadata.totalSearches,\r\n          totalResults: searchResult.metadata.totalResults,\r\n          finalQuality: searchResult.metadata.finalQuality,\r\n          modelDecisions: searchResult.metadata.modelDecisions,\r\n          searchStrategy: searchResult.metadata.searchStrategy,\r\n          sources: searchResult.allResults.slice(0, 10).map((result: any) => ({\r\n            title: result.title,\r\n            url: result.url,\r\n            type: result.type,\r\n            quality: result.quality\r\n          }))\r\n        }\r\n\r\n        // Registrar b\xFAsqueda en memoria\r\n        if (this.options.enableMemory && chatContext) {\r\n          await this.memoryManager.recordSearch(\r\n            this.options.chatId,\r\n            this.options.userId,\r\n            userQuery,\r\n            searchResult.metadata.totalResults,\r\n            searchResult.metadata.finalQuality\r\n          )\r\n        }\r\n\r\n        // Generar respuesta usando el contexto enriquecido\r\n        const response = await this.generateResponseWithContext(\r\n          userQuery,\r\n          searchResult.finalContext,\r\n          chatContext\r\n        )\r\n\r\n        return {\r\n          content: response,\r\n          action: 'search',\r\n          metadata,\r\n          memory: {\r\n            messageId: `${this.options.chatId}-${Date.now()}`,\r\n            timestamp: new Date()\r\n          }\r\n        }\r\n\r\n      } else {\r\n        // Usar sistema tradicional\r\n        const searchPlan = await planLegalSearchStrategy({\r\n          client: this.options.client,\r\n          model: this.options.model,\r\n          userQuery,\r\n          maxQueries: 5\r\n        })\r\n\r\n        const workflow = await runLegalSearchWorkflow(userQuery, {\r\n          maxResults: 5,\r\n          maxAttempts: Math.max(searchPlan.queries.length || 0, 1),\r\n          searchTimeoutMs: this.options.searchTimeoutMs,\r\n          searchQueries: searchPlan.queries\r\n        })\r\n\r\n        metadata = {\r\n          searchExecuted: workflow.metadata.searchExecuted,\r\n          searchRounds: 1,\r\n          totalSearches: workflow.metadata.attempts,\r\n          totalResults: workflow.sources.length,\r\n          finalQuality: workflow.sources.length > 0 ? 7 : 3,\r\n          searchStrategy: 'TRADITIONAL',\r\n          sources: workflow.sources.map(source => ({\r\n            title: source.title,\r\n            url: source.url,\r\n            type: source.type,\r\n            quality: 7\r\n          }))\r\n        }\r\n\r\n        // Generar respuesta usando el contexto tradicional\r\n        const response = await this.generateResponseWithContext(\r\n          userQuery,\r\n          workflow.modelContext,\r\n          chatContext\r\n        )\r\n\r\n        return {\r\n          content: response,\r\n          action: 'search',\r\n          metadata,\r\n          memory: {\r\n            messageId: `${this.options.chatId}-${Date.now()}`,\r\n            timestamp: new Date()\r\n          }\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error en b\xFAsqueda agentica:', error)\r\n      \r\n      // Fallback a respuesta sin b\xFAsqueda\r\n      const response = await this.generateResponseWithContext(\r\n        userQuery,\r\n        'Error en b\xFAsqueda, respondiendo con conocimiento general',\r\n        chatContext\r\n      )\r\n\r\n      return {\r\n        content: response,\r\n        action: 'search',\r\n        metadata: {\r\n          searchExecuted: false\r\n        },\r\n        memory: {\r\n          messageId: `${this.options.chatId}-${Date.now()}`,\r\n          timestamp: new Date()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ejecuta acci\xF3n de respuesta directa\r\n   */\r\n  private async executeRespondAction(\r\n    userQuery: string,\r\n    chatContext: ChatContext | null\r\n  ): Promise<AgentResponse> {\r\n    console.log(`\uD83D\uDCAC Respondiendo directamente sin b\xFAsqueda`)\r\n\r\n    const response = await this.generateResponseWithContext(\r\n      userQuery,\r\n      'Responde usando tu conocimiento legal colombiano sin realizar b\xFAsquedas web',\r\n      chatContext\r\n    )\r\n\r\n    return {\r\n      content: response,\r\n      action: 'respond',\r\n      metadata: {\r\n        searchExecuted: false\r\n      },\r\n      memory: {\r\n        messageId: `${this.options.chatId}-${Date.now()}`,\r\n        timestamp: new Date()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ejecuta acci\xF3n de aclaraci\xF3n\r\n   */\r\n  private async executeClarifyAction(\r\n    userQuery: string,\r\n    chatContext: ChatContext | null\r\n  ): Promise<AgentResponse> {\r\n    console.log(`\u2753 Solicitando aclaraci\xF3n`)\r\n\r\n    const clarificationPrompt = `La consulta \"${userQuery}\" es ambigua o incompleta. Genera una pregunta de aclaraci\xF3n espec\xEDfica para obtener m\xE1s informaci\xF3n del usuario.`\r\n\r\n    const response = await this.options.client.chat.completions.create({\r\n      model: this.options.model,\r\n      messages: [\r\n        { role: \"system\", content: \"Eres un asistente legal que necesita aclarar consultas ambiguas.\" },\r\n        { role: \"user\", content: clarificationPrompt }\r\n      ],\r\n      temperature: 0.3,\r\n      max_tokens: 300,\r\n      stream: false\r\n    })\r\n\r\n    const content = response.choices?.[0]?.message?.content || \"\xBFPodr\xEDas ser m\xE1s espec\xEDfico en tu consulta?\"\r\n\r\n    return {\r\n      content,\r\n      action: 'clarify',\r\n      metadata: {\r\n        searchExecuted: false\r\n      },\r\n      memory: {\r\n        messageId: `${this.options.chatId}-${Date.now()}`,\r\n        timestamp: new Date()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Ejecuta acci\xF3n de seguimiento\r\n   */\r\n  private async executeFollowUpAction(\r\n    userQuery: string,\r\n    chatContext: ChatContext | null\r\n  ): Promise<AgentResponse> {\r\n    console.log(`\uD83D\uDD04 Generando pregunta de seguimiento`)\r\n\r\n    const followUpPrompt = `Bas\xE1ndote en la consulta \"${userQuery}\" y el contexto de conversaci\xF3n, genera una pregunta de seguimiento \xFAtil para obtener m\xE1s informaci\xF3n espec\xEDfica.`\r\n\r\n    const response = await this.options.client.chat.completions.create({\r\n      model: this.options.model,\r\n      messages: [\r\n        { role: \"system\", content: \"Eres un asistente legal que hace preguntas de seguimiento inteligentes.\" },\r\n        { role: \"user\", content: followUpPrompt }\r\n      ],\r\n      temperature: 0.3,\r\n      max_tokens: 300,\r\n      stream: false\r\n    })\r\n\r\n    const content = response.choices?.[0]?.message?.content || \"\xBFHay alg\xFAn aspecto espec\xEDfico que te gustar\xEDa que profundice?\"\r\n\r\n    return {\r\n      content,\r\n      action: 'follow_up',\r\n      metadata: {\r\n        searchExecuted: false\r\n      },\r\n      memory: {\r\n        messageId: `${this.options.chatId}-${Date.now()}`,\r\n        timestamp: new Date()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Genera respuesta usando contexto enriquecido\r\n   */\r\n  private async generateResponseWithContext(\r\n    userQuery: string,\r\n    searchContext: string,\r\n    chatContext: ChatContext | null\r\n  ): Promise<string> {\r\n    const systemPrompt = `Eres un asistente legal experto en derecho colombiano. Utiliza EXCLUSIVAMENTE la informaci\xF3n proporcionada para responder la consulta del usuario.\r\n\r\n${searchContext}\r\n\r\n${chatContext ? `CONTEXTO DE CONVERSACI\xD3N:\r\n${chatContext.currentContext}` : ''}\r\n\r\nINSTRUCCIONES:\r\n1. Responde de manera completa y precisa\r\n2. Usa terminolog\xEDa jur\xEDdica apropiada\r\n3. Incluye referencias a art\xEDculos y leyes cuando sea relevante\r\n4. Proporciona informaci\xF3n pr\xE1ctica y aplicable\r\n5. Si hay informaci\xF3n insuficiente, ind\xEDcalo claramente\r\n6. Responde en espa\xF1ol colombiano`\r\n\r\n    const response = await this.options.client.chat.completions.create({\r\n      model: this.options.model,\r\n      messages: [\r\n        { role: \"system\", content: systemPrompt },\r\n        { role: \"user\", content: `Consulta: \"${userQuery}\"` }\r\n      ],\r\n      temperature: 0.2,\r\n      max_tokens: 2000,\r\n      stream: false\r\n    })\r\n\r\n    return response.choices?.[0]?.message?.content || \"No pude generar una respuesta adecuada.\"\r\n  }\r\n\r\n  /**\r\n   * Parsea la decisi\xF3n del agente desde JSON\r\n   */\r\n  private parseAgentDecision(content: string): AgentDecision {\r\n    try {\r\n      const jsonText = this.extractJson(content)\r\n      const parsed = JSON.parse(jsonText)\r\n      \r\n      return {\r\n        action: parsed.action || 'search',\r\n        confidence: parsed.confidence || 0.5,\r\n        reasoning: parsed.reasoning || 'Sin razonamiento proporcionado',\r\n        searchStrategy: parsed.searchStrategy || 'dynamic',\r\n        searchQueries: parsed.searchQueries || [],\r\n        maxRounds: parsed.maxRounds || this.options.maxSearchRounds\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parseando decisi\xF3n del agente:', error)\r\n      return {\r\n        action: 'search',\r\n        confidence: 0.5,\r\n        reasoning: 'Error parseando decisi\xF3n, usando fallback',\r\n        searchStrategy: 'dynamic',\r\n        searchQueries: [],\r\n        maxRounds: this.options.maxSearchRounds\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extrae JSON del contenido\r\n   */\r\n  private extractJson(content: string): string {\r\n    const start = content.indexOf('{')\r\n    const end = content.lastIndexOf('}')\r\n    if (start === -1 || end === -1 || end <= start) {\r\n      throw new Error(\"JSON no encontrado en el contenido\")\r\n    }\r\n    return content.slice(start, end + 1)\r\n  }\r\n\r\n  /**\r\n   * Obtiene estad\xEDsticas del agente\r\n   */\r\n  async getAgentStats(): Promise<{\r\n    memoryEnabled: boolean\r\n    agenticSearchEnabled: boolean\r\n    maxSearchRounds: number\r\n    chatStats: {\r\n      totalMessages: number\r\n      totalSearches: number\r\n      averageQuality: number\r\n      lastActivity: Date | null\r\n    }\r\n  }> {\r\n    const chatStats = await this.memoryManager.getMemoryStats(\r\n      this.options.chatId,\r\n      this.options.userId\r\n    )\r\n\r\n    return {\r\n      memoryEnabled: this.options.enableMemory,\r\n      agenticSearchEnabled: this.options.enableAgenticSearch,\r\n      maxSearchRounds: this.options.maxSearchRounds,\r\n      chatStats\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "05d074be946d26c1bf22a440df2dd4311c6522e1"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_k5221buk5 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_k5221buk5();
cov_k5221buk5().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_k5221buk5().s[1]++;
exports.LegalAIAgent = void 0;
const chat_memory_manager_1 =
/* istanbul ignore next */
(cov_k5221buk5().s[2]++, require("@/lib/memory/chat-memory-manager"));
const dynamic_search_orchestrator_1 =
/* istanbul ignore next */
(cov_k5221buk5().s[3]++, require("@/lib/tools/dynamic-search-orchestrator"));
const legal_search_orchestrator_1 =
/* istanbul ignore next */
(cov_k5221buk5().s[4]++, require("@/lib/tools/legal-search-orchestrator"));
const legal_search_planner_1 =
/* istanbul ignore next */
(cov_k5221buk5().s[5]++, require("@/lib/tools/legal-search-planner"));
/**
 * AI Agent con capacidades agenticas de bsqueda y memoria
 */
class LegalAIAgent {
  memoryManager;
  options;
  constructor(options) {
    /* istanbul ignore next */
    cov_k5221buk5().f[0]++;
    cov_k5221buk5().s[6]++;
    this.options = options;
    /* istanbul ignore next */
    cov_k5221buk5().s[7]++;
    this.memoryManager = chat_memory_manager_1.ChatMemoryManager.getInstance();
  }
  /**
   * Procesa una consulta del usuario con capacidades agenticas
   */
  async processQuery(userQuery, messageId) {
    /* istanbul ignore next */
    cov_k5221buk5().f[1]++;
    cov_k5221buk5().s[8]++;
    console.log(`\n AI AGENT PROCESANDO CONSULTA`);
    /* istanbul ignore next */
    cov_k5221buk5().s[9]++;
    console.log(` Query: "${userQuery}"`);
    /* istanbul ignore next */
    cov_k5221buk5().s[10]++;
    console.log(` Chat ID: ${this.options.chatId}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[11]++;
    console.log(` User ID: ${this.options.userId}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[12]++;
    console.log(` Memoria: ${this.options.enableMemory ?
    /* istanbul ignore next */
    (cov_k5221buk5().b[0][0]++, 'ACTIVADA') :
    /* istanbul ignore next */
    (cov_k5221buk5().b[0][1]++, 'DESACTIVADA')}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[13]++;
    console.log(` Bsqueda agentica: ${this.options.enableAgenticSearch ?
    /* istanbul ignore next */
    (cov_k5221buk5().b[1][0]++, 'ACTIVADA') :
    /* istanbul ignore next */
    (cov_k5221buk5().b[1][1]++, 'DESACTIVADA')}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[14]++;
    console.log(`${'='.repeat(80)}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[15]++;
    try {
      // 1. Cargar contexto de memoria si est habilitado
      let chatContext =
      /* istanbul ignore next */
      (cov_k5221buk5().s[16]++, null);
      /* istanbul ignore next */
      cov_k5221buk5().s[17]++;
      if (this.options.enableMemory) {
        /* istanbul ignore next */
        cov_k5221buk5().b[2][0]++;
        cov_k5221buk5().s[18]++;
        chatContext = await this.memoryManager.getChatContext(this.options.chatId, this.options.userId);
        /* istanbul ignore next */
        cov_k5221buk5().s[19]++;
        console.log(` Contexto cargado: ${chatContext.conversationHistory.length} mensajes`);
      } else
      /* istanbul ignore next */
      {
        cov_k5221buk5().b[2][1]++;
      }
      // 2. Tomar decisin agentica sobre qu hacer
      const decision =
      /* istanbul ignore next */
      (cov_k5221buk5().s[20]++, await this.makeAgenticDecision(userQuery, chatContext));
      /* istanbul ignore next */
      cov_k5221buk5().s[21]++;
      console.log(` Decisin agentica: ${decision.action} (confianza: ${decision.confidence.toFixed(2)})`);
      /* istanbul ignore next */
      cov_k5221buk5().s[22]++;
      console.log(` Razonamiento: ${decision.reasoning}`);
      // 3. Ejecutar accin basada en la decisin
      let response;
      /* istanbul ignore next */
      cov_k5221buk5().s[23]++;
      switch (decision.action) {
        case 'search':
          /* istanbul ignore next */
          cov_k5221buk5().b[3][0]++;
          cov_k5221buk5().s[24]++;
          response = await this.executeSearchAction(userQuery, decision, chatContext);
          /* istanbul ignore next */
          cov_k5221buk5().s[25]++;
          break;
        case 'respond':
          /* istanbul ignore next */
          cov_k5221buk5().b[3][1]++;
          cov_k5221buk5().s[26]++;
          response = await this.executeRespondAction(userQuery, chatContext);
          /* istanbul ignore next */
          cov_k5221buk5().s[27]++;
          break;
        case 'clarify':
          /* istanbul ignore next */
          cov_k5221buk5().b[3][2]++;
          cov_k5221buk5().s[28]++;
          response = await this.executeClarifyAction(userQuery, chatContext);
          /* istanbul ignore next */
          cov_k5221buk5().s[29]++;
          break;
        case 'follow_up':
          /* istanbul ignore next */
          cov_k5221buk5().b[3][3]++;
          cov_k5221buk5().s[30]++;
          response = await this.executeFollowUpAction(userQuery, chatContext);
          /* istanbul ignore next */
          cov_k5221buk5().s[31]++;
          break;
        default:
          /* istanbul ignore next */
          cov_k5221buk5().b[3][4]++;
          cov_k5221buk5().s[32]++;
          response = await this.executeRespondAction(userQuery, chatContext);
      }
      // 4. Guardar en memoria si est habilitado
      /* istanbul ignore next */
      cov_k5221buk5().s[33]++;
      if (this.options.enableMemory) {
        /* istanbul ignore next */
        cov_k5221buk5().b[4][0]++;
        cov_k5221buk5().s[34]++;
        await this.memoryManager.saveMessage(this.options.chatId, this.options.userId, messageId, response.content, 'assistant', response.metadata);
      } else
      /* istanbul ignore next */
      {
        cov_k5221buk5().b[4][1]++;
      }
      cov_k5221buk5().s[35]++;
      console.log(` Respuesta generada: ${response.content.length} caracteres`);
      /* istanbul ignore next */
      cov_k5221buk5().s[36]++;
      return response;
    } catch (error) {
      /* istanbul ignore next */
      cov_k5221buk5().s[37]++;
      console.error(` Error en AI Agent:`, error);
      // Respuesta de error con fallback
      const errorResponse =
      /* istanbul ignore next */
      (cov_k5221buk5().s[38]++, {
        content: `Disculpa, hubo un error tcnico al procesar tu consulta. Por favor, intenta nuevamente.`,
        action: 'error',
        metadata: {
          searchExecuted: false
        },
        memory: {
          messageId,
          timestamp: new Date()
        }
      });
      /* istanbul ignore next */
      cov_k5221buk5().s[39]++;
      if (this.options.enableMemory) {
        /* istanbul ignore next */
        cov_k5221buk5().b[5][0]++;
        cov_k5221buk5().s[40]++;
        await this.memoryManager.saveMessage(this.options.chatId, this.options.userId, messageId, errorResponse.content, 'assistant', errorResponse.metadata);
      } else
      /* istanbul ignore next */
      {
        cov_k5221buk5().b[5][1]++;
      }
      cov_k5221buk5().s[41]++;
      return errorResponse;
    }
  }
  /**
   * Toma una decisin agentica sobre qu accin realizar
   */
  async makeAgenticDecision(userQuery, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[2]++;
    cov_k5221buk5().s[42]++;
    try {
      const contextInfo =
      /* istanbul ignore next */
      (cov_k5221buk5().s[43]++, chatContext ?
      /* istanbul ignore next */
      (cov_k5221buk5().b[6][0]++, `
HISTORIAL DE CONVERSACIN:
${chatContext.currentContext}

BSQUEDAS ANTERIORES:
${chatContext.searchHistory.slice(-3).map(s => {
        /* istanbul ignore next */
        cov_k5221buk5().f[3]++;
        cov_k5221buk5().s[44]++;
        return `- "${s.query}" (${s.results} resultados, calidad: ${s.quality}/10)`;
      }).join('\n')}

PREFERENCIAS DEL USUARIO:
- Estrategia: ${chatContext.userPreferences.preferredSearchStrategy}
- Mximo de rondas: ${chatContext.userPreferences.maxSearchRounds}
- Decisin del modelo: ${chatContext.userPreferences.enableModelDecision ?
      /* istanbul ignore next */
      (cov_k5221buk5().b[7][0]++, 'Activada') :
      /* istanbul ignore next */
      (cov_k5221buk5().b[7][1]++, 'Desactivada')}
`) :
      /* istanbul ignore next */
      (cov_k5221buk5().b[6][1]++, 'Sin historial previo'));
      const decisionPrompt =
      /* istanbul ignore next */
      (cov_k5221buk5().s[45]++, `Eres un agente de IA legal experto que debe decidir qu accin tomar para responder una consulta del usuario.

CONSULTA ACTUAL: "${userQuery}"

${contextInfo}

CAPACIDADES DISPONIBLES:
1. **search**: Realizar bsqueda web dinmica con mltiples rondas
2. **respond**: Responder directamente con conocimiento existente
3. **clarify**: Pedir aclaraciones al usuario
4. **follow_up**: Hacer preguntas de seguimiento

CRITERIOS DE DECISIN:
- Si la consulta requiere informacin actualizada o especfica  **search**
- Si la consulta es general y tienes conocimiento suficiente  **respond**
- Si la consulta es ambigua o incompleta  **clarify**
- Si necesitas ms informacin para completar la respuesta  **follow_up**

ESTRATEGIAS DE BSQUEDA:
- **dynamic**: Sistema de bsqueda dinmica (hasta 10 rondas, modelo decide)
- **traditional**: Sistema tradicional (hasta 5 rondas, criterios fijos)
- **hybrid**: Combinacin de ambos sistemas

Responde en formato JSON:
{
  "action": "search|respond|clarify|follow_up",
  "confidence": 0.0-1.0,
  "reasoning": "explicacin detallada de la decisin",
  "searchStrategy": "dynamic|traditional|hybrid",
  "searchQueries": ["consulta especfica 1", "consulta especfica 2"],
  "maxRounds": 5-10
}`);
      const response =
      /* istanbul ignore next */
      (cov_k5221buk5().s[46]++, await this.options.client.chat.completions.create({
        model: this.options.model,
        messages: [{
          role: "system",
          content: decisionPrompt
        }, {
          role: "user",
          content: `Analiza la consulta y decide qu accin tomar: "${userQuery}"`
        }],
        temperature: 0.1,
        max_tokens: 800,
        stream: false
      }));
      const content =
      /* istanbul ignore next */
      (cov_k5221buk5().s[47]++,
      /* istanbul ignore next */
      (cov_k5221buk5().b[8][0]++, response.choices?.[0]?.message?.content) ||
      /* istanbul ignore next */
      (cov_k5221buk5().b[8][1]++, '{}'));
      const decision =
      /* istanbul ignore next */
      (cov_k5221buk5().s[48]++, this.parseAgentDecision(content));
      // Validar decisin
      /* istanbul ignore next */
      cov_k5221buk5().s[49]++;
      if (
      /* istanbul ignore next */
      (cov_k5221buk5().b[10][0]++, !decision.action) ||
      /* istanbul ignore next */
      (cov_k5221buk5().b[10][1]++, !['search', 'respond', 'clarify', 'follow_up'].includes(decision.action))) {
        /* istanbul ignore next */
        cov_k5221buk5().b[9][0]++;
        cov_k5221buk5().s[50]++;
        decision.action = 'search'; // Fallback a bsqueda
        /* istanbul ignore next */
        cov_k5221buk5().s[51]++;
        decision.confidence = 0.5;
        /* istanbul ignore next */
        cov_k5221buk5().s[52]++;
        decision.reasoning = 'Decisin invlida, usando fallback a bsqueda';
      } else
      /* istanbul ignore next */
      {
        cov_k5221buk5().b[9][1]++;
      }
      cov_k5221buk5().s[53]++;
      return decision;
    } catch (error) {
      /* istanbul ignore next */
      cov_k5221buk5().s[54]++;
      console.error('Error en decisin agentica:', error);
      // Fallback a bsqueda dinmica
      /* istanbul ignore next */
      cov_k5221buk5().s[55]++;
      return {
        action: 'search',
        confidence: 0.5,
        reasoning: 'Error en decisin agentica, usando fallback a bsqueda',
        searchStrategy: 'dynamic',
        searchQueries: [userQuery],
        maxRounds: this.options.maxSearchRounds
      };
    }
  }
  /**
   * Ejecuta accin de bsqueda
   */
  async executeSearchAction(userQuery, decision, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[4]++;
    cov_k5221buk5().s[56]++;
    console.log(` Ejecutando bsqueda agentica con estrategia: ${decision.searchStrategy}`);
    /* istanbul ignore next */
    cov_k5221buk5().s[57]++;
    try {
      let searchResult;
      let metadata;
      /* istanbul ignore next */
      cov_k5221buk5().s[58]++;
      if (
      /* istanbul ignore next */
      (cov_k5221buk5().b[12][0]++, decision.searchStrategy === 'dynamic') ||
      /* istanbul ignore next */
      (cov_k5221buk5().b[12][1]++, decision.searchStrategy === 'hybrid')) {
        /* istanbul ignore next */
        cov_k5221buk5().b[11][0]++;
        cov_k5221buk5().s[59]++;
        // Usar sistema de bsqueda dinmica
        searchResult = await (0, dynamic_search_orchestrator_1.runDynamicSearchWorkflow)(userQuery, {
          client: this.options.client,
          model: this.options.model,
          maxSearchRounds:
          /* istanbul ignore next */
          (cov_k5221buk5().b[13][0]++, decision.maxRounds) ||
          /* istanbul ignore next */
          (cov_k5221buk5().b[13][1]++, this.options.maxSearchRounds),
          maxSearchesPerRound: 8,
          searchTimeoutMs: this.options.searchTimeoutMs,
          enableModelDecision: true
        });
        /* istanbul ignore next */
        cov_k5221buk5().s[60]++;
        metadata = {
          searchExecuted: true,
          searchRounds: searchResult.metadata.totalRounds,
          totalSearches: searchResult.metadata.totalSearches,
          totalResults: searchResult.metadata.totalResults,
          finalQuality: searchResult.metadata.finalQuality,
          modelDecisions: searchResult.metadata.modelDecisions,
          searchStrategy: searchResult.metadata.searchStrategy,
          sources: searchResult.allResults.slice(0, 10).map(result => {
            /* istanbul ignore next */
            cov_k5221buk5().f[5]++;
            cov_k5221buk5().s[61]++;
            return {
              title: result.title,
              url: result.url,
              type: result.type,
              quality: result.quality
            };
          })
        };
        // Registrar bsqueda en memoria
        /* istanbul ignore next */
        cov_k5221buk5().s[62]++;
        if (
        /* istanbul ignore next */
        (cov_k5221buk5().b[15][0]++, this.options.enableMemory) &&
        /* istanbul ignore next */
        (cov_k5221buk5().b[15][1]++, chatContext)) {
          /* istanbul ignore next */
          cov_k5221buk5().b[14][0]++;
          cov_k5221buk5().s[63]++;
          await this.memoryManager.recordSearch(this.options.chatId, this.options.userId, userQuery, searchResult.metadata.totalResults, searchResult.metadata.finalQuality);
        } else
        /* istanbul ignore next */
        {
          cov_k5221buk5().b[14][1]++;
        }
        // Generar respuesta usando el contexto enriquecido
        const response =
        /* istanbul ignore next */
        (cov_k5221buk5().s[64]++, await this.generateResponseWithContext(userQuery, searchResult.finalContext, chatContext));
        /* istanbul ignore next */
        cov_k5221buk5().s[65]++;
        return {
          content: response,
          action: 'search',
          metadata,
          memory: {
            messageId: `${this.options.chatId}-${Date.now()}`,
            timestamp: new Date()
          }
        };
      } else {
        /* istanbul ignore next */
        cov_k5221buk5().b[11][1]++;
        // Usar sistema tradicional
        const searchPlan =
        /* istanbul ignore next */
        (cov_k5221buk5().s[66]++, await (0, legal_search_planner_1.planLegalSearchStrategy)({
          client: this.options.client,
          model: this.options.model,
          userQuery,
          maxQueries: 5
        }));
        const workflow =
        /* istanbul ignore next */
        (cov_k5221buk5().s[67]++, await (0, legal_search_orchestrator_1.runLegalSearchWorkflow)(userQuery, {
          maxResults: 5,
          maxAttempts: Math.max(
          /* istanbul ignore next */
          (cov_k5221buk5().b[16][0]++, searchPlan.queries.length) ||
          /* istanbul ignore next */
          (cov_k5221buk5().b[16][1]++, 0), 1),
          searchTimeoutMs: this.options.searchTimeoutMs,
          searchQueries: searchPlan.queries
        }));
        /* istanbul ignore next */
        cov_k5221buk5().s[68]++;
        metadata = {
          searchExecuted: workflow.metadata.searchExecuted,
          searchRounds: 1,
          totalSearches: workflow.metadata.attempts,
          totalResults: workflow.sources.length,
          finalQuality: workflow.sources.length > 0 ?
          /* istanbul ignore next */
          (cov_k5221buk5().b[17][0]++, 7) :
          /* istanbul ignore next */
          (cov_k5221buk5().b[17][1]++, 3),
          searchStrategy: 'TRADITIONAL',
          sources: workflow.sources.map(source => {
            /* istanbul ignore next */
            cov_k5221buk5().f[6]++;
            cov_k5221buk5().s[69]++;
            return {
              title: source.title,
              url: source.url,
              type: source.type,
              quality: 7
            };
          })
        };
        // Generar respuesta usando el contexto tradicional
        const response =
        /* istanbul ignore next */
        (cov_k5221buk5().s[70]++, await this.generateResponseWithContext(userQuery, workflow.modelContext, chatContext));
        /* istanbul ignore next */
        cov_k5221buk5().s[71]++;
        return {
          content: response,
          action: 'search',
          metadata,
          memory: {
            messageId: `${this.options.chatId}-${Date.now()}`,
            timestamp: new Date()
          }
        };
      }
    } catch (error) {
      /* istanbul ignore next */
      cov_k5221buk5().s[72]++;
      console.error('Error en bsqueda agentica:', error);
      // Fallback a respuesta sin bsqueda
      const response =
      /* istanbul ignore next */
      (cov_k5221buk5().s[73]++, await this.generateResponseWithContext(userQuery, 'Error en bsqueda, respondiendo con conocimiento general', chatContext));
      /* istanbul ignore next */
      cov_k5221buk5().s[74]++;
      return {
        content: response,
        action: 'search',
        metadata: {
          searchExecuted: false
        },
        memory: {
          messageId: `${this.options.chatId}-${Date.now()}`,
          timestamp: new Date()
        }
      };
    }
  }
  /**
   * Ejecuta accin de respuesta directa
   */
  async executeRespondAction(userQuery, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[7]++;
    cov_k5221buk5().s[75]++;
    console.log(` Respondiendo directamente sin bsqueda`);
    const response =
    /* istanbul ignore next */
    (cov_k5221buk5().s[76]++, await this.generateResponseWithContext(userQuery, 'Responde usando tu conocimiento legal colombiano sin realizar bsquedas web', chatContext));
    /* istanbul ignore next */
    cov_k5221buk5().s[77]++;
    return {
      content: response,
      action: 'respond',
      metadata: {
        searchExecuted: false
      },
      memory: {
        messageId: `${this.options.chatId}-${Date.now()}`,
        timestamp: new Date()
      }
    };
  }
  /**
   * Ejecuta accin de aclaracin
   */
  async executeClarifyAction(userQuery, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[8]++;
    cov_k5221buk5().s[78]++;
    console.log(` Solicitando aclaracin`);
    const clarificationPrompt =
    /* istanbul ignore next */
    (cov_k5221buk5().s[79]++, `La consulta "${userQuery}" es ambigua o incompleta. Genera una pregunta de aclaracin especfica para obtener ms informacin del usuario.`);
    const response =
    /* istanbul ignore next */
    (cov_k5221buk5().s[80]++, await this.options.client.chat.completions.create({
      model: this.options.model,
      messages: [{
        role: "system",
        content: "Eres un asistente legal que necesita aclarar consultas ambiguas."
      }, {
        role: "user",
        content: clarificationPrompt
      }],
      temperature: 0.3,
      max_tokens: 300,
      stream: false
    }));
    const content =
    /* istanbul ignore next */
    (cov_k5221buk5().s[81]++,
    /* istanbul ignore next */
    (cov_k5221buk5().b[18][0]++, response.choices?.[0]?.message?.content) ||
    /* istanbul ignore next */
    (cov_k5221buk5().b[18][1]++, "Podras ser ms especfico en tu consulta?"));
    /* istanbul ignore next */
    cov_k5221buk5().s[82]++;
    return {
      content,
      action: 'clarify',
      metadata: {
        searchExecuted: false
      },
      memory: {
        messageId: `${this.options.chatId}-${Date.now()}`,
        timestamp: new Date()
      }
    };
  }
  /**
   * Ejecuta accin de seguimiento
   */
  async executeFollowUpAction(userQuery, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[9]++;
    cov_k5221buk5().s[83]++;
    console.log(` Generando pregunta de seguimiento`);
    const followUpPrompt =
    /* istanbul ignore next */
    (cov_k5221buk5().s[84]++, `Basndote en la consulta "${userQuery}" y el contexto de conversacin, genera una pregunta de seguimiento til para obtener ms informacin especfica.`);
    const response =
    /* istanbul ignore next */
    (cov_k5221buk5().s[85]++, await this.options.client.chat.completions.create({
      model: this.options.model,
      messages: [{
        role: "system",
        content: "Eres un asistente legal que hace preguntas de seguimiento inteligentes."
      }, {
        role: "user",
        content: followUpPrompt
      }],
      temperature: 0.3,
      max_tokens: 300,
      stream: false
    }));
    const content =
    /* istanbul ignore next */
    (cov_k5221buk5().s[86]++,
    /* istanbul ignore next */
    (cov_k5221buk5().b[19][0]++, response.choices?.[0]?.message?.content) ||
    /* istanbul ignore next */
    (cov_k5221buk5().b[19][1]++, "Hay algn aspecto especfico que te gustara que profundice?"));
    /* istanbul ignore next */
    cov_k5221buk5().s[87]++;
    return {
      content,
      action: 'follow_up',
      metadata: {
        searchExecuted: false
      },
      memory: {
        messageId: `${this.options.chatId}-${Date.now()}`,
        timestamp: new Date()
      }
    };
  }
  /**
   * Genera respuesta usando contexto enriquecido
   */
  async generateResponseWithContext(userQuery, searchContext, chatContext) {
    /* istanbul ignore next */
    cov_k5221buk5().f[10]++;
    const systemPrompt =
    /* istanbul ignore next */
    (cov_k5221buk5().s[88]++, `Eres un asistente legal experto en derecho colombiano. Utiliza EXCLUSIVAMENTE la informacin proporcionada para responder la consulta del usuario.

${searchContext}

${chatContext ?
    /* istanbul ignore next */
    (cov_k5221buk5().b[20][0]++, `CONTEXTO DE CONVERSACIN:
${chatContext.currentContext}`) :
    /* istanbul ignore next */
    (cov_k5221buk5().b[20][1]++, '')}

INSTRUCCIONES:
1. Responde de manera completa y precisa
2. Usa terminologa jurdica apropiada
3. Incluye referencias a artculos y leyes cuando sea relevante
4. Proporciona informacin prctica y aplicable
5. Si hay informacin insuficiente, indcalo claramente
6. Responde en espaol colombiano`);
    const response =
    /* istanbul ignore next */
    (cov_k5221buk5().s[89]++, await this.options.client.chat.completions.create({
      model: this.options.model,
      messages: [{
        role: "system",
        content: systemPrompt
      }, {
        role: "user",
        content: `Consulta: "${userQuery}"`
      }],
      temperature: 0.2,
      max_tokens: 2000,
      stream: false
    }));
    /* istanbul ignore next */
    cov_k5221buk5().s[90]++;
    return /* istanbul ignore next */(cov_k5221buk5().b[21][0]++, response.choices?.[0]?.message?.content) ||
    /* istanbul ignore next */
    (cov_k5221buk5().b[21][1]++, "No pude generar una respuesta adecuada.");
  }
  /**
   * Parsea la decisin del agente desde JSON
   */
  parseAgentDecision(content) {
    /* istanbul ignore next */
    cov_k5221buk5().f[11]++;
    cov_k5221buk5().s[91]++;
    try {
      const jsonText =
      /* istanbul ignore next */
      (cov_k5221buk5().s[92]++, this.extractJson(content));
      const parsed =
      /* istanbul ignore next */
      (cov_k5221buk5().s[93]++, JSON.parse(jsonText));
      /* istanbul ignore next */
      cov_k5221buk5().s[94]++;
      return {
        action:
        /* istanbul ignore next */
        (cov_k5221buk5().b[22][0]++, parsed.action) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[22][1]++, 'search'),
        confidence:
        /* istanbul ignore next */
        (cov_k5221buk5().b[23][0]++, parsed.confidence) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[23][1]++, 0.5),
        reasoning:
        /* istanbul ignore next */
        (cov_k5221buk5().b[24][0]++, parsed.reasoning) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[24][1]++, 'Sin razonamiento proporcionado'),
        searchStrategy:
        /* istanbul ignore next */
        (cov_k5221buk5().b[25][0]++, parsed.searchStrategy) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[25][1]++, 'dynamic'),
        searchQueries:
        /* istanbul ignore next */
        (cov_k5221buk5().b[26][0]++, parsed.searchQueries) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[26][1]++, []),
        maxRounds:
        /* istanbul ignore next */
        (cov_k5221buk5().b[27][0]++, parsed.maxRounds) ||
        /* istanbul ignore next */
        (cov_k5221buk5().b[27][1]++, this.options.maxSearchRounds)
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_k5221buk5().s[95]++;
      console.error('Error parseando decisin del agente:', error);
      /* istanbul ignore next */
      cov_k5221buk5().s[96]++;
      return {
        action: 'search',
        confidence: 0.5,
        reasoning: 'Error parseando decisin, usando fallback',
        searchStrategy: 'dynamic',
        searchQueries: [],
        maxRounds: this.options.maxSearchRounds
      };
    }
  }
  /**
   * Extrae JSON del contenido
   */
  extractJson(content) {
    /* istanbul ignore next */
    cov_k5221buk5().f[12]++;
    const start =
    /* istanbul ignore next */
    (cov_k5221buk5().s[97]++, content.indexOf('{'));
    const end =
    /* istanbul ignore next */
    (cov_k5221buk5().s[98]++, content.lastIndexOf('}'));
    /* istanbul ignore next */
    cov_k5221buk5().s[99]++;
    if (
    /* istanbul ignore next */
    (cov_k5221buk5().b[29][0]++, start === -1) ||
    /* istanbul ignore next */
    (cov_k5221buk5().b[29][1]++, end === -1) ||
    /* istanbul ignore next */
    (cov_k5221buk5().b[29][2]++, end <= start)) {
      /* istanbul ignore next */
      cov_k5221buk5().b[28][0]++;
      cov_k5221buk5().s[100]++;
      throw new Error("JSON no encontrado en el contenido");
    } else
    /* istanbul ignore next */
    {
      cov_k5221buk5().b[28][1]++;
    }
    cov_k5221buk5().s[101]++;
    return content.slice(start, end + 1);
  }
  /**
   * Obtiene estadsticas del agente
   */
  async getAgentStats() {
    /* istanbul ignore next */
    cov_k5221buk5().f[13]++;
    const chatStats =
    /* istanbul ignore next */
    (cov_k5221buk5().s[102]++, await this.memoryManager.getMemoryStats(this.options.chatId, this.options.userId));
    /* istanbul ignore next */
    cov_k5221buk5().s[103]++;
    return {
      memoryEnabled: this.options.enableMemory,
      agenticSearchEnabled: this.options.enableAgenticSearch,
      maxSearchRounds: this.options.maxSearchRounds,
      chatStats
    };
  }
}
/* istanbul ignore next */
cov_k5221buk5().s[104]++;
exports.LegalAIAgent = LegalAIAgent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfazUyMjFidWs1IiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiY2hhdF9tZW1vcnlfbWFuYWdlcl8xIiwicmVxdWlyZSIsImR5bmFtaWNfc2VhcmNoX29yY2hlc3RyYXRvcl8xIiwibGVnYWxfc2VhcmNoX29yY2hlc3RyYXRvcl8xIiwibGVnYWxfc2VhcmNoX3BsYW5uZXJfMSIsIkxlZ2FsQUlBZ2VudCIsIm1lbW9yeU1hbmFnZXIiLCJvcHRpb25zIiwiY29uc3RydWN0b3IiLCJmIiwiQ2hhdE1lbW9yeU1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsInByb2Nlc3NRdWVyeSIsInVzZXJRdWVyeSIsIm1lc3NhZ2VJZCIsImNvbnNvbGUiLCJsb2ciLCJjaGF0SWQiLCJ1c2VySWQiLCJlbmFibGVNZW1vcnkiLCJiIiwiZW5hYmxlQWdlbnRpY1NlYXJjaCIsInJlcGVhdCIsImNoYXRDb250ZXh0IiwiZ2V0Q2hhdENvbnRleHQiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwibGVuZ3RoIiwiZGVjaXNpb24iLCJtYWtlQWdlbnRpY0RlY2lzaW9uIiwiYWN0aW9uIiwiY29uZmlkZW5jZSIsInRvRml4ZWQiLCJyZWFzb25pbmciLCJyZXNwb25zZSIsImV4ZWN1dGVTZWFyY2hBY3Rpb24iLCJleGVjdXRlUmVzcG9uZEFjdGlvbiIsImV4ZWN1dGVDbGFyaWZ5QWN0aW9uIiwiZXhlY3V0ZUZvbGxvd1VwQWN0aW9uIiwic2F2ZU1lc3NhZ2UiLCJjb250ZW50IiwibWV0YWRhdGEiLCJlcnJvciIsImVycm9yUmVzcG9uc2UiLCJzZWFyY2hFeGVjdXRlZCIsIm1lbW9yeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJjb250ZXh0SW5mbyIsImN1cnJlbnRDb250ZXh0Iiwic2VhcmNoSGlzdG9yeSIsInNsaWNlIiwibWFwIiwicXVlcnkiLCJyZXN1bHRzIiwicXVhbGl0eSIsImpvaW4iLCJ1c2VyUHJlZmVyZW5jZXMiLCJwcmVmZXJyZWRTZWFyY2hTdHJhdGVneSIsIm1heFNlYXJjaFJvdW5kcyIsImVuYWJsZU1vZGVsRGVjaXNpb24iLCJkZWNpc2lvblByb21wdCIsImNsaWVudCIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwic3RyZWFtIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJwYXJzZUFnZW50RGVjaXNpb24iLCJpbmNsdWRlcyIsInNlYXJjaFN0cmF0ZWd5Iiwic2VhcmNoUXVlcmllcyIsIm1heFJvdW5kcyIsInNlYXJjaFJlc3VsdCIsInJ1bkR5bmFtaWNTZWFyY2hXb3JrZmxvdyIsIm1heFNlYXJjaGVzUGVyUm91bmQiLCJzZWFyY2hUaW1lb3V0TXMiLCJzZWFyY2hSb3VuZHMiLCJ0b3RhbFJvdW5kcyIsInRvdGFsU2VhcmNoZXMiLCJ0b3RhbFJlc3VsdHMiLCJmaW5hbFF1YWxpdHkiLCJtb2RlbERlY2lzaW9ucyIsInNvdXJjZXMiLCJhbGxSZXN1bHRzIiwicmVzdWx0IiwidGl0bGUiLCJ1cmwiLCJ0eXBlIiwicmVjb3JkU2VhcmNoIiwiZ2VuZXJhdGVSZXNwb25zZVdpdGhDb250ZXh0IiwiZmluYWxDb250ZXh0Iiwibm93Iiwic2VhcmNoUGxhbiIsInBsYW5MZWdhbFNlYXJjaFN0cmF0ZWd5IiwibWF4UXVlcmllcyIsIndvcmtmbG93IiwicnVuTGVnYWxTZWFyY2hXb3JrZmxvdyIsIm1heFJlc3VsdHMiLCJtYXhBdHRlbXB0cyIsIk1hdGgiLCJtYXgiLCJxdWVyaWVzIiwiYXR0ZW1wdHMiLCJzb3VyY2UiLCJtb2RlbENvbnRleHQiLCJjbGFyaWZpY2F0aW9uUHJvbXB0IiwiZm9sbG93VXBQcm9tcHQiLCJzZWFyY2hDb250ZXh0Iiwic3lzdGVtUHJvbXB0IiwianNvblRleHQiLCJleHRyYWN0SnNvbiIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsInN0YXJ0IiwiaW5kZXhPZiIsImVuZCIsImxhc3RJbmRleE9mIiwiRXJyb3IiLCJnZXRBZ2VudFN0YXRzIiwiY2hhdFN0YXRzIiwiZ2V0TWVtb3J5U3RhdHMiLCJtZW1vcnlFbmFibGVkIiwiYWdlbnRpY1NlYXJjaEVuYWJsZWQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwZWRyb1xcRG9jdW1lbnRzXFxHaXRIdWJcXEFzaXN0ZW50ZS1MZWdhbC1JbnRlbGlnZW50ZVxcbGliXFxhZ2VudHNcXGxlZ2FsLWFpLWFnZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiXHJcbmltcG9ydCB7IENoYXRNZW1vcnlNYW5hZ2VyLCBDaGF0Q29udGV4dCB9IGZyb20gXCJAL2xpYi9tZW1vcnkvY2hhdC1tZW1vcnktbWFuYWdlclwiXHJcbmltcG9ydCB7IHJ1bkR5bmFtaWNTZWFyY2hXb3JrZmxvdyB9IGZyb20gXCJAL2xpYi90b29scy9keW5hbWljLXNlYXJjaC1vcmNoZXN0cmF0b3JcIlxyXG5pbXBvcnQgeyBydW5MZWdhbFNlYXJjaFdvcmtmbG93IH0gZnJvbSBcIkAvbGliL3Rvb2xzL2xlZ2FsLXNlYXJjaC1vcmNoZXN0cmF0b3JcIlxyXG5pbXBvcnQgeyBwbGFuTGVnYWxTZWFyY2hTdHJhdGVneSB9IGZyb20gXCJAL2xpYi90b29scy9sZWdhbC1zZWFyY2gtcGxhbm5lclwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFnZW50RGVjaXNpb24ge1xyXG4gIGFjdGlvbjogJ3NlYXJjaCcgfCAncmVzcG9uZCcgfCAnY2xhcmlmeScgfCAnZm9sbG93X3VwJ1xyXG4gIGNvbmZpZGVuY2U6IG51bWJlclxyXG4gIHJlYXNvbmluZzogc3RyaW5nXHJcbiAgc2VhcmNoU3RyYXRlZ3k/OiAnZHluYW1pYycgfCAndHJhZGl0aW9uYWwnIHwgJ2h5YnJpZCdcclxuICBzZWFyY2hRdWVyaWVzPzogc3RyaW5nW11cclxuICBtYXhSb3VuZHM/OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZ2VudFJlc3BvbnNlIHtcclxuICBjb250ZW50OiBzdHJpbmdcclxuICBhY3Rpb246IHN0cmluZ1xyXG4gIG1ldGFkYXRhOiB7XHJcbiAgICBzZWFyY2hFeGVjdXRlZDogYm9vbGVhblxyXG4gICAgc2VhcmNoUm91bmRzPzogbnVtYmVyXHJcbiAgICB0b3RhbFNlYXJjaGVzPzogbnVtYmVyXHJcbiAgICB0b3RhbFJlc3VsdHM/OiBudW1iZXJcclxuICAgIGZpbmFsUXVhbGl0eT86IG51bWJlclxyXG4gICAgbW9kZWxEZWNpc2lvbnM/OiBudW1iZXJcclxuICAgIHNlYXJjaFN0cmF0ZWd5Pzogc3RyaW5nXHJcbiAgICBzb3VyY2VzPzogQXJyYXk8e1xyXG4gICAgICB0aXRsZTogc3RyaW5nXHJcbiAgICAgIHVybDogc3RyaW5nXHJcbiAgICAgIHR5cGU6IHN0cmluZ1xyXG4gICAgICBxdWFsaXR5OiBudW1iZXJcclxuICAgIH0+XHJcbiAgfVxyXG4gIG1lbW9yeToge1xyXG4gICAgbWVzc2FnZUlkOiBzdHJpbmdcclxuICAgIHRpbWVzdGFtcDogRGF0ZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZ2VudE9wdGlvbnMge1xyXG4gIGNsaWVudDogT3BlbkFJXHJcbiAgbW9kZWw6IHN0cmluZ1xyXG4gIGNoYXRJZDogc3RyaW5nXHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICBlbmFibGVNZW1vcnk6IGJvb2xlYW5cclxuICBlbmFibGVBZ2VudGljU2VhcmNoOiBib29sZWFuXHJcbiAgbWF4U2VhcmNoUm91bmRzOiBudW1iZXJcclxuICBzZWFyY2hUaW1lb3V0TXM6IG51bWJlclxyXG59XHJcblxyXG4vKipcclxuICogQUkgQWdlbnQgY29uIGNhcGFjaWRhZGVzIGFnZW50aWNhcyBkZSBiw7pzcXVlZGEgeSBtZW1vcmlhXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTGVnYWxBSUFnZW50IHtcclxuICBwcml2YXRlIG1lbW9yeU1hbmFnZXI6IENoYXRNZW1vcnlNYW5hZ2VyXHJcbiAgcHJpdmF0ZSBvcHRpb25zOiBBZ2VudE9wdGlvbnNcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogQWdlbnRPcHRpb25zKSB7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXHJcbiAgICB0aGlzLm1lbW9yeU1hbmFnZXIgPSBDaGF0TWVtb3J5TWFuYWdlci5nZXRJbnN0YW5jZSgpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQcm9jZXNhIHVuYSBjb25zdWx0YSBkZWwgdXN1YXJpbyBjb24gY2FwYWNpZGFkZXMgYWdlbnRpY2FzXHJcbiAgICovXHJcbiAgYXN5bmMgcHJvY2Vzc1F1ZXJ5KFxyXG4gICAgdXNlclF1ZXJ5OiBzdHJpbmcsXHJcbiAgICBtZXNzYWdlSWQ6IHN0cmluZ1xyXG4gICk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xyXG4gICAgY29uc29sZS5sb2coYFxcbvCfpJYgQUkgQUdFTlQgUFJPQ0VTQU5ETyBDT05TVUxUQWApXHJcbiAgICBjb25zb2xlLmxvZyhg8J+TnSBRdWVyeTogXCIke3VzZXJRdWVyeX1cImApXHJcbiAgICBjb25zb2xlLmxvZyhg8J+SrCBDaGF0IElEOiAke3RoaXMub3B0aW9ucy5jaGF0SWR9YClcclxuICAgIGNvbnNvbGUubG9nKGDwn5GkIFVzZXIgSUQ6ICR7dGhpcy5vcHRpb25zLnVzZXJJZH1gKVxyXG4gICAgY29uc29sZS5sb2coYPCfp6AgTWVtb3JpYTogJHt0aGlzLm9wdGlvbnMuZW5hYmxlTWVtb3J5ID8gJ0FDVElWQURBJyA6ICdERVNBQ1RJVkFEQSd9YClcclxuICAgIGNvbnNvbGUubG9nKGDwn5SNIELDunNxdWVkYSBhZ2VudGljYTogJHt0aGlzLm9wdGlvbnMuZW5hYmxlQWdlbnRpY1NlYXJjaCA/ICdBQ1RJVkFEQScgOiAnREVTQUNUSVZBREEnfWApXHJcbiAgICBjb25zb2xlLmxvZyhgJHsnPScucmVwZWF0KDgwKX1gKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIDEuIENhcmdhciBjb250ZXh0byBkZSBtZW1vcmlhIHNpIGVzdMOhIGhhYmlsaXRhZG9cclxuICAgICAgbGV0IGNoYXRDb250ZXh0OiBDaGF0Q29udGV4dCB8IG51bGwgPSBudWxsXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlTWVtb3J5KSB7XHJcbiAgICAgICAgY2hhdENvbnRleHQgPSBhd2FpdCB0aGlzLm1lbW9yeU1hbmFnZXIuZ2V0Q2hhdENvbnRleHQoXHJcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuY2hhdElkLFxyXG4gICAgICAgICAgdGhpcy5vcHRpb25zLnVzZXJJZFxyXG4gICAgICAgIClcclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+noCBDb250ZXh0byBjYXJnYWRvOiAke2NoYXRDb250ZXh0LmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RofSBtZW5zYWplc2ApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDIuIFRvbWFyIGRlY2lzacOzbiBhZ2VudGljYSBzb2JyZSBxdcOpIGhhY2VyXHJcbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gYXdhaXQgdGhpcy5tYWtlQWdlbnRpY0RlY2lzaW9uKHVzZXJRdWVyeSwgY2hhdENvbnRleHQpXHJcbiAgICAgIGNvbnNvbGUubG9nKGDwn6SWIERlY2lzacOzbiBhZ2VudGljYTogJHtkZWNpc2lvbi5hY3Rpb259IChjb25maWFuemE6ICR7ZGVjaXNpb24uY29uZmlkZW5jZS50b0ZpeGVkKDIpfSlgKVxyXG4gICAgICBjb25zb2xlLmxvZyhg8J+SrSBSYXpvbmFtaWVudG86ICR7ZGVjaXNpb24ucmVhc29uaW5nfWApXHJcblxyXG4gICAgICAvLyAzLiBFamVjdXRhciBhY2Npw7NuIGJhc2FkYSBlbiBsYSBkZWNpc2nDs25cclxuICAgICAgbGV0IHJlc3BvbnNlOiBBZ2VudFJlc3BvbnNlXHJcblxyXG4gICAgICBzd2l0Y2ggKGRlY2lzaW9uLmFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ3NlYXJjaCc6XHJcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNlYXJjaEFjdGlvbih1c2VyUXVlcnksIGRlY2lzaW9uLCBjaGF0Q29udGV4dClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAncmVzcG9uZCc6XHJcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVJlc3BvbmRBY3Rpb24odXNlclF1ZXJ5LCBjaGF0Q29udGV4dClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnY2xhcmlmeSc6XHJcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUNsYXJpZnlBY3Rpb24odXNlclF1ZXJ5LCBjaGF0Q29udGV4dClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgY2FzZSAnZm9sbG93X3VwJzpcclxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5leGVjdXRlRm9sbG93VXBBY3Rpb24odXNlclF1ZXJ5LCBjaGF0Q29udGV4dClcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5leGVjdXRlUmVzcG9uZEFjdGlvbih1c2VyUXVlcnksIGNoYXRDb250ZXh0KVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyA0LiBHdWFyZGFyIGVuIG1lbW9yaWEgc2kgZXN0w6EgaGFiaWxpdGFkb1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZU1lbW9yeSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWVtb3J5TWFuYWdlci5zYXZlTWVzc2FnZShcclxuICAgICAgICAgIHRoaXMub3B0aW9ucy5jaGF0SWQsXHJcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudXNlcklkLFxyXG4gICAgICAgICAgbWVzc2FnZUlkLFxyXG4gICAgICAgICAgcmVzcG9uc2UuY29udGVudCxcclxuICAgICAgICAgICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgcmVzcG9uc2UubWV0YWRhdGFcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgUmVzcHVlc3RhIGdlbmVyYWRhOiAke3Jlc3BvbnNlLmNvbnRlbnQubGVuZ3RofSBjYXJhY3RlcmVzYClcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIGVuIEFJIEFnZW50OmAsIGVycm9yKVxyXG4gICAgICBcclxuICAgICAgLy8gUmVzcHVlc3RhIGRlIGVycm9yIGNvbiBmYWxsYmFja1xyXG4gICAgICBjb25zdCBlcnJvclJlc3BvbnNlOiBBZ2VudFJlc3BvbnNlID0ge1xyXG4gICAgICAgIGNvbnRlbnQ6IGBEaXNjdWxwYSwgaHVibyB1biBlcnJvciB0w6ljbmljbyBhbCBwcm9jZXNhciB0dSBjb25zdWx0YS4gUG9yIGZhdm9yLCBpbnRlbnRhIG51ZXZhbWVudGUuYCxcclxuICAgICAgICBhY3Rpb246ICdlcnJvcicsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIHNlYXJjaEV4ZWN1dGVkOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVtb3J5OiB7XHJcbiAgICAgICAgICBtZXNzYWdlSWQsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlTWVtb3J5KSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5tZW1vcnlNYW5hZ2VyLnNhdmVNZXNzYWdlKFxyXG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNoYXRJZCxcclxuICAgICAgICAgIHRoaXMub3B0aW9ucy51c2VySWQsXHJcbiAgICAgICAgICBtZXNzYWdlSWQsXHJcbiAgICAgICAgICBlcnJvclJlc3BvbnNlLmNvbnRlbnQsXHJcbiAgICAgICAgICAnYXNzaXN0YW50JyxcclxuICAgICAgICAgIGVycm9yUmVzcG9uc2UubWV0YWRhdGFcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBlcnJvclJlc3BvbnNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUb21hIHVuYSBkZWNpc2nDs24gYWdlbnRpY2Egc29icmUgcXXDqSBhY2Npw7NuIHJlYWxpemFyXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBtYWtlQWdlbnRpY0RlY2lzaW9uKFxyXG4gICAgdXNlclF1ZXJ5OiBzdHJpbmcsXHJcbiAgICBjaGF0Q29udGV4dDogQ2hhdENvbnRleHQgfCBudWxsXHJcbiAgKTogUHJvbWlzZTxBZ2VudERlY2lzaW9uPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjb250ZXh0SW5mbyA9IGNoYXRDb250ZXh0ID8gYFxyXG5ISVNUT1JJQUwgREUgQ09OVkVSU0FDScOTTjpcclxuJHtjaGF0Q29udGV4dC5jdXJyZW50Q29udGV4dH1cclxuXHJcbkLDmlNRVUVEQVMgQU5URVJJT1JFUzpcclxuJHtjaGF0Q29udGV4dC5zZWFyY2hIaXN0b3J5LnNsaWNlKC0zKS5tYXAocyA9PiBgLSBcIiR7cy5xdWVyeX1cIiAoJHtzLnJlc3VsdHN9IHJlc3VsdGFkb3MsIGNhbGlkYWQ6ICR7cy5xdWFsaXR5fS8xMClgKS5qb2luKCdcXG4nKX1cclxuXHJcblBSRUZFUkVOQ0lBUyBERUwgVVNVQVJJTzpcclxuLSBFc3RyYXRlZ2lhOiAke2NoYXRDb250ZXh0LnVzZXJQcmVmZXJlbmNlcy5wcmVmZXJyZWRTZWFyY2hTdHJhdGVneX1cclxuLSBNw6F4aW1vIGRlIHJvbmRhczogJHtjaGF0Q29udGV4dC51c2VyUHJlZmVyZW5jZXMubWF4U2VhcmNoUm91bmRzfVxyXG4tIERlY2lzacOzbiBkZWwgbW9kZWxvOiAke2NoYXRDb250ZXh0LnVzZXJQcmVmZXJlbmNlcy5lbmFibGVNb2RlbERlY2lzaW9uID8gJ0FjdGl2YWRhJyA6ICdEZXNhY3RpdmFkYSd9XHJcbmAgOiAnU2luIGhpc3RvcmlhbCBwcmV2aW8nXHJcblxyXG4gICAgICBjb25zdCBkZWNpc2lvblByb21wdCA9IGBFcmVzIHVuIGFnZW50ZSBkZSBJQSBsZWdhbCBleHBlcnRvIHF1ZSBkZWJlIGRlY2lkaXIgcXXDqSBhY2Npw7NuIHRvbWFyIHBhcmEgcmVzcG9uZGVyIHVuYSBjb25zdWx0YSBkZWwgdXN1YXJpby5cclxuXHJcbkNPTlNVTFRBIEFDVFVBTDogXCIke3VzZXJRdWVyeX1cIlxyXG5cclxuJHtjb250ZXh0SW5mb31cclxuXHJcbkNBUEFDSURBREVTIERJU1BPTklCTEVTOlxyXG4xLiAqKnNlYXJjaCoqOiBSZWFsaXphciBiw7pzcXVlZGEgd2ViIGRpbsOhbWljYSBjb24gbcO6bHRpcGxlcyByb25kYXNcclxuMi4gKipyZXNwb25kKio6IFJlc3BvbmRlciBkaXJlY3RhbWVudGUgY29uIGNvbm9jaW1pZW50byBleGlzdGVudGVcclxuMy4gKipjbGFyaWZ5Kio6IFBlZGlyIGFjbGFyYWNpb25lcyBhbCB1c3VhcmlvXHJcbjQuICoqZm9sbG93X3VwKio6IEhhY2VyIHByZWd1bnRhcyBkZSBzZWd1aW1pZW50b1xyXG5cclxuQ1JJVEVSSU9TIERFIERFQ0lTScOTTjpcclxuLSBTaSBsYSBjb25zdWx0YSByZXF1aWVyZSBpbmZvcm1hY2nDs24gYWN0dWFsaXphZGEgbyBlc3BlY8OtZmljYSDihpIgKipzZWFyY2gqKlxyXG4tIFNpIGxhIGNvbnN1bHRhIGVzIGdlbmVyYWwgeSB0aWVuZXMgY29ub2NpbWllbnRvIHN1ZmljaWVudGUg4oaSICoqcmVzcG9uZCoqXHJcbi0gU2kgbGEgY29uc3VsdGEgZXMgYW1iaWd1YSBvIGluY29tcGxldGEg4oaSICoqY2xhcmlmeSoqXHJcbi0gU2kgbmVjZXNpdGFzIG3DoXMgaW5mb3JtYWNpw7NuIHBhcmEgY29tcGxldGFyIGxhIHJlc3B1ZXN0YSDihpIgKipmb2xsb3dfdXAqKlxyXG5cclxuRVNUUkFURUdJQVMgREUgQsOaU1FVRURBOlxyXG4tICoqZHluYW1pYyoqOiBTaXN0ZW1hIGRlIGLDunNxdWVkYSBkaW7DoW1pY2EgKGhhc3RhIDEwIHJvbmRhcywgbW9kZWxvIGRlY2lkZSlcclxuLSAqKnRyYWRpdGlvbmFsKio6IFNpc3RlbWEgdHJhZGljaW9uYWwgKGhhc3RhIDUgcm9uZGFzLCBjcml0ZXJpb3MgZmlqb3MpXHJcbi0gKipoeWJyaWQqKjogQ29tYmluYWNpw7NuIGRlIGFtYm9zIHNpc3RlbWFzXHJcblxyXG5SZXNwb25kZSBlbiBmb3JtYXRvIEpTT046XHJcbntcclxuICBcImFjdGlvblwiOiBcInNlYXJjaHxyZXNwb25kfGNsYXJpZnl8Zm9sbG93X3VwXCIsXHJcbiAgXCJjb25maWRlbmNlXCI6IDAuMC0xLjAsXHJcbiAgXCJyZWFzb25pbmdcIjogXCJleHBsaWNhY2nDs24gZGV0YWxsYWRhIGRlIGxhIGRlY2lzacOzblwiLFxyXG4gIFwic2VhcmNoU3RyYXRlZ3lcIjogXCJkeW5hbWljfHRyYWRpdGlvbmFsfGh5YnJpZFwiLFxyXG4gIFwic2VhcmNoUXVlcmllc1wiOiBbXCJjb25zdWx0YSBlc3BlY8OtZmljYSAxXCIsIFwiY29uc3VsdGEgZXNwZWPDrWZpY2EgMlwiXSxcclxuICBcIm1heFJvdW5kc1wiOiA1LTEwXHJcbn1gXHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub3B0aW9ucy5jbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXHJcbiAgICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogZGVjaXNpb25Qcm9tcHQgfSxcclxuICAgICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGBBbmFsaXphIGxhIGNvbnN1bHRhIHkgZGVjaWRlIHF1w6kgYWNjacOzbiB0b21hcjogXCIke3VzZXJRdWVyeX1cImAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMSxcclxuICAgICAgICBtYXhfdG9rZW5zOiA4MDAsXHJcbiAgICAgICAgc3RyZWFtOiBmYWxzZVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nXHJcbiAgICAgIGNvbnN0IGRlY2lzaW9uID0gdGhpcy5wYXJzZUFnZW50RGVjaXNpb24oY29udGVudClcclxuXHJcbiAgICAgIC8vIFZhbGlkYXIgZGVjaXNpw7NuXHJcbiAgICAgIGlmICghZGVjaXNpb24uYWN0aW9uIHx8ICFbJ3NlYXJjaCcsICdyZXNwb25kJywgJ2NsYXJpZnknLCAnZm9sbG93X3VwJ10uaW5jbHVkZXMoZGVjaXNpb24uYWN0aW9uKSkge1xyXG4gICAgICAgIGRlY2lzaW9uLmFjdGlvbiA9ICdzZWFyY2gnIC8vIEZhbGxiYWNrIGEgYsO6c3F1ZWRhXHJcbiAgICAgICAgZGVjaXNpb24uY29uZmlkZW5jZSA9IDAuNVxyXG4gICAgICAgIGRlY2lzaW9uLnJlYXNvbmluZyA9ICdEZWNpc2nDs24gaW52w6FsaWRhLCB1c2FuZG8gZmFsbGJhY2sgYSBiw7pzcXVlZGEnXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBkZWNpc2lvblxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGRlY2lzacOzbiBhZ2VudGljYTonLCBlcnJvcilcclxuICAgICAgXHJcbiAgICAgIC8vIEZhbGxiYWNrIGEgYsO6c3F1ZWRhIGRpbsOhbWljYVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFjdGlvbjogJ3NlYXJjaCcsXHJcbiAgICAgICAgY29uZmlkZW5jZTogMC41LFxyXG4gICAgICAgIHJlYXNvbmluZzogJ0Vycm9yIGVuIGRlY2lzacOzbiBhZ2VudGljYSwgdXNhbmRvIGZhbGxiYWNrIGEgYsO6c3F1ZWRhJyxcclxuICAgICAgICBzZWFyY2hTdHJhdGVneTogJ2R5bmFtaWMnLFxyXG4gICAgICAgIHNlYXJjaFF1ZXJpZXM6IFt1c2VyUXVlcnldLFxyXG4gICAgICAgIG1heFJvdW5kczogdGhpcy5vcHRpb25zLm1heFNlYXJjaFJvdW5kc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFamVjdXRhIGFjY2nDs24gZGUgYsO6c3F1ZWRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlU2VhcmNoQWN0aW9uKFxyXG4gICAgdXNlclF1ZXJ5OiBzdHJpbmcsXHJcbiAgICBkZWNpc2lvbjogQWdlbnREZWNpc2lvbixcclxuICAgIGNoYXRDb250ZXh0OiBDaGF0Q29udGV4dCB8IG51bGxcclxuICApOiBQcm9taXNlPEFnZW50UmVzcG9uc2U+IHtcclxuICAgIGNvbnNvbGUubG9nKGDwn5SNIEVqZWN1dGFuZG8gYsO6c3F1ZWRhIGFnZW50aWNhIGNvbiBlc3RyYXRlZ2lhOiAke2RlY2lzaW9uLnNlYXJjaFN0cmF0ZWd5fWApXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHNlYXJjaFJlc3VsdDogYW55XHJcbiAgICAgIGxldCBtZXRhZGF0YTogQWdlbnRSZXNwb25zZVsnbWV0YWRhdGEnXVxyXG5cclxuICAgICAgaWYgKGRlY2lzaW9uLnNlYXJjaFN0cmF0ZWd5ID09PSAnZHluYW1pYycgfHwgZGVjaXNpb24uc2VhcmNoU3RyYXRlZ3kgPT09ICdoeWJyaWQnKSB7XHJcbiAgICAgICAgLy8gVXNhciBzaXN0ZW1hIGRlIGLDunNxdWVkYSBkaW7DoW1pY2FcclxuICAgICAgICBzZWFyY2hSZXN1bHQgPSBhd2FpdCBydW5EeW5hbWljU2VhcmNoV29ya2Zsb3codXNlclF1ZXJ5LCB7XHJcbiAgICAgICAgICBjbGllbnQ6IHRoaXMub3B0aW9ucy5jbGllbnQsXHJcbiAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxyXG4gICAgICAgICAgbWF4U2VhcmNoUm91bmRzOiBkZWNpc2lvbi5tYXhSb3VuZHMgfHwgdGhpcy5vcHRpb25zLm1heFNlYXJjaFJvdW5kcyxcclxuICAgICAgICAgIG1heFNlYXJjaGVzUGVyUm91bmQ6IDgsXHJcbiAgICAgICAgICBzZWFyY2hUaW1lb3V0TXM6IHRoaXMub3B0aW9ucy5zZWFyY2hUaW1lb3V0TXMsXHJcbiAgICAgICAgICBlbmFibGVNb2RlbERlY2lzaW9uOiB0cnVlXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICBzZWFyY2hFeGVjdXRlZDogdHJ1ZSxcclxuICAgICAgICAgIHNlYXJjaFJvdW5kczogc2VhcmNoUmVzdWx0Lm1ldGFkYXRhLnRvdGFsUm91bmRzLFxyXG4gICAgICAgICAgdG90YWxTZWFyY2hlczogc2VhcmNoUmVzdWx0Lm1ldGFkYXRhLnRvdGFsU2VhcmNoZXMsXHJcbiAgICAgICAgICB0b3RhbFJlc3VsdHM6IHNlYXJjaFJlc3VsdC5tZXRhZGF0YS50b3RhbFJlc3VsdHMsXHJcbiAgICAgICAgICBmaW5hbFF1YWxpdHk6IHNlYXJjaFJlc3VsdC5tZXRhZGF0YS5maW5hbFF1YWxpdHksXHJcbiAgICAgICAgICBtb2RlbERlY2lzaW9uczogc2VhcmNoUmVzdWx0Lm1ldGFkYXRhLm1vZGVsRGVjaXNpb25zLFxyXG4gICAgICAgICAgc2VhcmNoU3RyYXRlZ3k6IHNlYXJjaFJlc3VsdC5tZXRhZGF0YS5zZWFyY2hTdHJhdGVneSxcclxuICAgICAgICAgIHNvdXJjZXM6IHNlYXJjaFJlc3VsdC5hbGxSZXN1bHRzLnNsaWNlKDAsIDEwKS5tYXAoKHJlc3VsdDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICB0aXRsZTogcmVzdWx0LnRpdGxlLFxyXG4gICAgICAgICAgICB1cmw6IHJlc3VsdC51cmwsXHJcbiAgICAgICAgICAgIHR5cGU6IHJlc3VsdC50eXBlLFxyXG4gICAgICAgICAgICBxdWFsaXR5OiByZXN1bHQucXVhbGl0eVxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZWdpc3RyYXIgYsO6c3F1ZWRhIGVuIG1lbW9yaWFcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZU1lbW9yeSAmJiBjaGF0Q29udGV4dCkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5tZW1vcnlNYW5hZ2VyLnJlY29yZFNlYXJjaChcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNoYXRJZCxcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnVzZXJJZCxcclxuICAgICAgICAgICAgdXNlclF1ZXJ5LFxyXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHQubWV0YWRhdGEudG90YWxSZXN1bHRzLFxyXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHQubWV0YWRhdGEuZmluYWxRdWFsaXR5XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZW5lcmFyIHJlc3B1ZXN0YSB1c2FuZG8gZWwgY29udGV4dG8gZW5yaXF1ZWNpZG9cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVSZXNwb25zZVdpdGhDb250ZXh0KFxyXG4gICAgICAgICAgdXNlclF1ZXJ5LFxyXG4gICAgICAgICAgc2VhcmNoUmVzdWx0LmZpbmFsQ29udGV4dCxcclxuICAgICAgICAgIGNoYXRDb250ZXh0XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgY29udGVudDogcmVzcG9uc2UsXHJcbiAgICAgICAgICBhY3Rpb246ICdzZWFyY2gnLFxyXG4gICAgICAgICAgbWV0YWRhdGEsXHJcbiAgICAgICAgICBtZW1vcnk6IHtcclxuICAgICAgICAgICAgbWVzc2FnZUlkOiBgJHt0aGlzLm9wdGlvbnMuY2hhdElkfS0ke0RhdGUubm93KCl9YCxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBVc2FyIHNpc3RlbWEgdHJhZGljaW9uYWxcclxuICAgICAgICBjb25zdCBzZWFyY2hQbGFuID0gYXdhaXQgcGxhbkxlZ2FsU2VhcmNoU3RyYXRlZ3koe1xyXG4gICAgICAgICAgY2xpZW50OiB0aGlzLm9wdGlvbnMuY2xpZW50LFxyXG4gICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcclxuICAgICAgICAgIHVzZXJRdWVyeSxcclxuICAgICAgICAgIG1heFF1ZXJpZXM6IDVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IHJ1bkxlZ2FsU2VhcmNoV29ya2Zsb3codXNlclF1ZXJ5LCB7XHJcbiAgICAgICAgICBtYXhSZXN1bHRzOiA1LFxyXG4gICAgICAgICAgbWF4QXR0ZW1wdHM6IE1hdGgubWF4KHNlYXJjaFBsYW4ucXVlcmllcy5sZW5ndGggfHwgMCwgMSksXHJcbiAgICAgICAgICBzZWFyY2hUaW1lb3V0TXM6IHRoaXMub3B0aW9ucy5zZWFyY2hUaW1lb3V0TXMsXHJcbiAgICAgICAgICBzZWFyY2hRdWVyaWVzOiBzZWFyY2hQbGFuLnF1ZXJpZXNcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBtZXRhZGF0YSA9IHtcclxuICAgICAgICAgIHNlYXJjaEV4ZWN1dGVkOiB3b3JrZmxvdy5tZXRhZGF0YS5zZWFyY2hFeGVjdXRlZCxcclxuICAgICAgICAgIHNlYXJjaFJvdW5kczogMSxcclxuICAgICAgICAgIHRvdGFsU2VhcmNoZXM6IHdvcmtmbG93Lm1ldGFkYXRhLmF0dGVtcHRzLFxyXG4gICAgICAgICAgdG90YWxSZXN1bHRzOiB3b3JrZmxvdy5zb3VyY2VzLmxlbmd0aCxcclxuICAgICAgICAgIGZpbmFsUXVhbGl0eTogd29ya2Zsb3cuc291cmNlcy5sZW5ndGggPiAwID8gNyA6IDMsXHJcbiAgICAgICAgICBzZWFyY2hTdHJhdGVneTogJ1RSQURJVElPTkFMJyxcclxuICAgICAgICAgIHNvdXJjZXM6IHdvcmtmbG93LnNvdXJjZXMubWFwKHNvdXJjZSA9PiAoe1xyXG4gICAgICAgICAgICB0aXRsZTogc291cmNlLnRpdGxlLFxyXG4gICAgICAgICAgICB1cmw6IHNvdXJjZS51cmwsXHJcbiAgICAgICAgICAgIHR5cGU6IHNvdXJjZS50eXBlLFxyXG4gICAgICAgICAgICBxdWFsaXR5OiA3XHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXIgcmVzcHVlc3RhIHVzYW5kbyBlbCBjb250ZXh0byB0cmFkaWNpb25hbFxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVJlc3BvbnNlV2l0aENvbnRleHQoXHJcbiAgICAgICAgICB1c2VyUXVlcnksXHJcbiAgICAgICAgICB3b3JrZmxvdy5tb2RlbENvbnRleHQsXHJcbiAgICAgICAgICBjaGF0Q29udGV4dFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgYWN0aW9uOiAnc2VhcmNoJyxcclxuICAgICAgICAgIG1ldGFkYXRhLFxyXG4gICAgICAgICAgbWVtb3J5OiB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogYCR7dGhpcy5vcHRpb25zLmNoYXRJZH0tJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGLDunNxdWVkYSBhZ2VudGljYTonLCBlcnJvcilcclxuICAgICAgXHJcbiAgICAgIC8vIEZhbGxiYWNrIGEgcmVzcHVlc3RhIHNpbiBiw7pzcXVlZGFcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdlbmVyYXRlUmVzcG9uc2VXaXRoQ29udGV4dChcclxuICAgICAgICB1c2VyUXVlcnksXHJcbiAgICAgICAgJ0Vycm9yIGVuIGLDunNxdWVkYSwgcmVzcG9uZGllbmRvIGNvbiBjb25vY2ltaWVudG8gZ2VuZXJhbCcsXHJcbiAgICAgICAgY2hhdENvbnRleHRcclxuICAgICAgKVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjb250ZW50OiByZXNwb25zZSxcclxuICAgICAgICBhY3Rpb246ICdzZWFyY2gnLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBzZWFyY2hFeGVjdXRlZDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lbW9yeToge1xyXG4gICAgICAgICAgbWVzc2FnZUlkOiBgJHt0aGlzLm9wdGlvbnMuY2hhdElkfS0ke0RhdGUubm93KCl9YCxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRWplY3V0YSBhY2Npw7NuIGRlIHJlc3B1ZXN0YSBkaXJlY3RhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlUmVzcG9uZEFjdGlvbihcclxuICAgIHVzZXJRdWVyeTogc3RyaW5nLFxyXG4gICAgY2hhdENvbnRleHQ6IENoYXRDb250ZXh0IHwgbnVsbFxyXG4gICk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xyXG4gICAgY29uc29sZS5sb2coYPCfkqwgUmVzcG9uZGllbmRvIGRpcmVjdGFtZW50ZSBzaW4gYsO6c3F1ZWRhYClcclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVSZXNwb25zZVdpdGhDb250ZXh0KFxyXG4gICAgICB1c2VyUXVlcnksXHJcbiAgICAgICdSZXNwb25kZSB1c2FuZG8gdHUgY29ub2NpbWllbnRvIGxlZ2FsIGNvbG9tYmlhbm8gc2luIHJlYWxpemFyIGLDunNxdWVkYXMgd2ViJyxcclxuICAgICAgY2hhdENvbnRleHRcclxuICAgIClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb250ZW50OiByZXNwb25zZSxcclxuICAgICAgYWN0aW9uOiAncmVzcG9uZCcsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgc2VhcmNoRXhlY3V0ZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIG1lbW9yeToge1xyXG4gICAgICAgIG1lc3NhZ2VJZDogYCR7dGhpcy5vcHRpb25zLmNoYXRJZH0tJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVqZWN1dGEgYWNjacOzbiBkZSBhY2xhcmFjacOzblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZUNsYXJpZnlBY3Rpb24oXHJcbiAgICB1c2VyUXVlcnk6IHN0cmluZyxcclxuICAgIGNoYXRDb250ZXh0OiBDaGF0Q29udGV4dCB8IG51bGxcclxuICApOiBQcm9taXNlPEFnZW50UmVzcG9uc2U+IHtcclxuICAgIGNvbnNvbGUubG9nKGDinZMgU29saWNpdGFuZG8gYWNsYXJhY2nDs25gKVxyXG5cclxuICAgIGNvbnN0IGNsYXJpZmljYXRpb25Qcm9tcHQgPSBgTGEgY29uc3VsdGEgXCIke3VzZXJRdWVyeX1cIiBlcyBhbWJpZ3VhIG8gaW5jb21wbGV0YS4gR2VuZXJhIHVuYSBwcmVndW50YSBkZSBhY2xhcmFjacOzbiBlc3BlY8OtZmljYSBwYXJhIG9idGVuZXIgbcOhcyBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW8uYFxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBcIkVyZXMgdW4gYXNpc3RlbnRlIGxlZ2FsIHF1ZSBuZWNlc2l0YSBhY2xhcmFyIGNvbnN1bHRhcyBhbWJpZ3Vhcy5cIiB9LFxyXG4gICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGNsYXJpZmljYXRpb25Qcm9tcHQgfVxyXG4gICAgICBdLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICBtYXhfdG9rZW5zOiAzMDAsXHJcbiAgICAgIHN0cmVhbTogZmFsc2VcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IHJlc3BvbnNlLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCBcIsK/UG9kcsOtYXMgc2VyIG3DoXMgZXNwZWPDrWZpY28gZW4gdHUgY29uc3VsdGE/XCJcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb250ZW50LFxyXG4gICAgICBhY3Rpb246ICdjbGFyaWZ5JyxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBzZWFyY2hFeGVjdXRlZDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgbWVtb3J5OiB7XHJcbiAgICAgICAgbWVzc2FnZUlkOiBgJHt0aGlzLm9wdGlvbnMuY2hhdElkfS0ke0RhdGUubm93KCl9YCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRWplY3V0YSBhY2Npw7NuIGRlIHNlZ3VpbWllbnRvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlRm9sbG93VXBBY3Rpb24oXHJcbiAgICB1c2VyUXVlcnk6IHN0cmluZyxcclxuICAgIGNoYXRDb250ZXh0OiBDaGF0Q29udGV4dCB8IG51bGxcclxuICApOiBQcm9taXNlPEFnZW50UmVzcG9uc2U+IHtcclxuICAgIGNvbnNvbGUubG9nKGDwn5SEIEdlbmVyYW5kbyBwcmVndW50YSBkZSBzZWd1aW1pZW50b2ApXHJcblxyXG4gICAgY29uc3QgZm9sbG93VXBQcm9tcHQgPSBgQmFzw6FuZG90ZSBlbiBsYSBjb25zdWx0YSBcIiR7dXNlclF1ZXJ5fVwiIHkgZWwgY29udGV4dG8gZGUgY29udmVyc2FjacOzbiwgZ2VuZXJhIHVuYSBwcmVndW50YSBkZSBzZWd1aW1pZW50byDDunRpbCBwYXJhIG9idGVuZXIgbcOhcyBpbmZvcm1hY2nDs24gZXNwZWPDrWZpY2EuYFxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5vcHRpb25zLmNsaWVudC5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXHJcbiAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBcIkVyZXMgdW4gYXNpc3RlbnRlIGxlZ2FsIHF1ZSBoYWNlIHByZWd1bnRhcyBkZSBzZWd1aW1pZW50byBpbnRlbGlnZW50ZXMuXCIgfSxcclxuICAgICAgICB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBmb2xsb3dVcFByb21wdCB9XHJcbiAgICAgIF0sXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXHJcbiAgICAgIG1heF90b2tlbnM6IDMwMCxcclxuICAgICAgc3RyZWFtOiBmYWxzZVxyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCBjb250ZW50ID0gcmVzcG9uc2UuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8IFwiwr9IYXkgYWxnw7puIGFzcGVjdG8gZXNwZWPDrWZpY28gcXVlIHRlIGd1c3RhcsOtYSBxdWUgcHJvZnVuZGljZT9cIlxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvbnRlbnQsXHJcbiAgICAgIGFjdGlvbjogJ2ZvbGxvd191cCcsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgc2VhcmNoRXhlY3V0ZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIG1lbW9yeToge1xyXG4gICAgICAgIG1lc3NhZ2VJZDogYCR7dGhpcy5vcHRpb25zLmNoYXRJZH0tJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYSByZXNwdWVzdGEgdXNhbmRvIGNvbnRleHRvIGVucmlxdWVjaWRvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVJlc3BvbnNlV2l0aENvbnRleHQoXHJcbiAgICB1c2VyUXVlcnk6IHN0cmluZyxcclxuICAgIHNlYXJjaENvbnRleHQ6IHN0cmluZyxcclxuICAgIGNoYXRDb250ZXh0OiBDaGF0Q29udGV4dCB8IG51bGxcclxuICApOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYEVyZXMgdW4gYXNpc3RlbnRlIGxlZ2FsIGV4cGVydG8gZW4gZGVyZWNobyBjb2xvbWJpYW5vLiBVdGlsaXphIEVYQ0xVU0lWQU1FTlRFIGxhIGluZm9ybWFjacOzbiBwcm9wb3JjaW9uYWRhIHBhcmEgcmVzcG9uZGVyIGxhIGNvbnN1bHRhIGRlbCB1c3VhcmlvLlxyXG5cclxuJHtzZWFyY2hDb250ZXh0fVxyXG5cclxuJHtjaGF0Q29udGV4dCA/IGBDT05URVhUTyBERSBDT05WRVJTQUNJw5NOOlxyXG4ke2NoYXRDb250ZXh0LmN1cnJlbnRDb250ZXh0fWAgOiAnJ31cclxuXHJcbklOU1RSVUNDSU9ORVM6XHJcbjEuIFJlc3BvbmRlIGRlIG1hbmVyYSBjb21wbGV0YSB5IHByZWNpc2FcclxuMi4gVXNhIHRlcm1pbm9sb2fDrWEganVyw61kaWNhIGFwcm9waWFkYVxyXG4zLiBJbmNsdXllIHJlZmVyZW5jaWFzIGEgYXJ0w61jdWxvcyB5IGxleWVzIGN1YW5kbyBzZWEgcmVsZXZhbnRlXHJcbjQuIFByb3BvcmNpb25hIGluZm9ybWFjacOzbiBwcsOhY3RpY2EgeSBhcGxpY2FibGVcclxuNS4gU2kgaGF5IGluZm9ybWFjacOzbiBpbnN1ZmljaWVudGUsIGluZMOtY2FsbyBjbGFyYW1lbnRlXHJcbjYuIFJlc3BvbmRlIGVuIGVzcGHDsW9sIGNvbG9tYmlhbm9gXHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm9wdGlvbnMuY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcclxuICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcclxuICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LFxyXG4gICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGBDb25zdWx0YTogXCIke3VzZXJRdWVyeX1cImAgfVxyXG4gICAgICBdLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogMC4yLFxyXG4gICAgICBtYXhfdG9rZW5zOiAyMDAwLFxyXG4gICAgICBzdHJlYW06IGZhbHNlXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgXCJObyBwdWRlIGdlbmVyYXIgdW5hIHJlc3B1ZXN0YSBhZGVjdWFkYS5cIlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2VhIGxhIGRlY2lzacOzbiBkZWwgYWdlbnRlIGRlc2RlIEpTT05cclxuICAgKi9cclxuICBwcml2YXRlIHBhcnNlQWdlbnREZWNpc2lvbihjb250ZW50OiBzdHJpbmcpOiBBZ2VudERlY2lzaW9uIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGpzb25UZXh0ID0gdGhpcy5leHRyYWN0SnNvbihjb250ZW50KVxyXG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25UZXh0KVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhY3Rpb246IHBhcnNlZC5hY3Rpb24gfHwgJ3NlYXJjaCcsXHJcbiAgICAgICAgY29uZmlkZW5jZTogcGFyc2VkLmNvbmZpZGVuY2UgfHwgMC41LFxyXG4gICAgICAgIHJlYXNvbmluZzogcGFyc2VkLnJlYXNvbmluZyB8fCAnU2luIHJhem9uYW1pZW50byBwcm9wb3JjaW9uYWRvJyxcclxuICAgICAgICBzZWFyY2hTdHJhdGVneTogcGFyc2VkLnNlYXJjaFN0cmF0ZWd5IHx8ICdkeW5hbWljJyxcclxuICAgICAgICBzZWFyY2hRdWVyaWVzOiBwYXJzZWQuc2VhcmNoUXVlcmllcyB8fCBbXSxcclxuICAgICAgICBtYXhSb3VuZHM6IHBhcnNlZC5tYXhSb3VuZHMgfHwgdGhpcy5vcHRpb25zLm1heFNlYXJjaFJvdW5kc1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzZWFuZG8gZGVjaXNpw7NuIGRlbCBhZ2VudGU6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgYWN0aW9uOiAnc2VhcmNoJyxcclxuICAgICAgICBjb25maWRlbmNlOiAwLjUsXHJcbiAgICAgICAgcmVhc29uaW5nOiAnRXJyb3IgcGFyc2VhbmRvIGRlY2lzacOzbiwgdXNhbmRvIGZhbGxiYWNrJyxcclxuICAgICAgICBzZWFyY2hTdHJhdGVneTogJ2R5bmFtaWMnLFxyXG4gICAgICAgIHNlYXJjaFF1ZXJpZXM6IFtdLFxyXG4gICAgICAgIG1heFJvdW5kczogdGhpcy5vcHRpb25zLm1heFNlYXJjaFJvdW5kc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRyYWUgSlNPTiBkZWwgY29udGVuaWRvXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBleHRyYWN0SnNvbihjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc3RhcnQgPSBjb250ZW50LmluZGV4T2YoJ3snKVxyXG4gICAgY29uc3QgZW5kID0gY29udGVudC5sYXN0SW5kZXhPZignfScpXHJcbiAgICBpZiAoc3RhcnQgPT09IC0xIHx8IGVuZCA9PT0gLTEgfHwgZW5kIDw9IHN0YXJ0KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkpTT04gbm8gZW5jb250cmFkbyBlbiBlbCBjb250ZW5pZG9cIilcclxuICAgIH1cclxuICAgIHJldHVybiBjb250ZW50LnNsaWNlKHN0YXJ0LCBlbmQgKyAxKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2J0aWVuZSBlc3RhZMOtc3RpY2FzIGRlbCBhZ2VudGVcclxuICAgKi9cclxuICBhc3luYyBnZXRBZ2VudFN0YXRzKCk6IFByb21pc2U8e1xyXG4gICAgbWVtb3J5RW5hYmxlZDogYm9vbGVhblxyXG4gICAgYWdlbnRpY1NlYXJjaEVuYWJsZWQ6IGJvb2xlYW5cclxuICAgIG1heFNlYXJjaFJvdW5kczogbnVtYmVyXHJcbiAgICBjaGF0U3RhdHM6IHtcclxuICAgICAgdG90YWxNZXNzYWdlczogbnVtYmVyXHJcbiAgICAgIHRvdGFsU2VhcmNoZXM6IG51bWJlclxyXG4gICAgICBhdmVyYWdlUXVhbGl0eTogbnVtYmVyXHJcbiAgICAgIGxhc3RBY3Rpdml0eTogRGF0ZSB8IG51bGxcclxuICAgIH1cclxuICB9PiB7XHJcbiAgICBjb25zdCBjaGF0U3RhdHMgPSBhd2FpdCB0aGlzLm1lbW9yeU1hbmFnZXIuZ2V0TWVtb3J5U3RhdHMoXHJcbiAgICAgIHRoaXMub3B0aW9ucy5jaGF0SWQsXHJcbiAgICAgIHRoaXMub3B0aW9ucy51c2VySWRcclxuICAgIClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZW1vcnlFbmFibGVkOiB0aGlzLm9wdGlvbnMuZW5hYmxlTWVtb3J5LFxyXG4gICAgICBhZ2VudGljU2VhcmNoRW5hYmxlZDogdGhpcy5vcHRpb25zLmVuYWJsZUFnZW50aWNTZWFyY2gsXHJcbiAgICAgIG1heFNlYXJjaFJvdW5kczogdGhpcy5vcHRpb25zLm1heFNlYXJjaFJvdW5kcyxcclxuICAgICAgY2hhdFN0YXRzXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBMkRRO0lBQUFBLGFBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGFBQUE7QUFBQUEs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QUFBM0gsYUFBQSxHQUFBRSxDQUFBLFFBQUd3QyxPQUFPLENBQUNrRixPQUFPLENBQUMsR0FBRyxDQUFDO0lBQ2xDLE1BQU1DLEdBQUc7SUFBQTtJQUFBLENBQUE3SCxhQUFBLEdBQUFFLENBQUEsUUFBR3dDLE9BQU8sQ0FBQ29GLFdBQVcsQ0FBQyxHQUFHLENBQUM7SUFBQTtJQUFBOUgsYUFBQSxHQUFBRSxDQUFBO0lBQ3BDO0lBQUk7SUFBQSxDQUFBRixhQUFBLEdBQUF1QixDQUFBLFdBQUFvRyxLQUFLLEtBQUssQ0FBQyxDQUFDO0lBQUE7SUFBQSxDQUFBM0gsYUFBQSxHQUFBdUIsQ0FBQSxXQUFJc0csR0FBRyxLQUFLLENBQUMsQ0FBQztJQUFBO0lBQUEsQ0FBQTdILGFBQUEsR0FBQXVCLENBQUEsV0FBSXNHLEdBQUcsSUFBSUYsS0FBSyxHQUFFO01BQUE7TUFBQTNILGFBQUEsR0FBQXVCLENBQUE7TUFBQXZCLGFBQUEsR0FBQUUsQ0FBQTtNQUM5QyxNQUFNLElBQUk2SCxLQUFLLENBQUMsb0NBQW9DLENBQUM7SUFDdkQsQ0FBQztJQUFBO0lBQUE7TUFBQS9ILGFBQUEsR0FBQXVCLENBQUE7SUFBQTtJQUFBdkIsYUFBQSxHQUFBRSxDQUFBO0lBQ0QsT0FBT3dDLE9BQU8sQ0FBQ1csS0FBSyxDQUFDc0UsS0FBSyxFQUFFRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3RDO0VBRUE7OztFQUdBLE1BQU1HLGFBQWFBLENBQUE7SUFBQTtJQUFBaEksYUFBQSxHQUFBWSxDQUFBO0lBV2pCLE1BQU1xSCxTQUFTO0lBQUE7SUFBQSxDQUFBakksYUFBQSxHQUFBRSxDQUFBLFNBQUcsTUFBTSxJQUFJLENBQUNPLGFBQWEsQ0FBQ3lILGNBQWMsQ0FDdkQsSUFBSSxDQUFDeEgsT0FBTyxDQUFDVSxNQUFNLEVBQ25CLElBQUksQ0FBQ1YsT0FBTyxDQUFDVyxNQUFNLENBQ3BCO0lBQUE7SUFBQXJCLGFBQUEsR0FBQUUsQ0FBQTtJQUVELE9BQU87TUFDTGlJLGFBQWEsRUFBRSxJQUFJLENBQUN6SCxPQUFPLENBQUNZLFlBQVk7TUFDeEM4RyxvQkFBb0IsRUFBRSxJQUFJLENBQUMxSCxPQUFPLENBQUNjLG1CQUFtQjtNQUN0RHFDLGVBQWUsRUFBRSxJQUFJLENBQUNuRCxPQUFPLENBQUNtRCxlQUFlO01BQzdDb0U7S0FDRDtFQUNIOztBQUNEO0FBQUFqSSxhQUFBLEdBQUFFLENBQUE7QUFsaUJEbUksT0FBQSxDQUFBN0gsWUFBQSxHQUFBQSxZQUFBIiwiaWdub3JlTGlzdCI6W119