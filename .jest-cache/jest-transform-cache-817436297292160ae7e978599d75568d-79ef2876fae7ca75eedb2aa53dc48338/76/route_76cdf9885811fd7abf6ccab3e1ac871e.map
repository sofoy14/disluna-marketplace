{"version":3,"names":["cov_je8f6rjer","actualCoverage","s","exports","POST","GET","server_1","require","request","f","query","type","b","json","NextResponse","error","status","searchUrl","encodeURIComponent","response","fetch","data","webSearchUrl","searchResults","abstract","Abstract","abstractText","AbstractText","abstractURL","AbstractURL","answer","Answer","answerType","AnswerType","definition","Definition","definitionURL","DefinitionURL","entity","Entity","heading","Heading","image","Image","infobox","Infobox","redirect","Redirect","relatedTopics","RelatedTopics","results","Results","Type","success","console","searchParams","URL","url","get"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\search\\route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { query, type = 'web' } = await request.json()\r\n\r\n    if (!query) {\r\n      return NextResponse.json({ error: 'Query is required' }, { status: 400 })\r\n    }\r\n\r\n    // Usar DuckDuckGo Instant Answer API (gratuita y no requiere API key)\r\n    const searchUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`\r\n    \r\n    const response = await fetch(searchUrl)\r\n    const data = await response.json()\r\n\r\n    // También hacer búsqueda web con DuckDuckGo\r\n    const webSearchUrl = `https://html.duckduckgo.com/html/?q=${encodeURIComponent(query)}`\r\n    \r\n    // Para búsqueda web más completa, podemos usar una API alternativa\r\n    // Por ahora, usaremos los resultados de DuckDuckGo Instant Answer\r\n    \r\n    const searchResults = {\r\n      query,\r\n      abstract: data.Abstract || '',\r\n      abstractText: data.AbstractText || '',\r\n      abstractURL: data.AbstractURL || '',\r\n      answer: data.Answer || '',\r\n      answerType: data.AnswerType || '',\r\n      definition: data.Definition || '',\r\n      definitionURL: data.DefinitionURL || '',\r\n      entity: data.Entity || '',\r\n      heading: data.Heading || '',\r\n      image: data.Image || '',\r\n      infobox: data.Infobox || {},\r\n      redirect: data.Redirect || '',\r\n      relatedTopics: data.RelatedTopics || [],\r\n      results: data.Results || [],\r\n      type: data.Type || '',\r\n      webSearchUrl: webSearchUrl\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: searchResults\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Search API error:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to perform search' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// También crear un endpoint GET para búsquedas simples\r\nexport async function GET(request: NextRequest) {\r\n  const { searchParams } = new URL(request.url)\r\n  const query = searchParams.get('q')\r\n\r\n  if (!query) {\r\n    return NextResponse.json({ error: 'Query parameter \"q\" is required' }, { status: 400 })\r\n  }\r\n\r\n  try {\r\n    const searchUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`\r\n    \r\n    const response = await fetch(searchUrl)\r\n    const data = await response.json()\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      query,\r\n      data\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Search API error:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to perform search' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]}