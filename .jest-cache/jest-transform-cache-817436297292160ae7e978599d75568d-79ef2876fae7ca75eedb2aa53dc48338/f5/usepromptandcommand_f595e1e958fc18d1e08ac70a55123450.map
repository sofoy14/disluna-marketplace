{"version":3,"names":["cov_e7miorczs","actualCoverage","s","context_1","require","assistant_collections_1","assistant_files_1","assistant_tools_1","collection_files_1","react_1","usePromptAndCommand","f","chatFiles","setNewMessageFiles","userInput","setUserInput","setShowFilesDisplay","setIsPromptPickerOpen","setIsFilePickerOpen","setSlashCommand","setHashtagCommand","setUseRetrieval","setToolCommand","setIsToolPickerOpen","setSelectedTools","setAtCommand","setIsAssistantPickerOpen","setSelectedAssistant","setChatSettings","setChatFiles","useContext","ChatbotUIContext","handleInputChange","value","atTextRegex","slashTextRegex","hashtagTextRegex","toolTextRegex","atMatch","match","slashMatch","hashtagMatch","toolMatch","b","handleSelectPrompt","prompt","replace","content","handleSelectUserFile","file","prev","fileAlreadySelected","some","prevFile","id","chatFile","name","type","handleSelectUserCollection","collection","collectionFiles","getCollectionFilesByCollectionId","newFiles","files","filter","map","handleSelectTool","tool","handleSelectAssistant","assistant","model","temperature","contextLength","context_length","includeProfileContext","include_profile_context","includeWorkspaceInstructions","include_workspace_instructions","embeddingsProvider","embeddings_provider","allFiles","assistantFiles","getAssistantFilesByAssistantId","assistantCollections","getAssistantCollectionsByAssistantId","collections","assistantTools","getAssistantToolsByAssistantId","tools","length","exports"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\components\\chat\\chat-hooks\\use-prompt-and-command.tsx"],"sourcesContent":["import { ChatbotUIContext } from \"@/context/context\"\r\nimport { getAssistantCollectionsByAssistantId } from \"@/db/assistant-collections\"\r\nimport { getAssistantFilesByAssistantId } from \"@/db/assistant-files\"\r\nimport { getAssistantToolsByAssistantId } from \"@/db/assistant-tools\"\r\nimport { getCollectionFilesByCollectionId } from \"@/db/collection-files\"\r\nimport { Tables } from \"@/supabase/types\"\r\nimport { LLMID } from \"@/types\"\r\nimport { useContext } from \"react\"\r\n\r\nexport const usePromptAndCommand = () => {\r\n  const {\r\n    chatFiles,\r\n    setNewMessageFiles,\r\n    userInput,\r\n    setUserInput,\r\n    setShowFilesDisplay,\r\n    setIsPromptPickerOpen,\r\n    setIsFilePickerOpen,\r\n    setSlashCommand,\r\n    setHashtagCommand,\r\n    setUseRetrieval,\r\n    setToolCommand,\r\n    setIsToolPickerOpen,\r\n    setSelectedTools,\r\n    setAtCommand,\r\n    setIsAssistantPickerOpen,\r\n    setSelectedAssistant,\r\n    setChatSettings,\r\n    setChatFiles\r\n  } = useContext(ChatbotUIContext)\r\n\r\n  const handleInputChange = (value: string) => {\r\n    const atTextRegex = /@([^ ]*)$/\r\n    const slashTextRegex = /\\/([^ ]*)$/\r\n    const hashtagTextRegex = /#([^ ]*)$/\r\n    const toolTextRegex = /!([^ ]*)$/\r\n    const atMatch = value.match(atTextRegex)\r\n    const slashMatch = value.match(slashTextRegex)\r\n    const hashtagMatch = value.match(hashtagTextRegex)\r\n    const toolMatch = value.match(toolTextRegex)\r\n\r\n    if (atMatch) {\r\n      setIsAssistantPickerOpen(true)\r\n      setAtCommand(atMatch[1])\r\n    } else if (slashMatch) {\r\n      setIsPromptPickerOpen(true)\r\n      setSlashCommand(slashMatch[1])\r\n    } else if (hashtagMatch) {\r\n      setIsFilePickerOpen(true)\r\n      setHashtagCommand(hashtagMatch[1])\r\n    } else if (toolMatch) {\r\n      setIsToolPickerOpen(true)\r\n      setToolCommand(toolMatch[1])\r\n    } else {\r\n      setIsPromptPickerOpen(false)\r\n      setIsFilePickerOpen(false)\r\n      setIsToolPickerOpen(false)\r\n      setIsAssistantPickerOpen(false)\r\n      setSlashCommand(\"\")\r\n      setHashtagCommand(\"\")\r\n      setToolCommand(\"\")\r\n      setAtCommand(\"\")\r\n    }\r\n\r\n    setUserInput(value)\r\n  }\r\n\r\n  const handleSelectPrompt = (prompt: Tables<\"prompts\">) => {\r\n    setIsPromptPickerOpen(false)\r\n    setUserInput(userInput.replace(/\\/[^ ]*$/, \"\") + prompt.content)\r\n  }\r\n\r\n  const handleSelectUserFile = async (file: Tables<\"files\">) => {\r\n    setShowFilesDisplay(true)\r\n    setIsFilePickerOpen(false)\r\n    setUseRetrieval(true)\r\n\r\n    setNewMessageFiles(prev => {\r\n      const fileAlreadySelected =\r\n        prev.some(prevFile => prevFile.id === file.id) ||\r\n        chatFiles.some(chatFile => chatFile.id === file.id)\r\n\r\n      if (!fileAlreadySelected) {\r\n        return [\r\n          ...prev,\r\n          {\r\n            id: file.id,\r\n            name: file.name,\r\n            type: file.type,\r\n            file: null\r\n          }\r\n        ]\r\n      }\r\n      return prev\r\n    })\r\n\r\n    setUserInput(userInput.replace(/#[^ ]*$/, \"\"))\r\n  }\r\n\r\n  const handleSelectUserCollection = async (\r\n    collection: Tables<\"collections\">\r\n  ) => {\r\n    setShowFilesDisplay(true)\r\n    setIsFilePickerOpen(false)\r\n    setUseRetrieval(true)\r\n\r\n    const collectionFiles = await getCollectionFilesByCollectionId(\r\n      collection.id\r\n    )\r\n\r\n    setNewMessageFiles(prev => {\r\n      const newFiles = collectionFiles.files\r\n        .filter(\r\n          file =>\r\n            !prev.some(prevFile => prevFile.id === file.id) &&\r\n            !chatFiles.some(chatFile => chatFile.id === file.id)\r\n        )\r\n        .map(file => ({\r\n          id: file.id,\r\n          name: file.name,\r\n          type: file.type,\r\n          file: null\r\n        }))\r\n\r\n      return [...prev, ...newFiles]\r\n    })\r\n\r\n    setUserInput(userInput.replace(/#[^ ]*$/, \"\"))\r\n  }\r\n\r\n  const handleSelectTool = (tool: Tables<\"tools\">) => {\r\n    setIsToolPickerOpen(false)\r\n    setUserInput(userInput.replace(/![^ ]*$/, \"\"))\r\n    setSelectedTools(prev => [...prev, tool])\r\n  }\r\n\r\n  const handleSelectAssistant = async (assistant: Tables<\"assistants\">) => {\r\n    setIsAssistantPickerOpen(false)\r\n    setUserInput(userInput.replace(/@[^ ]*$/, \"\"))\r\n    setSelectedAssistant(assistant)\r\n\r\n    setChatSettings({\r\n      model: assistant.model as LLMID,\r\n      prompt: assistant.prompt,\r\n      temperature: assistant.temperature,\r\n      contextLength: assistant.context_length,\r\n      includeProfileContext: assistant.include_profile_context,\r\n      includeWorkspaceInstructions: assistant.include_workspace_instructions,\r\n      embeddingsProvider: assistant.embeddings_provider as \"openai\" | \"local\"\r\n    })\r\n\r\n    let allFiles = []\r\n\r\n    const assistantFiles = (await getAssistantFilesByAssistantId(assistant.id))\r\n      .files\r\n    allFiles = [...assistantFiles]\r\n    const assistantCollections = (\r\n      await getAssistantCollectionsByAssistantId(assistant.id)\r\n    ).collections\r\n    for (const collection of assistantCollections) {\r\n      const collectionFiles = (\r\n        await getCollectionFilesByCollectionId(collection.id)\r\n      ).files\r\n      allFiles = [...allFiles, ...collectionFiles]\r\n    }\r\n    const assistantTools = (await getAssistantToolsByAssistantId(assistant.id))\r\n      .tools\r\n\r\n    setSelectedTools(assistantTools)\r\n    setChatFiles(\r\n      allFiles.map(file => ({\r\n        id: file.id,\r\n        name: file.name,\r\n        type: file.type,\r\n        file: null\r\n      }))\r\n    )\r\n\r\n    if (allFiles.length > 0) setShowFilesDisplay(true)\r\n  }\r\n\r\n  return {\r\n    handleInputChange,\r\n    handleSelectPrompt,\r\n    handleSelectUserFile,\r\n    handleSelectUserCollection,\r\n    handleSelectTool,\r\n    handleSelectAssistant\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}