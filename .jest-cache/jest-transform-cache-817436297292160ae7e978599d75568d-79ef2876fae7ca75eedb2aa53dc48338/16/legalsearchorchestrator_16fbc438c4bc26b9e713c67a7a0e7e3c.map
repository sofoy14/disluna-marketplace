{"version":3,"names":["cov_80dj214z5","actualCoverage","s","exports","runLegalSearchWorkflow","legal_agent_1","require","DEFAULT_MAX_SEARCH_ATTEMPTS","DEFAULT_SEARCH_TIMEOUT_MS","DEFAULT_MAX_RESULTS","SearchTimeoutError","Error","constructor","message","f","name","userQuery","options","detection","detectLegalQuery","logLegalDetection","plannedQueries","sanitizeQueries","searchQueries","shouldSearch","b","requiresWebSearch","length","baseQuery","normalizeLegalQuery","queriesToTry","planBasedMax","maxAttempts","maxResults","timeoutMs","searchTimeoutMs","executedQueries","aggregatedResults","attempts","timedOut","errorMessage","lastResponse","start","Date","now","query","trimmedQuery","trim","push","response","withTimeout","searchLegalSpecialized","success","results","mergeResults","error","durationMs","searchExecuted","searchSuccessful","finalResponse","buildAggregatedResponse","sources","mapSourcesForResponse","modelContext","buildModelContext","searchResponse","metadata","promise","timeoutHandle","timeoutPromise","Promise","_","reject","setTimeout","race","clearTimeout","limitedResults","slice","map","item","url","timestamp","toISOString","searchStrategy","params","reason","confidence","toFixed","join","failureReason","summary","formatLegalSearchContext","headerLines","resultsBlock","formatResultsForPrompt","verificationBlock","buildVerificationChecklist","result","index","label","getSourceLabel","type","hostname","extractHostname","snippet","sanitizeSnippet","title","URL","_error","replace","accumulator","incoming","seenUrls","Set","has","add","sort","a","relevance","queries","filter","lines","forEach","references","extractLegalReferences","text","patterns","matches","pattern","found","match","normalizeReference","Array","from","reference","toLowerCase"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\tools\\legal-search-orchestrator.ts"],"sourcesContent":["import { formatLegalSearchContext, normalizeLegalQuery } from \"@/lib/prompts/legal-agent\"\n// ELIMINADO - archivos movidos durante refactorizaci√≥n\n// import {\n//   detectLegalQuery,\n//   logLegalDetection,\n//   LegalDetectionResult,\n// } from \"./smart-legal-detector\"\n// import { searchLegalSpecialized } from \"./legal-search-specialized\"\n// import type { LegalSearchResponse, LegalSearchResult } from \"./legal-search-specialized\"\n\nconst DEFAULT_MAX_SEARCH_ATTEMPTS = 1\nconst DEFAULT_SEARCH_TIMEOUT_MS = 20000\nconst DEFAULT_MAX_RESULTS = 5\n\nclass SearchTimeoutError extends Error {\n  constructor(message: string) {\n    super(message)\n    this.name = \"SearchTimeoutError\"\n  }\n}\n\nexport interface LegalSourceSummary {\n  title: string\n  url: string\n  type: LegalSearchResult[\"type\"]\n}\n\nexport interface LegalSearchWorkflowMetadata {\n  attempts: number\n  maxAttempts: number\n  timedOut: boolean\n  durationMs: number\n  plannedQueries: string[]\n  executedQueries: string[]\n  searchExecuted: boolean\n  searchSuccessful: boolean\n  errorMessage?: string\n}\n\nexport interface LegalSearchWorkflowResult {\n  detection: LegalDetectionResult\n  searchResponse?: LegalSearchResponse\n  modelContext: string\n  sources: LegalSourceSummary[]\n  aggregatedResults: LegalSearchResult[]\n  metadata: LegalSearchWorkflowMetadata\n}\n\ntype WorkflowOptions = {\n  maxResults?: number\n  maxAttempts?: number\n  searchTimeoutMs?: number\n  searchQueries?: string[]\n}\n\nexport async function runLegalSearchWorkflow(\n  userQuery: string,\n  options?: WorkflowOptions\n): Promise<LegalSearchWorkflowResult> {\n  const detection = detectLegalQuery(userQuery)\n  logLegalDetection(userQuery, detection)\n\n  const plannedQueries = sanitizeQueries(options?.searchQueries)\n  const shouldSearch = detection.requiresWebSearch || plannedQueries.length > 0\n\n  const baseQuery = normalizeLegalQuery(userQuery)\n  const queriesToTry = shouldSearch\n    ? plannedQueries.length > 0\n      ? plannedQueries\n      : [baseQuery]\n    : []\n\n  const planBasedMax = plannedQueries.length > 0 ? plannedQueries.length : 0\n\n  const maxAttempts =\n    options?.maxAttempts ??\n    (planBasedMax > 0 ? planBasedMax : DEFAULT_MAX_SEARCH_ATTEMPTS)\n  const maxResults = options?.maxResults ?? DEFAULT_MAX_RESULTS\n  const timeoutMs = options?.searchTimeoutMs ?? DEFAULT_SEARCH_TIMEOUT_MS\n\n  const executedQueries: string[] = []\n  const aggregatedResults: LegalSearchResult[] = []\n\n  let attempts = 0\n  let timedOut = false\n  let errorMessage: string | undefined\n  let lastResponse: LegalSearchResponse | undefined\n\n  const start = Date.now()\n\n  for (const query of queriesToTry) {\n    if (attempts >= maxAttempts) {\n      break\n    }\n\n    const trimmedQuery = query.trim()\n    if (!trimmedQuery) {\n      continue\n    }\n\n    attempts += 1\n    executedQueries.push(trimmedQuery)\n\n    try {\n      const response = await withTimeout(\n        searchLegalSpecialized(trimmedQuery, maxResults),\n        timeoutMs\n      )\n\n      lastResponse = response\n\n      if (response.success && response.results?.length) {\n        mergeResults(aggregatedResults, response.results, maxResults)\n      } else if (response.error) {\n        errorMessage = response.error\n      }\n    } catch (error) {\n      if (error instanceof SearchTimeoutError) {\n        timedOut = true\n        errorMessage = error.message\n        break\n      }\n\n      if (error instanceof Error) {\n        errorMessage = error.message\n      } else {\n        errorMessage = \"Error desconocido en la busqueda legal especializada\"\n      }\n    }\n\n    if (aggregatedResults.length >= maxResults) {\n      break\n    }\n  }\n\n  const durationMs = Date.now() - start\n  const searchExecuted = executedQueries.length > 0\n  const searchSuccessful = aggregatedResults.length > 0\n\n  const finalResponse = searchSuccessful\n    ? buildAggregatedResponse(userQuery, aggregatedResults, maxResults, executedQueries.length)\n    : lastResponse\n\n  const sources = searchSuccessful\n    ? mapSourcesForResponse(aggregatedResults, maxResults)\n    : []\n\n  const modelContext = buildModelContext({\n    userQuery,\n    detection,\n    plannedQueries,\n    executedQueries,\n    searchExecuted,\n    searchSuccessful,\n    aggregatedResults,\n    lastResponse,\n    timedOut,\n    errorMessage,\n    maxResults,\n  })\n\n  return {\n    detection,\n    searchResponse: finalResponse,\n    modelContext,\n    sources,\n    aggregatedResults,\n    metadata: {\n      attempts,\n      maxAttempts,\n      timedOut,\n      durationMs,\n      plannedQueries,\n      executedQueries,\n      searchExecuted,\n      searchSuccessful,\n      errorMessage,\n    },\n  }\n}\n\nasync function withTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\n  let timeoutHandle: ReturnType<typeof setTimeout>\n\n  const timeoutPromise = new Promise<T>((_, reject) => {\n    timeoutHandle = setTimeout(() => {\n      reject(\n        new SearchTimeoutError(\n          `La busqueda legal supero el limite de ${timeoutMs} ms`\n        )\n      )\n    }, timeoutMs)\n  })\n\n  try {\n    return await Promise.race([promise, timeoutPromise])\n  } finally {\n    clearTimeout(timeoutHandle!)\n  }\n}\n\nfunction buildAggregatedResponse(\n  userQuery: string,\n  results: LegalSearchResult[],\n  maxResults: number,\n  attempts: number\n): LegalSearchResponse {\n  const limitedResults = results.slice(0, maxResults)\n\n  return {\n    success: true,\n    query: userQuery,\n    results: limitedResults,\n    sources: limitedResults.map((item) => item.url),\n    timestamp: new Date().toISOString(),\n    searchStrategy: attempts > 1 ? `Plan con ${attempts} consultas` : \"Consulta unica\",\n  }\n}\n\nfunction buildModelContext(params: {\n  userQuery: string\n  detection: LegalDetectionResult\n  plannedQueries: string[]\n  executedQueries: string[]\n  searchExecuted: boolean\n  searchSuccessful: boolean\n  aggregatedResults: LegalSearchResult[]\n  lastResponse?: LegalSearchResponse\n  timedOut: boolean\n  errorMessage?: string\n  maxResults: number\n}): string {\n  const {\n    userQuery,\n    detection,\n    plannedQueries,\n    executedQueries,\n    searchExecuted,\n    searchSuccessful,\n    aggregatedResults,\n    lastResponse,\n    timedOut,\n    errorMessage,\n    maxResults,\n  } = params\n\n  if (!searchExecuted) {\n    return [\n      \"## ANALISIS AUTOMATICO DE BUSQUEDA\",\n      \"Decision: no ejecutar busqueda web externa.\",\n      `Motivo: ${detection.reason}.`,\n      `Confianza del clasificador: ${(detection.confidence * 100).toFixed(1)} %.`,\n      plannedQueries.length\n        ? `Plan del modelo: ${plannedQueries.join(\" | \")}`\n        : \"Plan del modelo: sin consultas adicionales.\",\n      \"\",\n      \"INSTRUCCIONES PARA EL MODELO:\",\n      \"- Responde con tu conocimiento legal colombiano interno.\",\n      \"- Evita mencionar que se realizo una busqueda web.\",\n      \"- Si consideras necesaria una verificacion adicional, sugiere explicitamente una nueva busqueda al usuario.\",\n      \"- Manten la seccion `## Fuentes Consultadas` indicando que no se emplearon URLs externas en esta respuesta.\",\n    ].join(\"\\n\")\n  }\n\n  if (timedOut) {\n    return [\n      \"## BUSQUEDA JURIDICA EJECUTADA CON ERROR\",\n      `Consulta original: \"${userQuery}\".`,\n      `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\n      `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\n      `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\n      \"Resultado: la busqueda excedio el tiempo limite.\",\n      \"\",\n      \"INSTRUCCIONES PARA EL MODELO:\",\n      \"- Explica que se intento una busqueda web juridica pero expiro por tiempo.\",\n      \"- Responde con tu conocimiento legal vigente, indicando las salvedades necesarias.\",\n      \"- Manten la seccion `## Fuentes Consultadas` aclarando que no se obtuvieron fuentes externas.\",\n    ].join(\"\\n\")\n  }\n\n  if (!searchSuccessful) {\n    const failureReason = lastResponse?.error\n      ? `Detalle tecnico: ${lastResponse.error}.`\n      : errorMessage\n      ? `Detalle tecnico: ${errorMessage}.`\n      : \"Detalle tecnico: la API no devolvio resultados relevantes.\"\n\n    const summary = [\n      \"## BUSQUEDA JURIDICA EJECUTADA SIN FUENTES\",\n      `Consulta original: \"${userQuery}\".`,\n      `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\n      `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\n      `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\n      \"Resultado: no se encontraron fuentes confiables.\",\n      failureReason,\n      \"\",\n    ].join(\"\\n\")\n\n    return `${summary}${formatLegalSearchContext(\n      \"No se obtuvieron fuentes verificables para esta consulta. Aun asi, debes explicar tu respuesta y sugerir pasos de verificacion adicionales.\",\n      userQuery\n    )}`\n  }\n\n  const headerLines = [\n    \"## BUSQUEDA JURIDICA EJECUTADA\",\n    `Consulta original: \"${userQuery}\".`,\n    `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\n    `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\n    `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\n    \"Fuentes priorizadas: sitios oficiales, academicos y especializados de Colombia.\",\n    \"\",\n  ]\n\n  const resultsBlock = formatResultsForPrompt(aggregatedResults, maxResults)\n  const verificationBlock = buildVerificationChecklist(aggregatedResults)\n\n  return formatLegalSearchContext(\n    [headerLines.join(\"\\n\") + resultsBlock, verificationBlock].join(\"\\n\\n\"),\n    userQuery\n  )\n}\n\nfunction formatResultsForPrompt(\n  results: LegalSearchResult[],\n  maxResults: number\n): string {\n  if (!results || results.length === 0) {\n    return \"No se encontraron fuentes legales relevantes.\"\n  }\n\n  return results\n    .slice(0, maxResults)\n    .map((result, index) => {\n      const label = getSourceLabel(result.type)\n      const hostname = extractHostname(result.url)\n      const snippet = sanitizeSnippet(result.snippet)\n\n      return [\n        `FUENTE ${index + 1} ${label}`,\n        `Titulo: ${result.title}`,\n        `Dominio: ${hostname}`,\n        `URL: ${result.url}`,\n        `Resumen: ${snippet}`,\n        \"---\",\n      ].join(\"\\n\")\n    })\n    .join(\"\\n\")\n}\n\nfunction mapSourcesForResponse(\n  results: LegalSearchResult[],\n  maxResults: number\n): LegalSourceSummary[] {\n  return results.slice(0, maxResults).map((result) => ({\n    title: result.title,\n    url: result.url,\n    type: result.type,\n  }))\n}\n\nfunction getSourceLabel(type: LegalSearchResult[\"type\"]): string {\n  switch (type) {\n    case \"official\":\n      return \"[OFICIAL]\"\n    case \"academic\":\n      return \"[ACADEMICA]\"\n    case \"news\":\n      return \"[PRENSA ESPECIALIZADA]\"\n    default:\n      return \"[FUENTE COMPLEMENTARIA]\"\n  }\n}\n\nfunction extractHostname(url: string): string {\n  try {\n    return new URL(url).hostname\n  } catch (_error) {\n    return \"dominio-desconocido\"\n  }\n}\n\nfunction sanitizeSnippet(snippet: string): string {\n  return snippet.replace(/\\s+/g, \" \").trim().slice(0, 500)\n}\n\nfunction mergeResults(\n  accumulator: LegalSearchResult[],\n  incoming: LegalSearchResult[],\n  maxResults: number\n) {\n  const seenUrls = new Set(accumulator.map((item) => item.url))\n\n  for (const result of incoming) {\n    if (seenUrls.has(result.url)) {\n      continue\n    }\n\n    accumulator.push(result)\n    seenUrls.add(result.url)\n\n    if (accumulator.length >= maxResults * 2) {\n      break\n    }\n  }\n\n  accumulator.sort((a, b) => (b.relevance || 0) - (a.relevance || 0))\n}\n\nfunction sanitizeQueries(queries: string[] | undefined): string[] {\n  if (!queries || queries.length === 0) {\n    return []\n  }\n\n  return queries\n    .map((query) => query.trim())\n    .filter((query) => query.length > 0)\n}\n\nfunction buildVerificationChecklist(results: LegalSearchResult[]): string {\n  if (!results.length) {\n    return \"## Checklist de Verificacion\\n- Sin fuentes externas para verificar.\"\n  }\n\n  const lines: string[] = [\"## Checklist de Verificacion\"]\n\n  results.forEach((result, index) => {\n    const references = extractLegalReferences(`${result.title} ${result.snippet}`)\n    const label = references.length\n      ? `Referencias detectadas: ${references.join(\"; \")}`\n      : \"Referencias especificas no detectadas; revisa manualmente la cita.\"\n\n    lines.push(\n      `- Fuente ${index + 1}: ${result.title} (${result.url})`,\n      `  ${label}`\n    )\n  })\n\n  lines.push(\n    \"- Verifica que cada cita de tu respuesta coincida con el texto y vigencia de la fuente enlazada.\",\n    \"- Marca discrepancias explicando el conflicto y su implicacion.\"\n  )\n\n  return lines.join(\"\\n\")\n}\n\nfunction extractLegalReferences(text: string): string[] {\n  const patterns: RegExp[] = [\n    /\\barticulo\\s+\\d+[a-z]?/gi,\n    /\\barts?\\.\\s*\\d+[a-z]?/gi,\n    /\\bley\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bdecreto\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bautos?\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bsentencia\\s+[stc]\\-\\d+[a-z0-9\\-]*/gi,\n    /\\bprovidencia\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bresolucion\\s+\\d+\\s+de\\s+\\d{4}/gi,\n  ]\n\n  const matches = new Set<string>()\n  patterns.forEach((pattern) => {\n    const found = text.match(pattern)\n    if (found) {\n      found.forEach((item) => matches.add(normalizeReference(item)))\n    }\n  })\n\n  return Array.from(matches)\n}\n\nfunction normalizeReference(reference: string): string {\n  return reference.trim().replace(/\\s+/g, \" \").toLowerCase()\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}