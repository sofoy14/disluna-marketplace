019588ccf57bce176d7ad8b0cee6de64
"use strict";

/* istanbul ignore next */
function cov_2jt6mvqk0b() {
  var path = "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\legal\\route.ts";
  var hash = "68155377b274c0c956429f76607829e4067e977d";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\legal\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 2,
          column: 62
        }
      },
      "1": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 3,
          column: 25
        }
      },
      "2": {
        start: {
          line: 4,
          column: 0
        },
        end: {
          line: 4,
          column: 20
        }
      },
      "3": {
        start: {
          line: 5,
          column: 37
        },
        end: {
          line: 5,
          column: 87
        }
      },
      "4": {
        start: {
          line: 6,
          column: 30
        },
        end: {
          line: 6,
          column: 73
        }
      },
      "5": {
        start: {
          line: 7,
          column: 27
        },
        end: {
          line: 7,
          column: 31
        }
      },
      "6": {
        start: {
          line: 8,
          column: 28
        },
        end: {
          line: 8,
          column: 31
        }
      },
      "7": {
        start: {
          line: 10,
          column: 56
        },
        end: {
          line: 10,
          column: 76
        }
      },
      "8": {
        start: {
          line: 11,
          column: 4
        },
        end: {
          line: 122,
          column: 5
        }
      },
      "9": {
        start: {
          line: 12,
          column: 23
        },
        end: {
          line: 12,
          column: 59
        }
      },
      "10": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 15,
          column: 9
        }
      },
      "11": {
        start: {
          line: 14,
          column: 12
        },
        end: {
          line: 14,
          column: 93
        }
      },
      "12": {
        start: {
          line: 16,
          column: 26
        },
        end: {
          line: 16,
          column: 58
        }
      },
      "13": {
        start: {
          line: 17,
          column: 26
        },
        end: {
          line: 17,
          column: 44
        }
      },
      "14": {
        start: {
          line: 19,
          column: 28
        },
        end: {
          line: 19,
          column: 101
        }
      },
      "15": {
        start: {
          line: 20,
          column: 28
        },
        end: {
          line: 20,
          column: 55
        }
      },
      "16": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 66
        }
      },
      "17": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 48
        }
      },
      "18": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 50
        }
      },
      "19": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 50
        }
      },
      "20": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 47
        }
      },
      "21": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 41
        }
      },
      "22": {
        start: {
          line: 28,
          column: 30
        },
        end: {
          line: 28,
          column: 83
        }
      },
      "23": {
        start: {
          line: 29,
          column: 28
        },
        end: {
          line: 29,
          column: 88
        }
      },
      "24": {
        start: {
          line: 31,
          column: 32
        },
        end: {
          line: 31,
          column: 111
        }
      },
      "25": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 89
        }
      },
      "26": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 91
        }
      },
      "27": {
        start: {
          line: 35,
          column: 31
        },
        end: {
          line: 35,
          column: 65
        }
      },
      "28": {
        start: {
          line: 36,
          column: 30
        },
        end: {
          line: 36,
          column: 32
        }
      },
      "29": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 71,
          column: 9
        }
      },
      "30": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 38,
          column: 91
        }
      },
      "31": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 66,
          column: 13
        }
      },
      "32": {
        start: {
          line: 41,
          column: 37
        },
        end: {
          line: 49,
          column: 18
        }
      },
      "33": {
        start: {
          line: 50,
          column: 40
        },
        end: {
          line: 50,
          column: 113
        }
      },
      "34": {
        start: {
          line: 51,
          column: 16
        },
        end: {
          line: 51,
          column: 62
        }
      },
      "35": {
        start: {
          line: 52,
          column: 16
        },
        end: {
          line: 52,
          column: 101
        }
      },
      "36": {
        start: {
          line: 53,
          column: 16
        },
        end: {
          line: 53,
          column: 96
        }
      },
      "37": {
        start: {
          line: 54,
          column: 16
        },
        end: {
          line: 54,
          column: 99
        }
      },
      "38": {
        start: {
          line: 55,
          column: 16
        },
        end: {
          line: 55,
          column: 111
        }
      },
      "39": {
        start: {
          line: 56,
          column: 16
        },
        end: {
          line: 56,
          column: 98
        }
      },
      "40": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 57,
          column: 109
        }
      },
      "41": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 59,
          column: 62
        }
      },
      "42": {
        start: {
          line: 62,
          column: 16
        },
        end: {
          line: 62,
          column: 75
        }
      },
      "43": {
        start: {
          line: 64,
          column: 16
        },
        end: {
          line: 64,
          column: 63
        }
      },
      "44": {
        start: {
          line: 65,
          column: 16
        },
        end: {
          line: 65,
          column: 188
        }
      },
      "45": {
        start: {
          line: 69,
          column: 12
        },
        end: {
          line: 69,
          column: 74
        }
      },
      "46": {
        start: {
          line: 70,
          column: 12
        },
        end: {
          line: 70,
          column: 184
        }
      },
      "47": {
        start: {
          line: 73,
          column: 30
        },
        end: {
          line: 73,
          column: 50
        }
      },
      "48": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 74,
          column: 100
        }
      },
      "49": {
        start: {
          line: 76,
          column: 23
        },
        end: {
          line: 93,
          column: 10
        }
      },
      "50": {
        start: {
          line: 78,
          column: 31
        },
        end: {
          line: 78,
          column: 57
        }
      },
      "51": {
        start: {
          line: 79,
          column: 28
        },
        end: {
          line: 79,
          column: 29
        }
      },
      "52": {
        start: {
          line: 80,
          column: 34
        },
        end: {
          line: 90,
          column: 17
        }
      },
      "53": {
        start: {
          line: 81,
          column: 20
        },
        end: {
          line: 89,
          column: 21
        }
      },
      "54": {
        start: {
          line: 82,
          column: 38
        },
        end: {
          line: 82,
          column: 92
        }
      },
      "55": {
        start: {
          line: 83,
          column: 24
        },
        end: {
          line: 83,
          column: 76
        }
      },
      "56": {
        start: {
          line: 84,
          column: 24
        },
        end: {
          line: 84,
          column: 32
        }
      },
      "57": {
        start: {
          line: 85,
          column: 24
        },
        end: {
          line: 85,
          column: 50
        }
      },
      "58": {
        start: {
          line: 88,
          column: 24
        },
        end: {
          line: 88,
          column: 43
        }
      },
      "59": {
        start: {
          line: 91,
          column: 16
        },
        end: {
          line: 91,
          column: 28
        }
      },
      "60": {
        start: {
          line: 95,
          column: 35
        },
        end: {
          line: 95,
          column: 60
        }
      },
      "61": {
        start: {
          line: 96,
          column: 8
        },
        end: {
          line: 103,
          column: 11
        }
      },
      "62": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 104,
          column: 115
        }
      },
      "63": {
        start: {
          line: 105,
          column: 8
        },
        end: {
          line: 110,
          column: 11
        }
      },
      "64": {
        start: {
          line: 113,
          column: 8
        },
        end: {
          line: 113,
          column: 53
        }
      },
      "65": {
        start: {
          line: 114,
          column: 24
        },
        end: {
          line: 116,
          column: 52
        }
      },
      "66": {
        start: {
          line: 117,
          column: 23
        },
        end: {
          line: 117,
          column: 77
        }
      },
      "67": {
        start: {
          line: 118,
          column: 8
        },
        end: {
          line: 121,
          column: 24
        }
      },
      "68": {
        start: {
          line: 124,
          column: 0
        },
        end: {
          line: 124,
          column: 25
        }
      },
      "69": {
        start: {
          line: 126,
          column: 28
        },
        end: {
          line: 126,
          column: 82
        }
      },
      "70": {
        start: {
          line: 126,
          column: 64
        },
        end: {
          line: 126,
          column: 81
        }
      },
      "71": {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 129,
          column: 13
        }
      },
      "72": {
        start: {
          line: 132,
          column: 27
        },
        end: {
          line: 146,
          column: 5
        }
      },
      "73": {
        start: {
          line: 147,
          column: 23
        },
        end: {
          line: 147,
          column: 42
        }
      },
      "74": {
        start: {
          line: 149,
          column: 28
        },
        end: {
          line: 149,
          column: 88
        }
      },
      "75": {
        start: {
          line: 149,
          column: 59
        },
        end: {
          line: 149,
          column: 87
        }
      },
      "76": {
        start: {
          line: 151,
          column: 27
        },
        end: {
          line: 151,
          column: 44
        }
      },
      "77": {
        start: {
          line: 153,
          column: 33
        },
        end: {
          line: 153,
          column: 70
        }
      },
      "78": {
        start: {
          line: 154,
          column: 4
        },
        end: {
          line: 154,
          column: 69
        }
      }
    },
    fnMap: {
      "0": {
        name: "POST",
        decl: {
          start: {
            line: 9,
            column: 15
          },
          end: {
            line: 9,
            column: 19
          }
        },
        loc: {
          start: {
            line: 9,
            column: 29
          },
          end: {
            line: 123,
            column: 1
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 77,
            column: 13
          }
        },
        loc: {
          start: {
            line: 77,
            column: 30
          },
          end: {
            line: 92,
            column: 13
          }
        },
        line: 77
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 80,
            column: 34
          },
          end: {
            line: 80,
            column: 35
          }
        },
        loc: {
          start: {
            line: 80,
            column: 40
          },
          end: {
            line: 90,
            column: 17
          }
        },
        line: 80
      },
      "3": {
        name: "extractLastUserMessage",
        decl: {
          start: {
            line: 125,
            column: 9
          },
          end: {
            line: 125,
            column: 31
          }
        },
        loc: {
          start: {
            line: 125,
            column: 42
          },
          end: {
            line: 130,
            column: 1
          }
        },
        line: 125
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 126,
            column: 57
          },
          end: {
            line: 126,
            column: 58
          }
        },
        loc: {
          start: {
            line: 126,
            column: 64
          },
          end: {
            line: 126,
            column: 81
          }
        },
        line: 126
      },
      "5": {
        name: "detectSearchRequirement",
        decl: {
          start: {
            line: 131,
            column: 9
          },
          end: {
            line: 131,
            column: 32
          }
        },
        loc: {
          start: {
            line: 131,
            column: 40
          },
          end: {
            line: 155,
            column: 1
          }
        },
        line: 131
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 149,
            column: 48
          },
          end: {
            line: 149,
            column: 49
          }
        },
        loc: {
          start: {
            line: 149,
            column: 59
          },
          end: {
            line: 149,
            column: 87
          }
        },
        line: 149
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 23
          },
          end: {
            line: 12,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 12,
            column: 23
          },
          end: {
            line: 12,
            column: 53
          }
        }, {
          start: {
            line: 12,
            column: 57
          },
          end: {
            line: 12,
            column: 59
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 13,
            column: 8
          },
          end: {
            line: 15,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 13,
            column: 8
          },
          end: {
            line: 15,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 13
      },
      "2": {
        loc: {
          start: {
            line: 19,
            column: 28
          },
          end: {
            line: 19,
            column: 101
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 19,
            column: 28
          },
          end: {
            line: 19,
            column: 34
          }
        }, {
          start: {
            line: 19,
            column: 38
          },
          end: {
            line: 19,
            column: 101
          }
        }],
        line: 19
      },
      "3": {
        loc: {
          start: {
            line: 20,
            column: 28
          },
          end: {
            line: 20,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 20,
            column: 28
          },
          end: {
            line: 20,
            column: 34
          }
        }, {
          start: {
            line: 20,
            column: 38
          },
          end: {
            line: 20,
            column: 55
          }
        }],
        line: 20
      },
      "4": {
        loc: {
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 71,
            column: 9
          }
        }, {
          start: {
            line: 68,
            column: 13
          },
          end: {
            line: 71,
            column: 9
          }
        }],
        line: 37
      },
      "5": {
        loc: {
          start: {
            line: 55,
            column: 52
          },
          end: {
            line: 55,
            column: 107
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 55,
            column: 98
          },
          end: {
            line: 55,
            column: 101
          }
        }, {
          start: {
            line: 55,
            column: 104
          },
          end: {
            line: 55,
            column: 107
          }
        }],
        line: 55
      },
      "6": {
        loc: {
          start: {
            line: 81,
            column: 20
          },
          end: {
            line: 89,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 20
          },
          end: {
            line: 89,
            column: 21
          }
        }, {
          start: {
            line: 87,
            column: 25
          },
          end: {
            line: 89,
            column: 21
          }
        }],
        line: 81
      },
      "7": {
        loc: {
          start: {
            line: 82,
            column: 55
          },
          end: {
            line: 82,
            column: 91
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 82,
            column: 83
          },
          end: {
            line: 82,
            column: 86
          }
        }, {
          start: {
            line: 82,
            column: 89
          },
          end: {
            line: 82,
            column: 91
          }
        }],
        line: 82
      },
      "8": {
        loc: {
          start: {
            line: 97,
            column: 26
          },
          end: {
            line: 97,
            column: 48
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 97,
            column: 43
          },
          end: {
            line: 97,
            column: 44
          }
        }, {
          start: {
            line: 97,
            column: 47
          },
          end: {
            line: 97,
            column: 48
          }
        }],
        line: 97
      },
      "9": {
        loc: {
          start: {
            line: 98,
            column: 27
          },
          end: {
            line: 98,
            column: 49
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 98,
            column: 44
          },
          end: {
            line: 98,
            column: 45
          }
        }, {
          start: {
            line: 98,
            column: 48
          },
          end: {
            line: 98,
            column: 49
          }
        }],
        line: 98
      },
      "10": {
        loc: {
          start: {
            line: 99,
            column: 26
          },
          end: {
            line: 99,
            column: 48
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 99,
            column: 43
          },
          end: {
            line: 99,
            column: 44
          }
        }, {
          start: {
            line: 99,
            column: 47
          },
          end: {
            line: 99,
            column: 48
          }
        }],
        line: 99
      },
      "11": {
        loc: {
          start: {
            line: 101,
            column: 28
          },
          end: {
            line: 101,
            column: 50
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 101,
            column: 45
          },
          end: {
            line: 101,
            column: 46
          }
        }, {
          start: {
            line: 101,
            column: 49
          },
          end: {
            line: 101,
            column: 50
          }
        }],
        line: 101
      },
      "12": {
        loc: {
          start: {
            line: 102,
            column: 28
          },
          end: {
            line: 102,
            column: 92
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 102,
            column: 45
          },
          end: {
            line: 102,
            column: 70
          }
        }, {
          start: {
            line: 102,
            column: 73
          },
          end: {
            line: 102,
            column: 92
          }
        }],
        line: 102
      },
      "13": {
        loc: {
          start: {
            line: 114,
            column: 24
          },
          end: {
            line: 116,
            column: 52
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 114,
            column: 24
          },
          end: {
            line: 114,
            column: 45
          }
        }, {
          start: {
            line: 115,
            column: 12
          },
          end: {
            line: 115,
            column: 26
          }
        }, {
          start: {
            line: 116,
            column: 12
          },
          end: {
            line: 116,
            column: 52
          }
        }],
        line: 114
      },
      "14": {
        loc: {
          start: {
            line: 117,
            column: 23
          },
          end: {
            line: 117,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 117,
            column: 59
          },
          end: {
            line: 117,
            column: 71
          }
        }, {
          start: {
            line: 117,
            column: 74
          },
          end: {
            line: 117,
            column: 77
          }
        }],
        line: 117
      },
      "15": {
        loc: {
          start: {
            line: 127,
            column: 11
          },
          end: {
            line: 129,
            column: 12
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 128,
            column: 10
          },
          end: {
            line: 128,
            column: 33
          }
        }, {
          start: {
            line: 129,
            column: 10
          },
          end: {
            line: 129,
            column: 12
          }
        }],
        line: 127
      },
      "16": {
        loc: {
          start: {
            line: 153,
            column: 34
          },
          end: {
            line: 153,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 153,
            column: 34
          },
          end: {
            line: 153,
            column: 52
          }
        }, {
          start: {
            line: 153,
            column: 56
          },
          end: {
            line: 153,
            column: 58
          }
        }],
        line: 153
      },
      "17": {
        loc: {
          start: {
            line: 154,
            column: 11
          },
          end: {
            line: 154,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 154,
            column: 11
          },
          end: {
            line: 154,
            column: 26
          }
        }, {
          start: {
            line: 154,
            column: 30
          },
          end: {
            line: 154,
            column: 44
          }
        }, {
          start: {
            line: 154,
            column: 48
          },
          end: {
            line: 154,
            column: 68
          }
        }],
        line: 154
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\legal\\route.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\legal\\route.ts"],
      sourcesContent: ["import { ChatSettings } from \"@/types\"\nimport { NextRequest, NextResponse } from \"next/server\"\nimport { createTongyiUnifiedLegalAgent } from \"@/lib/agents/tongyi-unified-legal-agent\"\nimport { ChatMemoryManager } from \"@/lib/memory/chat-memory-manager\"\n\nconst DEFAULT_MAX_TOKENS = 4000\nconst DEFAULT_TEMPERATURE = 0.3\n\ninterface RequestBody {\n  chatSettings: ChatSettings\n  messages: Array<{ role: \"system\" | \"user\" | \"assistant\"; content: string }>\n  chatId?: string\n  userId?: string\n}\n\nexport async function POST(request: Request) {\n  const { chatSettings, messages, chatId, userId } = (await request.json()) as RequestBody\n\n  try {\n    const apiKey = process.env.OPENROUTER_API_KEY || \"\"\n\n    if (!apiKey) {\n      throw new Error(\n        \"OpenRouter API Key no configurada. Define OPENROUTER_API_KEY.\"\n      )\n    }\n\n    const userQuery = extractLastUserMessage(messages)\n    const modelName = chatSettings.model as string\n    \n    // Generar IDs \xFAnicos para el chat si no se proporcionan\n    const finalChatId = chatId || `chat-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    const finalUserId = userId || \"usuario-anonimo\"\n\n    console.log(`\\n\uD83E\uDDE0 TONGYI REACT AGENT - SISTEMA COMPLETO`)\n    console.log(`\uD83D\uDCDD Query: \"${userQuery}\"`)\n    console.log(`\uD83D\uDCAC Chat ID: ${finalChatId}`)\n    console.log(`\uD83D\uDC64 User ID: ${finalUserId}`)\n    console.log(`\uD83E\uDD16 Modelo: ${modelName}`)\n    console.log(`${'='.repeat(80)}`)\n\n    // Inicializar sistema de memoria\n    const memoryManager = ChatMemoryManager.getInstance()\n    const chatContext = await memoryManager.getChatContext(finalChatId, finalUserId)\n    \n    // Obtener historial relevante\n    const relevantHistory = await memoryManager.getRelevantHistory(\n      finalChatId, \n      finalUserId, \n      userQuery, \n      10\n    )\n\n    console.log(`\uD83E\uDDE0 Memoria cargada: ${relevantHistory.length} mensajes relevantes`)\n    console.log(`\uD83D\uDCCA Contexto actual: ${chatContext.currentContext.length} caracteres`)\n\n    // Detectar si la consulta requiere b\xFAsqueda web\n    const requiresSearch = detectSearchRequirement(userQuery)\n    \n    let responseContent = \"\"\n\n    if (requiresSearch) {\n      console.log(`\uD83D\uDD0D Consulta requiere b\xFAsqueda web - Ejecutando Agente Unificado`)\n      \n      try {\n        // Usar agente Tongyi Unificado con paradigmas oficiales de DeepResearch\n        const unifiedAgent = createTongyiUnifiedLegalAgent(apiKey, {\n          maxRounds: 8,\n          enableContinuousVerification: true,\n          enableIterativeRefinement: true,\n          enableMemory: true,\n          enableAntiHallucination: true,\n          preferredSources: ['official', 'academic', 'news'],\n          qualityThreshold: 0.85\n        })\n        \n        const unifiedResponse = await unifiedAgent.processLegalQuery(\n          userQuery,\n          finalChatId,\n          finalUserId\n        )\n\n        console.log(`\u2705 Agente Unificado completado:`)\n        console.log(`   \uD83C\uDFAF Modo de investigaci\xF3n: ${unifiedResponse.analysis.researchMode}`)\n        console.log(`   \uD83D\uDD0D Rondas ejecutadas: ${unifiedResponse.metadata.totalRounds}`)\n        console.log(`   \uD83D\uDCC4 Fuentes encontradas: ${unifiedResponse.metadata.totalSources}`)\n        console.log(`   \uD83D\uDEE1\uFE0F Verificaci\xF3n: ${unifiedResponse.analysis.verificationPassed ? '\u2705' : '\u274C'}`)\n        console.log(`   \uD83C\uDFAF Confianza: ${unifiedResponse.analysis.confidence.toFixed(2)}`)\n        console.log(`   \u23F1\uFE0F Tiempo: ${(unifiedResponse.analysis.processingTime / 1000).toFixed(1)}s`)\n\n                // Usar directamente la respuesta del modelo sin agregar informaci\xF3n adicional\n                responseContent = unifiedResponse.finalAnswer\n\n      } catch (searchError) {\n        console.error(`\u274C Error en agente unificado:`, searchError)\n        \n        // Fallback a respuesta simple\n        console.log(`\uD83D\uDD04 Fallback a respuesta directa`)\n        responseContent = `Disculpe, hubo un error procesando su consulta con el sistema de an\xE1lisis avanzado. Por favor, intente reformular su pregunta de manera m\xE1s espec\xEDfica.`\n      }\n    } else {\n      console.log(`\uD83D\uDCAC Consulta simple - Respondiendo directamente`)\n      responseContent = `Esta consulta no requiere b\xFAsqueda web espec\xEDfica. Por favor, proporcione m\xE1s detalles sobre su consulta legal para obtener una respuesta m\xE1s completa.`\n    }\n    \n    // Guardar mensaje del usuario en memoria\n    const userMessageId = `user-${Date.now()}`\n    await memoryManager.saveMessage(\n      finalChatId,\n      finalUserId,\n      userMessageId,\n      userQuery,\n      'user'\n    )\n\n    // Crear stream personalizado para la respuesta del agente unificado\n    const stream = new ReadableStream({\n      start(controller) {\n        const chunks = responseContent.split(' ')\n        let index = 0\n        \n        const pushChunk = () => {\n          if (index < chunks.length) {\n            const chunk = chunks[index] + (index < chunks.length - 1 ? ' ' : '')\n            controller.enqueue(new TextEncoder().encode(chunk))\n            index++\n            setTimeout(pushChunk, 30) // Simular streaming m\xE1s r\xE1pido\n          } else {\n            controller.close()\n          }\n        }\n        \n        pushChunk()\n      }\n    })\n\n    // Guardar respuesta del asistente en memoria\n    const assistantMessageId = `assistant-${Date.now()}`\n    await memoryManager.saveMessage(\n      finalChatId,\n      finalUserId,\n      assistantMessageId,\n      responseContent,\n      'assistant',\n      {\n        searchRounds: requiresSearch ? 8 : 0,\n        totalSearches: requiresSearch ? 1 : 0,\n        totalResults: requiresSearch ? 1 : 0,\n        finalQuality: 9,\n        modelDecisions: requiresSearch ? 1 : 0,\n        searchStrategy: requiresSearch ? \"AGENTE_UNIFICADO_TONGYI\" : \"RESPUESTA_DIRECTA\"\n      }\n    )\n    \n    console.log(`\uD83D\uDCBE Respuesta del agente unificado guardada en memoria: ${responseContent.length} caracteres`)\n    \n    return new Response(stream, {\n      headers: {\n        'Content-Type': 'text/plain; charset=utf-8',\n        'Transfer-Encoding': 'chunked',\n      },\n    })\n\n  } catch (error: any) {\n    console.error(\"[legal-route] Error:\", error)\n    const message =\n      error?.error?.message ||\n      error?.message ||\n      \"Error en el asistente legal colombiano\"\n\n    const status = typeof error?.status === \"number\" ? error.status : 500\n\n    return new Response(\n      JSON.stringify({\n        message,\n        error: \"ASISTENTE_LEGAL_ERROR\",\n      }),\n      { status }\n    )\n  }\n}\n\nexport const runtime = \"edge\"\n\nfunction extractLastUserMessage(messages: RequestBody[\"messages\"]): string {\n  const lastUserMessage = [...messages].reverse().find((m) => m.role === \"user\")\n  return typeof lastUserMessage?.content === \"string\"\n    ? lastUserMessage.content\n    : \"\"\n}\n\nfunction detectSearchRequirement(query: string): boolean {\n  const searchKeywords = [\n    'requisitos', 'constituir', 'sociedad', 'SAS', 'SRL', 'SA',\n    'jurisprudencia', 'corte', 'constitucional', 'consejo', 'estado',\n    'c\xF3digo', 'ley', 'decreto', 'art\xEDculo', 'norma', 'legislaci\xF3n',\n    'reforma', 'modificaci\xF3n', 'vigencia', 'derogaci\xF3n',\n    'proceso', 'tr\xE1mite', 'procedimiento', 'requisito',\n    'documento', 'certificado', 'registro', 'matr\xEDcula',\n    'colombia', 'colombiano', 'derecho', 'legal', 'jur\xEDdico',\n    'contrato', 'obligaci\xF3n', 'responsabilidad', 'da\xF1o',\n    'penal', 'civil', 'comercial', 'laboral', 'administrativo',\n    'tributario', 'fiscal', 'impuesto', 'DIAN', 'superintendencia',\n    'ministerio', 'gobierno', 'estado', 'municipio', 'departamento',\n    'valor financiero', 'cuentas', 'participaci\xF3n', 'financiero',\n    'bancario', 'cr\xE9dito', 'pr\xE9stamo', 'inversi\xF3n', 'capital'\n  ]\n  \n  const lowerQuery = query.toLowerCase()\n  \n  // Ser m\xE1s agresivo: si contiene cualquier palabra legal, buscar\n  const hasLegalKeyword = searchKeywords.some(keyword => lowerQuery.includes(keyword))\n  \n  // Tambi\xE9n buscar si la consulta es larga (probablemente compleja)\n  const isComplexQuery = query.length > 30\n  \n  // Buscar si contiene signos de interrogaci\xF3n m\xFAltiples o puntos\n  const hasMultipleQuestions = (query.match(/\\?/g) || []).length > 0\n  \n  return hasLegalKeyword || isComplexQuery || hasMultipleQuestions\n}"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "68155377b274c0c956429f76607829e4067e977d"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2jt6mvqk0b = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2jt6mvqk0b();
cov_2jt6mvqk0b().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2jt6mvqk0b().s[1]++;
exports.runtime = void 0;
/* istanbul ignore next */
cov_2jt6mvqk0b().s[2]++;
exports.POST = POST;
const tongyi_unified_legal_agent_1 =
/* istanbul ignore next */
(cov_2jt6mvqk0b().s[3]++, require("@/lib/agents/tongyi-unified-legal-agent"));
const chat_memory_manager_1 =
/* istanbul ignore next */
(cov_2jt6mvqk0b().s[4]++, require("@/lib/memory/chat-memory-manager"));
const DEFAULT_MAX_TOKENS =
/* istanbul ignore next */
(cov_2jt6mvqk0b().s[5]++, 4000);
const DEFAULT_TEMPERATURE =
/* istanbul ignore next */
(cov_2jt6mvqk0b().s[6]++, 0.3);
async function POST(request) {
  /* istanbul ignore next */
  cov_2jt6mvqk0b().f[0]++;
  const {
    chatSettings,
    messages,
    chatId,
    userId
  } =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[7]++, await request.json());
  /* istanbul ignore next */
  cov_2jt6mvqk0b().s[8]++;
  try {
    const apiKey =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[9]++,
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[0][0]++, process.env.OPENROUTER_API_KEY) ||
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[0][1]++, ""));
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[10]++;
    if (!apiKey) {
      /* istanbul ignore next */
      cov_2jt6mvqk0b().b[1][0]++;
      cov_2jt6mvqk0b().s[11]++;
      throw new Error("OpenRouter API Key no configurada. Define OPENROUTER_API_KEY.");
    } else
    /* istanbul ignore next */
    {
      cov_2jt6mvqk0b().b[1][1]++;
    }
    const userQuery =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[12]++, extractLastUserMessage(messages));
    const modelName =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[13]++, chatSettings.model);
    // Generar IDs √∫nicos para el chat si no se proporcionan
    const finalChatId =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[14]++,
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[2][0]++, chatId) ||
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[2][1]++, `chat-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`));
    const finalUserId =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[15]++,
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[3][0]++, userId) ||
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[3][1]++, "usuario-anonimo"));
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[16]++;
    console.log(`\nüß† TONGYI REACT AGENT - SISTEMA COMPLETO`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[17]++;
    console.log(`üìù Query: "${userQuery}"`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[18]++;
    console.log(`üí¨ Chat ID: ${finalChatId}`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[19]++;
    console.log(`üë§ User ID: ${finalUserId}`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[20]++;
    console.log(`ü§ñ Modelo: ${modelName}`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[21]++;
    console.log(`${'='.repeat(80)}`);
    // Inicializar sistema de memoria
    const memoryManager =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[22]++, chat_memory_manager_1.ChatMemoryManager.getInstance());
    const chatContext =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[23]++, await memoryManager.getChatContext(finalChatId, finalUserId));
    // Obtener historial relevante
    const relevantHistory =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[24]++, await memoryManager.getRelevantHistory(finalChatId, finalUserId, userQuery, 10));
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[25]++;
    console.log(`üß† Memoria cargada: ${relevantHistory.length} mensajes relevantes`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[26]++;
    console.log(`üìä Contexto actual: ${chatContext.currentContext.length} caracteres`);
    // Detectar si la consulta requiere b√∫squeda web
    const requiresSearch =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[27]++, detectSearchRequirement(userQuery));
    let responseContent =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[28]++, "");
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[29]++;
    if (requiresSearch) {
      /* istanbul ignore next */
      cov_2jt6mvqk0b().b[4][0]++;
      cov_2jt6mvqk0b().s[30]++;
      console.log(`üîç Consulta requiere b√∫squeda web - Ejecutando Agente Unificado`);
      /* istanbul ignore next */
      cov_2jt6mvqk0b().s[31]++;
      try {
        // Usar agente Tongyi Unificado con paradigmas oficiales de DeepResearch
        const unifiedAgent =
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().s[32]++, (0, tongyi_unified_legal_agent_1.createTongyiUnifiedLegalAgent)(apiKey, {
          maxRounds: 8,
          enableContinuousVerification: true,
          enableIterativeRefinement: true,
          enableMemory: true,
          enableAntiHallucination: true,
          preferredSources: ['official', 'academic', 'news'],
          qualityThreshold: 0.85
        }));
        const unifiedResponse =
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().s[33]++, await unifiedAgent.processLegalQuery(userQuery, finalChatId, finalUserId));
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[34]++;
        console.log(`‚úÖ Agente Unificado completado:`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[35]++;
        console.log(`   üéØ Modo de investigaci√≥n: ${unifiedResponse.analysis.researchMode}`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[36]++;
        console.log(`   üîç Rondas ejecutadas: ${unifiedResponse.metadata.totalRounds}`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[37]++;
        console.log(`   üìÑ Fuentes encontradas: ${unifiedResponse.metadata.totalSources}`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[38]++;
        console.log(`   üõ°Ô∏è Verificaci√≥n: ${unifiedResponse.analysis.verificationPassed ?
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().b[5][0]++, '‚úÖ') :
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().b[5][1]++, '‚ùå')}`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[39]++;
        console.log(`   üéØ Confianza: ${unifiedResponse.analysis.confidence.toFixed(2)}`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[40]++;
        console.log(`   ‚è±Ô∏è Tiempo: ${(unifiedResponse.analysis.processingTime / 1000).toFixed(1)}s`);
        // Usar directamente la respuesta del modelo sin agregar informaci√≥n adicional
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[41]++;
        responseContent = unifiedResponse.finalAnswer;
      } catch (searchError) {
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[42]++;
        console.error(`‚ùå Error en agente unificado:`, searchError);
        // Fallback a respuesta simple
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[43]++;
        console.log(`üîÑ Fallback a respuesta directa`);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[44]++;
        responseContent = `Disculpe, hubo un error procesando su consulta con el sistema de an√°lisis avanzado. Por favor, intente reformular su pregunta de manera m√°s espec√≠fica.`;
      }
    } else {
      /* istanbul ignore next */
      cov_2jt6mvqk0b().b[4][1]++;
      cov_2jt6mvqk0b().s[45]++;
      console.log(`üí¨ Consulta simple - Respondiendo directamente`);
      /* istanbul ignore next */
      cov_2jt6mvqk0b().s[46]++;
      responseContent = `Esta consulta no requiere b√∫squeda web espec√≠fica. Por favor, proporcione m√°s detalles sobre su consulta legal para obtener una respuesta m√°s completa.`;
    }
    // Guardar mensaje del usuario en memoria
    const userMessageId =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[47]++, `user-${Date.now()}`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[48]++;
    await memoryManager.saveMessage(finalChatId, finalUserId, userMessageId, userQuery, 'user');
    // Crear stream personalizado para la respuesta del agente unificado
    const stream =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[49]++, new ReadableStream({
      start(controller) {
        /* istanbul ignore next */
        cov_2jt6mvqk0b().f[1]++;
        const chunks =
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().s[50]++, responseContent.split(' '));
        let index =
        /* istanbul ignore next */
        (cov_2jt6mvqk0b().s[51]++, 0);
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[52]++;
        const pushChunk = () => {
          /* istanbul ignore next */
          cov_2jt6mvqk0b().f[2]++;
          cov_2jt6mvqk0b().s[53]++;
          if (index < chunks.length) {
            /* istanbul ignore next */
            cov_2jt6mvqk0b().b[6][0]++;
            const chunk =
            /* istanbul ignore next */
            (cov_2jt6mvqk0b().s[54]++, chunks[index] + (index < chunks.length - 1 ?
            /* istanbul ignore next */
            (cov_2jt6mvqk0b().b[7][0]++, ' ') :
            /* istanbul ignore next */
            (cov_2jt6mvqk0b().b[7][1]++, '')));
            /* istanbul ignore next */
            cov_2jt6mvqk0b().s[55]++;
            controller.enqueue(new TextEncoder().encode(chunk));
            /* istanbul ignore next */
            cov_2jt6mvqk0b().s[56]++;
            index++;
            /* istanbul ignore next */
            cov_2jt6mvqk0b().s[57]++;
            setTimeout(pushChunk, 30); // Simular streaming m√°s r√°pido
          } else {
            /* istanbul ignore next */
            cov_2jt6mvqk0b().b[6][1]++;
            cov_2jt6mvqk0b().s[58]++;
            controller.close();
          }
        };
        /* istanbul ignore next */
        cov_2jt6mvqk0b().s[59]++;
        pushChunk();
      }
    }));
    // Guardar respuesta del asistente en memoria
    const assistantMessageId =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[60]++, `assistant-${Date.now()}`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[61]++;
    await memoryManager.saveMessage(finalChatId, finalUserId, assistantMessageId, responseContent, 'assistant', {
      searchRounds: requiresSearch ?
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[8][0]++, 8) :
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[8][1]++, 0),
      totalSearches: requiresSearch ?
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[9][0]++, 1) :
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[9][1]++, 0),
      totalResults: requiresSearch ?
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[10][0]++, 1) :
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[10][1]++, 0),
      finalQuality: 9,
      modelDecisions: requiresSearch ?
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[11][0]++, 1) :
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[11][1]++, 0),
      searchStrategy: requiresSearch ?
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[12][0]++, "AGENTE_UNIFICADO_TONGYI") :
      /* istanbul ignore next */
      (cov_2jt6mvqk0b().b[12][1]++, "RESPUESTA_DIRECTA")
    });
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[62]++;
    console.log(`üíæ Respuesta del agente unificado guardada en memoria: ${responseContent.length} caracteres`);
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[63]++;
    return new Response(stream, {
      headers: {
        'Content-Type': 'text/plain; charset=utf-8',
        'Transfer-Encoding': 'chunked'
      }
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[64]++;
    console.error("[legal-route] Error:", error);
    const message =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[65]++,
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[13][0]++, error?.error?.message) ||
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[13][1]++, error?.message) ||
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[13][2]++, "Error en el asistente legal colombiano"));
    const status =
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().s[66]++, typeof error?.status === "number" ?
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[14][0]++, error.status) :
    /* istanbul ignore next */
    (cov_2jt6mvqk0b().b[14][1]++, 500));
    /* istanbul ignore next */
    cov_2jt6mvqk0b().s[67]++;
    return new Response(JSON.stringify({
      message,
      error: "ASISTENTE_LEGAL_ERROR"
    }), {
      status
    });
  }
}
/* istanbul ignore next */
cov_2jt6mvqk0b().s[68]++;
exports.runtime = "edge";
function extractLastUserMessage(messages) {
  /* istanbul ignore next */
  cov_2jt6mvqk0b().f[3]++;
  const lastUserMessage =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[69]++, [...messages].reverse().find(m => {
    /* istanbul ignore next */
    cov_2jt6mvqk0b().f[4]++;
    cov_2jt6mvqk0b().s[70]++;
    return m.role === "user";
  }));
  /* istanbul ignore next */
  cov_2jt6mvqk0b().s[71]++;
  return typeof lastUserMessage?.content === "string" ?
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[15][0]++, lastUserMessage.content) :
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[15][1]++, "");
}
function detectSearchRequirement(query) {
  /* istanbul ignore next */
  cov_2jt6mvqk0b().f[5]++;
  const searchKeywords =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[72]++, ['requisitos', 'constituir', 'sociedad', 'SAS', 'SRL', 'SA', 'jurisprudencia', 'corte', 'constitucional', 'consejo', 'estado', 'c√≥digo', 'ley', 'decreto', 'art√≠culo', 'norma', 'legislaci√≥n', 'reforma', 'modificaci√≥n', 'vigencia', 'derogaci√≥n', 'proceso', 'tr√°mite', 'procedimiento', 'requisito', 'documento', 'certificado', 'registro', 'matr√≠cula', 'colombia', 'colombiano', 'derecho', 'legal', 'jur√≠dico', 'contrato', 'obligaci√≥n', 'responsabilidad', 'da√±o', 'penal', 'civil', 'comercial', 'laboral', 'administrativo', 'tributario', 'fiscal', 'impuesto', 'DIAN', 'superintendencia', 'ministerio', 'gobierno', 'estado', 'municipio', 'departamento', 'valor financiero', 'cuentas', 'participaci√≥n', 'financiero', 'bancario', 'cr√©dito', 'pr√©stamo', 'inversi√≥n', 'capital']);
  const lowerQuery =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[73]++, query.toLowerCase());
  // Ser m√°s agresivo: si contiene cualquier palabra legal, buscar
  const hasLegalKeyword =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[74]++, searchKeywords.some(keyword => {
    /* istanbul ignore next */
    cov_2jt6mvqk0b().f[6]++;
    cov_2jt6mvqk0b().s[75]++;
    return lowerQuery.includes(keyword);
  }));
  // Tambi√©n buscar si la consulta es larga (probablemente compleja)
  const isComplexQuery =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[76]++, query.length > 30);
  // Buscar si contiene signos de interrogaci√≥n m√∫ltiples o puntos
  const hasMultipleQuestions =
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().s[77]++, (
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[16][0]++, query.match(/\?/g)) ||
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[16][1]++, [])).length > 0);
  /* istanbul ignore next */
  cov_2jt6mvqk0b().s[78]++;
  return /* istanbul ignore next */(cov_2jt6mvqk0b().b[17][0]++, hasLegalKeyword) ||
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[17][1]++, isComplexQuery) ||
  /* istanbul ignore next */
  (cov_2jt6mvqk0b().b[17][2]++, hasMultipleQuestions);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmp0Nm12cWswYiIsImFjdHVhbENvdmVyYWdlIiwicyIsImV4cG9ydHMiLCJQT1NUIiwidG9uZ3lpX3VuaWZpZWRfbGVnYWxfYWdlbnRfMSIsInJlcXVpcmUiLCJjaGF0X21lbW9yeV9tYW5hZ2VyXzEiLCJERUZBVUxUX01BWF9UT0tFTlMiLCJERUZBVUxUX1RFTVBFUkFUVVJFIiwicmVxdWVzdCIsImYiLCJjaGF0U2V0dGluZ3MiLCJtZXNzYWdlcyIsImNoYXRJZCIsInVzZXJJZCIsImpzb24iLCJhcGlLZXkiLCJiIiwicHJvY2VzcyIsImVudiIsIk9QRU5ST1VURVJfQVBJX0tFWSIsIkVycm9yIiwidXNlclF1ZXJ5IiwiZXh0cmFjdExhc3RVc2VyTWVzc2FnZSIsIm1vZGVsTmFtZSIsIm1vZGVsIiwiZmluYWxDaGF0SWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiZmluYWxVc2VySWQiLCJjb25zb2xlIiwibG9nIiwicmVwZWF0IiwibWVtb3J5TWFuYWdlciIsIkNoYXRNZW1vcnlNYW5hZ2VyIiwiZ2V0SW5zdGFuY2UiLCJjaGF0Q29udGV4dCIsImdldENoYXRDb250ZXh0IiwicmVsZXZhbnRIaXN0b3J5IiwiZ2V0UmVsZXZhbnRIaXN0b3J5IiwibGVuZ3RoIiwiY3VycmVudENvbnRleHQiLCJyZXF1aXJlc1NlYXJjaCIsImRldGVjdFNlYXJjaFJlcXVpcmVtZW50IiwicmVzcG9uc2VDb250ZW50IiwidW5pZmllZEFnZW50IiwiY3JlYXRlVG9uZ3lpVW5pZmllZExlZ2FsQWdlbnQiLCJtYXhSb3VuZHMiLCJlbmFibGVDb250aW51b3VzVmVyaWZpY2F0aW9uIiwiZW5hYmxlSXRlcmF0aXZlUmVmaW5lbWVudCIsImVuYWJsZU1lbW9yeSIsImVuYWJsZUFudGlIYWxsdWNpbmF0aW9uIiwicHJlZmVycmVkU291cmNlcyIsInF1YWxpdHlUaHJlc2hvbGQiLCJ1bmlmaWVkUmVzcG9uc2UiLCJwcm9jZXNzTGVnYWxRdWVyeSIsImFuYWx5c2lzIiwicmVzZWFyY2hNb2RlIiwibWV0YWRhdGEiLCJ0b3RhbFJvdW5kcyIsInRvdGFsU291cmNlcyIsInZlcmlmaWNhdGlvblBhc3NlZCIsImNvbmZpZGVuY2UiLCJ0b0ZpeGVkIiwicHJvY2Vzc2luZ1RpbWUiLCJmaW5hbEFuc3dlciIsInNlYXJjaEVycm9yIiwiZXJyb3IiLCJ1c2VyTWVzc2FnZUlkIiwic2F2ZU1lc3NhZ2UiLCJzdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsImNodW5rcyIsInNwbGl0IiwiaW5kZXgiLCJwdXNoQ2h1bmsiLCJjaHVuayIsImVucXVldWUiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsInNldFRpbWVvdXQiLCJjbG9zZSIsImFzc2lzdGFudE1lc3NhZ2VJZCIsInNlYXJjaFJvdW5kcyIsInRvdGFsU2VhcmNoZXMiLCJ0b3RhbFJlc3VsdHMiLCJmaW5hbFF1YWxpdHkiLCJtb2RlbERlY2lzaW9ucyIsInNlYXJjaFN0cmF0ZWd5IiwiUmVzcG9uc2UiLCJoZWFkZXJzIiwibWVzc2FnZSIsInN0YXR1cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJydW50aW1lIiwibGFzdFVzZXJNZXNzYWdlIiwicmV2ZXJzZSIsImZpbmQiLCJtIiwicm9sZSIsImNvbnRlbnQiLCJxdWVyeSIsInNlYXJjaEtleXdvcmRzIiwibG93ZXJRdWVyeSIsInRvTG93ZXJDYXNlIiwiaGFzTGVnYWxLZXl3b3JkIiwic29tZSIsImtleXdvcmQiLCJpbmNsdWRlcyIsImlzQ29tcGxleFF1ZXJ5IiwiaGFzTXVsdGlwbGVRdWVzdGlvbnMiLCJtYXRjaCJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGVkcm9cXERvY3VtZW50c1xcR2l0SHViXFxBc2lzdGVudGUtTGVnYWwtSW50ZWxpZ2VudGVcXGFwcFxcYXBpXFxjaGF0XFxsZWdhbFxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhdFNldHRpbmdzIH0gZnJvbSBcIkAvdHlwZXNcIlxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBjcmVhdGVUb25neWlVbmlmaWVkTGVnYWxBZ2VudCB9IGZyb20gXCJAL2xpYi9hZ2VudHMvdG9uZ3lpLXVuaWZpZWQtbGVnYWwtYWdlbnRcIlxuaW1wb3J0IHsgQ2hhdE1lbW9yeU1hbmFnZXIgfSBmcm9tIFwiQC9saWIvbWVtb3J5L2NoYXQtbWVtb3J5LW1hbmFnZXJcIlxuXG5jb25zdCBERUZBVUxUX01BWF9UT0tFTlMgPSA0MDAwXG5jb25zdCBERUZBVUxUX1RFTVBFUkFUVVJFID0gMC4zXG5cbmludGVyZmFjZSBSZXF1ZXN0Qm9keSB7XG4gIGNoYXRTZXR0aW5nczogQ2hhdFNldHRpbmdzXG4gIG1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6IFwic3lzdGVtXCIgfCBcInVzZXJcIiB8IFwiYXNzaXN0YW50XCI7IGNvbnRlbnQ6IHN0cmluZyB9PlxuICBjaGF0SWQ/OiBzdHJpbmdcbiAgdXNlcklkPzogc3RyaW5nXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3QgeyBjaGF0U2V0dGluZ3MsIG1lc3NhZ2VzLCBjaGF0SWQsIHVzZXJJZCB9ID0gKGF3YWl0IHJlcXVlc3QuanNvbigpKSBhcyBSZXF1ZXN0Qm9keVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZIHx8IFwiXCJcblxuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiT3BlblJvdXRlciBBUEkgS2V5IG5vIGNvbmZpZ3VyYWRhLiBEZWZpbmUgT1BFTlJPVVRFUl9BUElfS0VZLlwiXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgdXNlclF1ZXJ5ID0gZXh0cmFjdExhc3RVc2VyTWVzc2FnZShtZXNzYWdlcylcbiAgICBjb25zdCBtb2RlbE5hbWUgPSBjaGF0U2V0dGluZ3MubW9kZWwgYXMgc3RyaW5nXG4gICAgXG4gICAgLy8gR2VuZXJhciBJRHMgw7puaWNvcyBwYXJhIGVsIGNoYXQgc2kgbm8gc2UgcHJvcG9yY2lvbmFuXG4gICAgY29uc3QgZmluYWxDaGF0SWQgPSBjaGF0SWQgfHwgYGNoYXQtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG4gICAgY29uc3QgZmluYWxVc2VySWQgPSB1c2VySWQgfHwgXCJ1c3VhcmlvLWFub25pbW9cIlxuXG4gICAgY29uc29sZS5sb2coYFxcbvCfp6AgVE9OR1lJIFJFQUNUIEFHRU5UIC0gU0lTVEVNQSBDT01QTEVUT2ApXG4gICAgY29uc29sZS5sb2coYPCfk50gUXVlcnk6IFwiJHt1c2VyUXVlcnl9XCJgKVxuICAgIGNvbnNvbGUubG9nKGDwn5KsIENoYXQgSUQ6ICR7ZmluYWxDaGF0SWR9YClcbiAgICBjb25zb2xlLmxvZyhg8J+RpCBVc2VyIElEOiAke2ZpbmFsVXNlcklkfWApXG4gICAgY29uc29sZS5sb2coYPCfpJYgTW9kZWxvOiAke21vZGVsTmFtZX1gKVxuICAgIGNvbnNvbGUubG9nKGAkeyc9Jy5yZXBlYXQoODApfWApXG5cbiAgICAvLyBJbmljaWFsaXphciBzaXN0ZW1hIGRlIG1lbW9yaWFcbiAgICBjb25zdCBtZW1vcnlNYW5hZ2VyID0gQ2hhdE1lbW9yeU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGNvbnN0IGNoYXRDb250ZXh0ID0gYXdhaXQgbWVtb3J5TWFuYWdlci5nZXRDaGF0Q29udGV4dChmaW5hbENoYXRJZCwgZmluYWxVc2VySWQpXG4gICAgXG4gICAgLy8gT2J0ZW5lciBoaXN0b3JpYWwgcmVsZXZhbnRlXG4gICAgY29uc3QgcmVsZXZhbnRIaXN0b3J5ID0gYXdhaXQgbWVtb3J5TWFuYWdlci5nZXRSZWxldmFudEhpc3RvcnkoXG4gICAgICBmaW5hbENoYXRJZCwgXG4gICAgICBmaW5hbFVzZXJJZCwgXG4gICAgICB1c2VyUXVlcnksIFxuICAgICAgMTBcbiAgICApXG5cbiAgICBjb25zb2xlLmxvZyhg8J+noCBNZW1vcmlhIGNhcmdhZGE6ICR7cmVsZXZhbnRIaXN0b3J5Lmxlbmd0aH0gbWVuc2FqZXMgcmVsZXZhbnRlc2ApXG4gICAgY29uc29sZS5sb2coYPCfk4ogQ29udGV4dG8gYWN0dWFsOiAke2NoYXRDb250ZXh0LmN1cnJlbnRDb250ZXh0Lmxlbmd0aH0gY2FyYWN0ZXJlc2ApXG5cbiAgICAvLyBEZXRlY3RhciBzaSBsYSBjb25zdWx0YSByZXF1aWVyZSBiw7pzcXVlZGEgd2ViXG4gICAgY29uc3QgcmVxdWlyZXNTZWFyY2ggPSBkZXRlY3RTZWFyY2hSZXF1aXJlbWVudCh1c2VyUXVlcnkpXG4gICAgXG4gICAgbGV0IHJlc3BvbnNlQ29udGVudCA9IFwiXCJcblxuICAgIGlmIChyZXF1aXJlc1NlYXJjaCkge1xuICAgICAgY29uc29sZS5sb2coYPCflI0gQ29uc3VsdGEgcmVxdWllcmUgYsO6c3F1ZWRhIHdlYiAtIEVqZWN1dGFuZG8gQWdlbnRlIFVuaWZpY2Fkb2ApXG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzYXIgYWdlbnRlIFRvbmd5aSBVbmlmaWNhZG8gY29uIHBhcmFkaWdtYXMgb2ZpY2lhbGVzIGRlIERlZXBSZXNlYXJjaFxuICAgICAgICBjb25zdCB1bmlmaWVkQWdlbnQgPSBjcmVhdGVUb25neWlVbmlmaWVkTGVnYWxBZ2VudChhcGlLZXksIHtcbiAgICAgICAgICBtYXhSb3VuZHM6IDgsXG4gICAgICAgICAgZW5hYmxlQ29udGludW91c1ZlcmlmaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVJdGVyYXRpdmVSZWZpbmVtZW50OiB0cnVlLFxuICAgICAgICAgIGVuYWJsZU1lbW9yeTogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVBbnRpSGFsbHVjaW5hdGlvbjogdHJ1ZSxcbiAgICAgICAgICBwcmVmZXJyZWRTb3VyY2VzOiBbJ29mZmljaWFsJywgJ2FjYWRlbWljJywgJ25ld3MnXSxcbiAgICAgICAgICBxdWFsaXR5VGhyZXNob2xkOiAwLjg1XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bmlmaWVkUmVzcG9uc2UgPSBhd2FpdCB1bmlmaWVkQWdlbnQucHJvY2Vzc0xlZ2FsUXVlcnkoXG4gICAgICAgICAgdXNlclF1ZXJ5LFxuICAgICAgICAgIGZpbmFsQ2hhdElkLFxuICAgICAgICAgIGZpbmFsVXNlcklkXG4gICAgICAgIClcblxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEFnZW50ZSBVbmlmaWNhZG8gY29tcGxldGFkbzpgKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAg8J+OryBNb2RvIGRlIGludmVzdGlnYWNpw7NuOiAke3VuaWZpZWRSZXNwb25zZS5hbmFseXNpcy5yZXNlYXJjaE1vZGV9YClcbiAgICAgICAgY29uc29sZS5sb2coYCAgIPCflI0gUm9uZGFzIGVqZWN1dGFkYXM6ICR7dW5pZmllZFJlc3BvbnNlLm1ldGFkYXRhLnRvdGFsUm91bmRzfWApXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDwn5OEIEZ1ZW50ZXMgZW5jb250cmFkYXM6ICR7dW5pZmllZFJlc3BvbnNlLm1ldGFkYXRhLnRvdGFsU291cmNlc31gKVxuICAgICAgICBjb25zb2xlLmxvZyhgICAg8J+boe+4jyBWZXJpZmljYWNpw7NuOiAke3VuaWZpZWRSZXNwb25zZS5hbmFseXNpcy52ZXJpZmljYXRpb25QYXNzZWQgPyAn4pyFJyA6ICfinYwnfWApXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDwn46vIENvbmZpYW56YTogJHt1bmlmaWVkUmVzcG9uc2UuYW5hbHlzaXMuY29uZmlkZW5jZS50b0ZpeGVkKDIpfWApXG4gICAgICAgIGNvbnNvbGUubG9nKGAgICDij7HvuI8gVGllbXBvOiAkeyh1bmlmaWVkUmVzcG9uc2UuYW5hbHlzaXMucHJvY2Vzc2luZ1RpbWUgLyAxMDAwKS50b0ZpeGVkKDEpfXNgKVxuXG4gICAgICAgICAgICAgICAgLy8gVXNhciBkaXJlY3RhbWVudGUgbGEgcmVzcHVlc3RhIGRlbCBtb2RlbG8gc2luIGFncmVnYXIgaW5mb3JtYWNpw7NuIGFkaWNpb25hbFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudCA9IHVuaWZpZWRSZXNwb25zZS5maW5hbEFuc3dlclxuXG4gICAgICB9IGNhdGNoIChzZWFyY2hFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3IgZW4gYWdlbnRlIHVuaWZpY2FkbzpgLCBzZWFyY2hFcnJvcilcbiAgICAgICAgXG4gICAgICAgIC8vIEZhbGxiYWNrIGEgcmVzcHVlc3RhIHNpbXBsZVxuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBGYWxsYmFjayBhIHJlc3B1ZXN0YSBkaXJlY3RhYClcbiAgICAgICAgcmVzcG9uc2VDb250ZW50ID0gYERpc2N1bHBlLCBodWJvIHVuIGVycm9yIHByb2Nlc2FuZG8gc3UgY29uc3VsdGEgY29uIGVsIHNpc3RlbWEgZGUgYW7DoWxpc2lzIGF2YW56YWRvLiBQb3IgZmF2b3IsIGludGVudGUgcmVmb3JtdWxhciBzdSBwcmVndW50YSBkZSBtYW5lcmEgbcOhcyBlc3BlY8OtZmljYS5gXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5KsIENvbnN1bHRhIHNpbXBsZSAtIFJlc3BvbmRpZW5kbyBkaXJlY3RhbWVudGVgKVxuICAgICAgcmVzcG9uc2VDb250ZW50ID0gYEVzdGEgY29uc3VsdGEgbm8gcmVxdWllcmUgYsO6c3F1ZWRhIHdlYiBlc3BlY8OtZmljYS4gUG9yIGZhdm9yLCBwcm9wb3JjaW9uZSBtw6FzIGRldGFsbGVzIHNvYnJlIHN1IGNvbnN1bHRhIGxlZ2FsIHBhcmEgb2J0ZW5lciB1bmEgcmVzcHVlc3RhIG3DoXMgY29tcGxldGEuYFxuICAgIH1cbiAgICBcbiAgICAvLyBHdWFyZGFyIG1lbnNhamUgZGVsIHVzdWFyaW8gZW4gbWVtb3JpYVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlSWQgPSBgdXNlci0ke0RhdGUubm93KCl9YFxuICAgIGF3YWl0IG1lbW9yeU1hbmFnZXIuc2F2ZU1lc3NhZ2UoXG4gICAgICBmaW5hbENoYXRJZCxcbiAgICAgIGZpbmFsVXNlcklkLFxuICAgICAgdXNlck1lc3NhZ2VJZCxcbiAgICAgIHVzZXJRdWVyeSxcbiAgICAgICd1c2VyJ1xuICAgIClcblxuICAgIC8vIENyZWFyIHN0cmVhbSBwZXJzb25hbGl6YWRvIHBhcmEgbGEgcmVzcHVlc3RhIGRlbCBhZ2VudGUgdW5pZmljYWRvXG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gcmVzcG9uc2VDb250ZW50LnNwbGl0KCcgJylcbiAgICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgICBcbiAgICAgICAgY29uc3QgcHVzaENodW5rID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChpbmRleCA8IGNodW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gY2h1bmtzW2luZGV4XSArIChpbmRleCA8IGNodW5rcy5sZW5ndGggLSAxID8gJyAnIDogJycpXG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNodW5rKSlcbiAgICAgICAgICAgIGluZGV4KytcbiAgICAgICAgICAgIHNldFRpbWVvdXQocHVzaENodW5rLCAzMCkgLy8gU2ltdWxhciBzdHJlYW1pbmcgbcOhcyByw6FwaWRvXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHVzaENodW5rKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gR3VhcmRhciByZXNwdWVzdGEgZGVsIGFzaXN0ZW50ZSBlbiBtZW1vcmlhXG4gICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZUlkID0gYGFzc2lzdGFudC0ke0RhdGUubm93KCl9YFxuICAgIGF3YWl0IG1lbW9yeU1hbmFnZXIuc2F2ZU1lc3NhZ2UoXG4gICAgICBmaW5hbENoYXRJZCxcbiAgICAgIGZpbmFsVXNlcklkLFxuICAgICAgYXNzaXN0YW50TWVzc2FnZUlkLFxuICAgICAgcmVzcG9uc2VDb250ZW50LFxuICAgICAgJ2Fzc2lzdGFudCcsXG4gICAgICB7XG4gICAgICAgIHNlYXJjaFJvdW5kczogcmVxdWlyZXNTZWFyY2ggPyA4IDogMCxcbiAgICAgICAgdG90YWxTZWFyY2hlczogcmVxdWlyZXNTZWFyY2ggPyAxIDogMCxcbiAgICAgICAgdG90YWxSZXN1bHRzOiByZXF1aXJlc1NlYXJjaCA/IDEgOiAwLFxuICAgICAgICBmaW5hbFF1YWxpdHk6IDksXG4gICAgICAgIG1vZGVsRGVjaXNpb25zOiByZXF1aXJlc1NlYXJjaCA/IDEgOiAwLFxuICAgICAgICBzZWFyY2hTdHJhdGVneTogcmVxdWlyZXNTZWFyY2ggPyBcIkFHRU5URV9VTklGSUNBRE9fVE9OR1lJXCIgOiBcIlJFU1BVRVNUQV9ESVJFQ1RBXCJcbiAgICAgIH1cbiAgICApXG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfkr4gUmVzcHVlc3RhIGRlbCBhZ2VudGUgdW5pZmljYWRvIGd1YXJkYWRhIGVuIG1lbW9yaWE6ICR7cmVzcG9uc2VDb250ZW50Lmxlbmd0aH0gY2FyYWN0ZXJlc2ApXG4gICAgXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShzdHJlYW0sIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgJ1RyYW5zZmVyLUVuY29kaW5nJzogJ2NodW5rZWQnLFxuICAgICAgfSxcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2xlZ2FsLXJvdXRlXSBFcnJvcjpcIiwgZXJyb3IpXG4gICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICBlcnJvcj8uZXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgIGVycm9yPy5tZXNzYWdlIHx8XG4gICAgICBcIkVycm9yIGVuIGVsIGFzaXN0ZW50ZSBsZWdhbCBjb2xvbWJpYW5vXCJcblxuICAgIGNvbnN0IHN0YXR1cyA9IHR5cGVvZiBlcnJvcj8uc3RhdHVzID09PSBcIm51bWJlclwiID8gZXJyb3Iuc3RhdHVzIDogNTAwXG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBlcnJvcjogXCJBU0lTVEVOVEVfTEVHQUxfRVJST1JcIixcbiAgICAgIH0pLFxuICAgICAgeyBzdGF0dXMgfVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcnVudGltZSA9IFwiZWRnZVwiXG5cbmZ1bmN0aW9uIGV4dHJhY3RMYXN0VXNlck1lc3NhZ2UobWVzc2FnZXM6IFJlcXVlc3RCb2R5W1wibWVzc2FnZXNcIl0pOiBzdHJpbmcge1xuICBjb25zdCBsYXN0VXNlck1lc3NhZ2UgPSBbLi4ubWVzc2FnZXNdLnJldmVyc2UoKS5maW5kKChtKSA9PiBtLnJvbGUgPT09IFwidXNlclwiKVxuICByZXR1cm4gdHlwZW9mIGxhc3RVc2VyTWVzc2FnZT8uY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgID8gbGFzdFVzZXJNZXNzYWdlLmNvbnRlbnRcbiAgICA6IFwiXCJcbn1cblxuZnVuY3Rpb24gZGV0ZWN0U2VhcmNoUmVxdWlyZW1lbnQocXVlcnk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBzZWFyY2hLZXl3b3JkcyA9IFtcbiAgICAncmVxdWlzaXRvcycsICdjb25zdGl0dWlyJywgJ3NvY2llZGFkJywgJ1NBUycsICdTUkwnLCAnU0EnLFxuICAgICdqdXJpc3BydWRlbmNpYScsICdjb3J0ZScsICdjb25zdGl0dWNpb25hbCcsICdjb25zZWpvJywgJ2VzdGFkbycsXG4gICAgJ2PDs2RpZ28nLCAnbGV5JywgJ2RlY3JldG8nLCAnYXJ0w61jdWxvJywgJ25vcm1hJywgJ2xlZ2lzbGFjacOzbicsXG4gICAgJ3JlZm9ybWEnLCAnbW9kaWZpY2FjacOzbicsICd2aWdlbmNpYScsICdkZXJvZ2FjacOzbicsXG4gICAgJ3Byb2Nlc28nLCAndHLDoW1pdGUnLCAncHJvY2VkaW1pZW50bycsICdyZXF1aXNpdG8nLFxuICAgICdkb2N1bWVudG8nLCAnY2VydGlmaWNhZG8nLCAncmVnaXN0cm8nLCAnbWF0csOtY3VsYScsXG4gICAgJ2NvbG9tYmlhJywgJ2NvbG9tYmlhbm8nLCAnZGVyZWNobycsICdsZWdhbCcsICdqdXLDrWRpY28nLFxuICAgICdjb250cmF0bycsICdvYmxpZ2FjacOzbicsICdyZXNwb25zYWJpbGlkYWQnLCAnZGHDsW8nLFxuICAgICdwZW5hbCcsICdjaXZpbCcsICdjb21lcmNpYWwnLCAnbGFib3JhbCcsICdhZG1pbmlzdHJhdGl2bycsXG4gICAgJ3RyaWJ1dGFyaW8nLCAnZmlzY2FsJywgJ2ltcHVlc3RvJywgJ0RJQU4nLCAnc3VwZXJpbnRlbmRlbmNpYScsXG4gICAgJ21pbmlzdGVyaW8nLCAnZ29iaWVybm8nLCAnZXN0YWRvJywgJ211bmljaXBpbycsICdkZXBhcnRhbWVudG8nLFxuICAgICd2YWxvciBmaW5hbmNpZXJvJywgJ2N1ZW50YXMnLCAncGFydGljaXBhY2nDs24nLCAnZmluYW5jaWVybycsXG4gICAgJ2JhbmNhcmlvJywgJ2Nyw6lkaXRvJywgJ3Byw6lzdGFtbycsICdpbnZlcnNpw7NuJywgJ2NhcGl0YWwnXG4gIF1cbiAgXG4gIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpXG4gIFxuICAvLyBTZXIgbcOhcyBhZ3Jlc2l2bzogc2kgY29udGllbmUgY3VhbHF1aWVyIHBhbGFicmEgbGVnYWwsIGJ1c2NhclxuICBjb25zdCBoYXNMZWdhbEtleXdvcmQgPSBzZWFyY2hLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJRdWVyeS5pbmNsdWRlcyhrZXl3b3JkKSlcbiAgXG4gIC8vIFRhbWJpw6luIGJ1c2NhciBzaSBsYSBjb25zdWx0YSBlcyBsYXJnYSAocHJvYmFibGVtZW50ZSBjb21wbGVqYSlcbiAgY29uc3QgaXNDb21wbGV4UXVlcnkgPSBxdWVyeS5sZW5ndGggPiAzMFxuICBcbiAgLy8gQnVzY2FyIHNpIGNvbnRpZW5lIHNpZ25vcyBkZSBpbnRlcnJvZ2FjacOzbiBtw7psdGlwbGVzIG8gcHVudG9zXG4gIGNvbnN0IGhhc011bHRpcGxlUXVlc3Rpb25zID0gKHF1ZXJ5Lm1hdGNoKC9cXD8vZykgfHwgW10pLmxlbmd0aCA+IDBcbiAgXG4gIHJldHVybiBoYXNMZWdhbEtleXdvcmQgfHwgaXNDb21wbGV4UXVlcnkgfHwgaGFzTXVsdGlwbGVRdWVzdGlvbnNcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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