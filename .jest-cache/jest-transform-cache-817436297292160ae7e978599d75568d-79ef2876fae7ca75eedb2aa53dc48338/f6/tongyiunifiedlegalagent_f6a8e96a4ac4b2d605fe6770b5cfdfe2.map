{"version":3,"names":["cov_ro4epubbt","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","createTongyiUnifiedLegalAgent","openai_1","__importDefault","require","chat_memory_manager_1","anti_hallucination_system_1","unified_deep_research_orchestrator_1","TongyiUnifiedLegalAgent","client","memoryManager","antiHallucinationSystem","unifiedOrchestrator","config","modelName","constructor","apiKey","enableMemory","enableAntiHallucination","enableContinuousVerification","legalDomain","qualityThreshold","default","baseURL","ChatMemoryManager","getInstance","AntiHallucinationSystem","UnifiedDeepResearchOrchestrator","processLegalQuery","userQuery","chatId","userId","console","log","chatContext","getChatContext","currentContext","relevantHistory","conversationHistory","length","cachedSources","qualityMetrics","averageQuality","toFixed","searchHistory","researchResult","orchestrate","mode","maxRounds","maxSearchesPerRound","enableIterativeRefinement","error","finalAnswer","message","analysis","researchMode","complexity","qualityScore","confidence","verificationPassed","processingTime","recommendations","warnings","metadata","totalRounds","totalSearches","totalSources","toolsUsed","memoryUsed","contextRetrieved"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\agents\\tongyi-unified-legal-agent.ts"],"sourcesContent":["/**\r\n * Agente Unificado Tongyi para Asistente Legal\r\n * Versi√≥n simplificada que integra todos los sistemas existentes\r\n */\r\n\r\nimport OpenAI from \"openai\"\r\nimport { ChatMemoryManager } from \"@/lib/memory/chat-memory-manager\"\r\nimport { AntiHallucinationSystem } from \"@/lib/anti-hallucination/anti-hallucination-system\"\r\nimport { UnifiedDeepResearchOrchestrator, UnifiedResearchConfig, UnifiedResearchResult } from \"@/lib/tongyi/unified-deep-research-orchestrator\"\r\n\r\nexport interface UnifiedLegalAgentConfig extends Partial<UnifiedResearchConfig> {\r\n  enableMemory?: boolean\r\n  enableAntiHallucination?: boolean\r\n  preferredSources?: string[]\r\n}\r\n\r\nexport class TongyiUnifiedLegalAgent {\r\n  private client: OpenAI\r\n  private memoryManager: ChatMemoryManager\r\n  private antiHallucinationSystem: AntiHallucinationSystem\r\n  private unifiedOrchestrator: UnifiedDeepResearchOrchestrator\r\n  private config: UnifiedLegalAgentConfig\r\n  private modelName: string = 'alibaba/tongyi-deepresearch-30b-a3b'\r\n\r\n  constructor(apiKey: string, config: UnifiedLegalAgentConfig = {}) {\r\n    this.config = {\r\n      enableMemory: true,\r\n      enableAntiHallucination: true,\r\n      enableContinuousVerification: true,\r\n      legalDomain: 'colombia',\r\n      qualityThreshold: 0.85,\r\n      modelName: this.modelName,\r\n      apiKey: apiKey,\r\n      ...config\r\n    }\r\n\r\n    this.client = new OpenAI({\r\n      apiKey,\r\n      baseURL: \"https://openrouter.ai/api/v1\"\r\n    })\r\n    this.memoryManager = ChatMemoryManager.getInstance()\r\n    this.antiHallucinationSystem = new AntiHallucinationSystem(apiKey)\r\n    this.unifiedOrchestrator = new UnifiedDeepResearchOrchestrator(this.config as UnifiedResearchConfig)\r\n  }\r\n\r\n  public async processLegalQuery(\r\n    userQuery: string,\r\n    chatId: string,\r\n    userId: string,\r\n  ): Promise<UnifiedResearchResult> {\r\n    console.log(`üöÄ TongyiUnifiedLegalAgent: Procesando consulta legal para Chat ID: ${chatId}, User ID: ${userId}`)\r\n    \r\n    try {\r\n      // 1. Build Context (from memory)\r\n      const chatContext = this.config.enableMemory\r\n        ? await this.memoryManager.getChatContext(chatId, userId)\r\n        : { currentContext: \"\", relevantHistory: [] }\r\n\r\n      console.log(`üèóÔ∏è [Agent Context] Construyendo contexto para chat ${chatId}`)\r\n      console.log(`üìä [Agent Context] Contexto construido:`)\r\n      console.log(`   üí¨ Mensajes: ${chatContext.conversationHistory?.length || 0}`)\r\n      console.log(`   üìÑ Fuentes cacheadas: ${chatContext.cachedSources?.length || 0}`)\r\n      console.log(`   üìà Calidad promedio: ${chatContext.qualityMetrics?.averageQuality?.toFixed(2) || '0.80'}`)\r\n      console.log(`   üîç Consultas anteriores: ${chatContext.searchHistory?.length || 0}`)\r\n\r\n      // 2. Orchestrate Deep Research\r\n      const researchResult = await this.unifiedOrchestrator.orchestrate(\r\n        userQuery,\r\n        chatId,\r\n        userId,\r\n        {\r\n          mode: this.config.mode,\r\n          maxRounds: this.config.maxRounds,\r\n          maxSearchesPerRound: this.config.maxSearchesPerRound,\r\n          enableContinuousVerification: this.config.enableContinuousVerification,\r\n          enableIterativeRefinement: this.config.enableIterativeRefinement,\r\n          legalDomain: this.config.legalDomain,\r\n          qualityThreshold: this.config.qualityThreshold,\r\n          modelName: this.modelName,\r\n          apiKey: this.config.apiKey,\r\n        }\r\n      )\r\n\r\n      console.log(`‚úÖ TongyiUnifiedLegalAgent: Investigaci√≥n completada.`)\r\n      return researchResult\r\n\r\n    } catch (error) {\r\n      console.error(`‚ùå Error en TongyiUnifiedLegalAgent:`, error)\r\n      \r\n      // Return error result\r\n      return {\r\n        finalAnswer: `Disculpe, hubo un error procesando su consulta: ${error.message}`,\r\n        sources: [],\r\n        analysis: {\r\n          researchMode: 'react',\r\n          complexity: 'simple',\r\n          qualityScore: 0.1,\r\n          confidence: 0.1,\r\n          verificationPassed: false,\r\n          processingTime: 0,\r\n        },\r\n        recommendations: [],\r\n        warnings: [`Error cr√≠tico: ${error.message}`],\r\n        metadata: {\r\n          totalRounds: 0,\r\n          totalSearches: 0,\r\n          totalSources: 0,\r\n          toolsUsed: [],\r\n          memoryUsed: false,\r\n          contextRetrieved: false,\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function createTongyiUnifiedLegalAgent(apiKey: string, config?: UnifiedLegalAgentConfig): TongyiUnifiedLegalAgent {\r\n  return new TongyiUnifiedLegalAgent(apiKey, config)\r\n}"],"mappings":"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","ignoreList":[]}