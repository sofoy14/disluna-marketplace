{"version":3,"names":["cov_80dj214z5","actualCoverage","s","exports","runLegalSearchWorkflow","legal_agent_1","require","smart_legal_detector_1","legal_search_specialized_1","DEFAULT_MAX_SEARCH_ATTEMPTS","DEFAULT_SEARCH_TIMEOUT_MS","DEFAULT_MAX_RESULTS","SearchTimeoutError","Error","constructor","message","f","name","userQuery","options","detection","detectLegalQuery","logLegalDetection","plannedQueries","sanitizeQueries","searchQueries","shouldSearch","b","requiresWebSearch","length","baseQuery","normalizeLegalQuery","queriesToTry","planBasedMax","maxAttempts","maxResults","timeoutMs","searchTimeoutMs","executedQueries","aggregatedResults","attempts","timedOut","errorMessage","lastResponse","start","Date","now","query","trimmedQuery","trim","push","response","withTimeout","searchLegalSpecialized","success","results","mergeResults","error","durationMs","searchExecuted","searchSuccessful","finalResponse","buildAggregatedResponse","sources","mapSourcesForResponse","modelContext","buildModelContext","searchResponse","metadata","promise","timeoutHandle","timeoutPromise","Promise","_","reject","setTimeout","race","clearTimeout","limitedResults","slice","map","item","url","timestamp","toISOString","searchStrategy","params","reason","confidence","toFixed","join","failureReason","summary","formatLegalSearchContext","headerLines","resultsBlock","formatResultsForPrompt","verificationBlock","buildVerificationChecklist","result","index","label","getSourceLabel","type","hostname","extractHostname","snippet","sanitizeSnippet","title","URL","_error","replace","accumulator","incoming","seenUrls","Set","has","add","sort","a","relevance","queries","filter","lines","forEach","references","extractLegalReferences","text","patterns","matches","pattern","found","match","normalizeReference","Array","from","reference","toLowerCase"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\tools\\legal-search-orchestrator.ts"],"sourcesContent":["import { formatLegalSearchContext, normalizeLegalQuery } from \"@/lib/prompts/legal-agent\"\r\nimport {\r\n  detectLegalQuery,\r\n  logLegalDetection,\r\n  LegalDetectionResult,\r\n} from \"./smart-legal-detector\"\r\nimport { searchLegalSpecialized } from \"./legal-search-specialized\"\r\nimport type { LegalSearchResponse, LegalSearchResult } from \"./legal-search-specialized\"\r\n\r\nconst DEFAULT_MAX_SEARCH_ATTEMPTS = 1\r\nconst DEFAULT_SEARCH_TIMEOUT_MS = 20000\r\nconst DEFAULT_MAX_RESULTS = 5\r\n\r\nclass SearchTimeoutError extends Error {\r\n  constructor(message: string) {\r\n    super(message)\r\n    this.name = \"SearchTimeoutError\"\r\n  }\r\n}\r\n\r\nexport interface LegalSourceSummary {\r\n  title: string\r\n  url: string\r\n  type: LegalSearchResult[\"type\"]\r\n}\r\n\r\nexport interface LegalSearchWorkflowMetadata {\n  attempts: number\n  maxAttempts: number\n  timedOut: boolean\n  durationMs: number\n  plannedQueries: string[]\n  executedQueries: string[]\n  searchExecuted: boolean\n  searchSuccessful: boolean\n  errorMessage?: string\n}\n\r\nexport interface LegalSearchWorkflowResult {\r\n  detection: LegalDetectionResult\r\n  searchResponse?: LegalSearchResponse\r\n  modelContext: string\r\n  sources: LegalSourceSummary[]\r\n  aggregatedResults: LegalSearchResult[]\r\n  metadata: LegalSearchWorkflowMetadata\r\n}\r\n\r\ntype WorkflowOptions = {\r\n  maxResults?: number\r\n  maxAttempts?: number\r\n  searchTimeoutMs?: number\r\n  searchQueries?: string[]\r\n}\r\n\r\nexport async function runLegalSearchWorkflow(\r\n  userQuery: string,\r\n  options?: WorkflowOptions\r\n): Promise<LegalSearchWorkflowResult> {\r\n  const detection = detectLegalQuery(userQuery)\r\n  logLegalDetection(userQuery, detection)\r\n\r\n  const plannedQueries = sanitizeQueries(options?.searchQueries)\r\n  const shouldSearch = detection.requiresWebSearch || plannedQueries.length > 0\r\n\r\n  const baseQuery = normalizeLegalQuery(userQuery)\r\n  const queriesToTry = shouldSearch\r\n    ? plannedQueries.length > 0\r\n      ? plannedQueries\r\n      : [baseQuery]\r\n    : []\r\n\r\n  const planBasedMax = plannedQueries.length > 0 ? plannedQueries.length : 0\r\n\r\n  const maxAttempts =\r\n    options?.maxAttempts ??\r\n    (planBasedMax > 0 ? planBasedMax : DEFAULT_MAX_SEARCH_ATTEMPTS)\r\n  const maxResults = options?.maxResults ?? DEFAULT_MAX_RESULTS\r\n  const timeoutMs = options?.searchTimeoutMs ?? DEFAULT_SEARCH_TIMEOUT_MS\r\n\r\n  const executedQueries: string[] = []\r\n  const aggregatedResults: LegalSearchResult[] = []\r\n\r\n  let attempts = 0\r\n  let timedOut = false\r\n  let errorMessage: string | undefined\r\n  let lastResponse: LegalSearchResponse | undefined\r\n\r\n  const start = Date.now()\r\n\r\n  for (const query of queriesToTry) {\r\n    if (attempts >= maxAttempts) {\r\n      break\r\n    }\r\n\r\n    const trimmedQuery = query.trim()\r\n    if (!trimmedQuery) {\r\n      continue\r\n    }\r\n\r\n    attempts += 1\r\n    executedQueries.push(trimmedQuery)\r\n\r\n    try {\r\n      const response = await withTimeout(\r\n        searchLegalSpecialized(trimmedQuery, maxResults),\r\n        timeoutMs\r\n      )\r\n\r\n      lastResponse = response\r\n\r\n      if (response.success && response.results?.length) {\r\n        mergeResults(aggregatedResults, response.results, maxResults)\r\n      } else if (response.error) {\r\n        errorMessage = response.error\r\n      }\r\n    } catch (error) {\r\n      if (error instanceof SearchTimeoutError) {\r\n        timedOut = true\r\n        errorMessage = error.message\r\n        break\r\n      }\r\n\r\n      if (error instanceof Error) {\r\n        errorMessage = error.message\r\n      } else {\r\n        errorMessage = \"Error desconocido en la busqueda legal especializada\"\r\n      }\r\n    }\r\n\r\n    if (aggregatedResults.length >= maxResults) {\r\n      break\r\n    }\r\n  }\r\n\r\n  const durationMs = Date.now() - start\r\n  const searchExecuted = executedQueries.length > 0\r\n  const searchSuccessful = aggregatedResults.length > 0\r\n\r\n  const finalResponse = searchSuccessful\r\n    ? buildAggregatedResponse(userQuery, aggregatedResults, maxResults, executedQueries.length)\r\n    : lastResponse\r\n\r\n  const sources = searchSuccessful\r\n    ? mapSourcesForResponse(aggregatedResults, maxResults)\r\n    : []\r\n\r\n  const modelContext = buildModelContext({\n    userQuery,\n    detection,\n    plannedQueries,\n    executedQueries,\n    searchExecuted,\n    searchSuccessful,\n    aggregatedResults,\n    lastResponse,\n    timedOut,\n    errorMessage,\n    maxResults,\n  })\n\r\n  return {\r\n    detection,\r\n    searchResponse: finalResponse,\r\n    modelContext,\r\n    sources,\r\n    aggregatedResults,\r\n    metadata: {\r\n      attempts,\r\n      maxAttempts,\r\n      timedOut,\r\n      durationMs,\r\n      plannedQueries,\r\n      executedQueries,\r\n      searchExecuted,\r\n      searchSuccessful,\r\n      errorMessage,\r\n    },\r\n  }\r\n}\r\n\r\nasync function withTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\r\n  let timeoutHandle: ReturnType<typeof setTimeout>\r\n\r\n  const timeoutPromise = new Promise<T>((_, reject) => {\r\n    timeoutHandle = setTimeout(() => {\r\n      reject(\r\n        new SearchTimeoutError(\r\n          `La busqueda legal supero el limite de ${timeoutMs} ms`\r\n        )\r\n      )\r\n    }, timeoutMs)\r\n  })\r\n\r\n  try {\r\n    return await Promise.race([promise, timeoutPromise])\r\n  } finally {\r\n    clearTimeout(timeoutHandle!)\r\n  }\r\n}\r\n\r\nfunction buildAggregatedResponse(\r\n  userQuery: string,\r\n  results: LegalSearchResult[],\r\n  maxResults: number,\r\n  attempts: number\r\n): LegalSearchResponse {\r\n  const limitedResults = results.slice(0, maxResults)\r\n\r\n  return {\r\n    success: true,\r\n    query: userQuery,\r\n    results: limitedResults,\r\n    sources: limitedResults.map((item) => item.url),\r\n    timestamp: new Date().toISOString(),\r\n    searchStrategy: attempts > 1 ? `Plan con ${attempts} consultas` : \"Consulta unica\",\r\n  }\r\n}\r\n\r\nfunction buildModelContext(params: {\n  userQuery: string\n  detection: LegalDetectionResult\n  plannedQueries: string[]\n  executedQueries: string[]\n  searchExecuted: boolean\n  searchSuccessful: boolean\n  aggregatedResults: LegalSearchResult[]\n  lastResponse?: LegalSearchResponse\n  timedOut: boolean\n  errorMessage?: string\n  maxResults: number\n}): string {\n  const {\r\n    userQuery,\r\n    detection,\r\n    plannedQueries,\r\n    executedQueries,\r\n    searchExecuted,\r\n    searchSuccessful,\r\n    aggregatedResults,\r\n    lastResponse,\r\n    timedOut,\r\n    errorMessage,\r\n    maxResults,\r\n  } = params\r\n\r\n  if (!searchExecuted) {\r\n    return [\r\n      \"## ANALISIS AUTOMATICO DE BUSQUEDA\",\r\n      \"Decision: no ejecutar busqueda web externa.\",\r\n      `Motivo: ${detection.reason}.`,\r\n      `Confianza del clasificador: ${(detection.confidence * 100).toFixed(1)} %.`,\r\n      plannedQueries.length\r\n        ? `Plan del modelo: ${plannedQueries.join(\" | \")}`\r\n        : \"Plan del modelo: sin consultas adicionales.\",\r\n      \"\",\r\n      \"INSTRUCCIONES PARA EL MODELO:\",\r\n      \"- Responde con tu conocimiento legal colombiano interno.\",\r\n      \"- Evita mencionar que se realizo una busqueda web.\",\r\n      \"- Si consideras necesaria una verificacion adicional, sugiere explicitamente una nueva busqueda al usuario.\",\r\n      \"- Manten la seccion `## Fuentes Consultadas` indicando que no se emplearon URLs externas en esta respuesta.\",\r\n    ].join(\"\\n\")\r\n  }\r\n\r\n  if (timedOut) {\r\n    return [\r\n      \"## BUSQUEDA JURIDICA EJECUTADA CON ERROR\",\r\n      `Consulta original: \"${userQuery}\".`,\r\n      `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\r\n      `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\r\n      `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\r\n      \"Resultado: la busqueda excedio el tiempo limite.\",\r\n      \"\",\r\n      \"INSTRUCCIONES PARA EL MODELO:\",\r\n      \"- Explica que se intento una busqueda web juridica pero expiro por tiempo.\",\r\n      \"- Responde con tu conocimiento legal vigente, indicando las salvedades necesarias.\",\r\n      \"- Manten la seccion `## Fuentes Consultadas` aclarando que no se obtuvieron fuentes externas.\",\r\n    ].join(\"\\n\")\r\n  }\r\n\r\n  if (!searchSuccessful) {\r\n    const failureReason = lastResponse?.error\r\n      ? `Detalle tecnico: ${lastResponse.error}.`\r\n      : errorMessage\r\n      ? `Detalle tecnico: ${errorMessage}.`\r\n      : \"Detalle tecnico: la API no devolvio resultados relevantes.\"\r\n\r\n    const summary = [\r\n      \"## BUSQUEDA JURIDICA EJECUTADA SIN FUENTES\",\r\n      `Consulta original: \"${userQuery}\".`,\r\n      `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\r\n      `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\r\n      `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\r\n      \"Resultado: no se encontraron fuentes confiables.\",\r\n      failureReason,\r\n      \"\",\r\n    ].join(\"\\n\")\r\n\r\n    return `${summary}${formatLegalSearchContext(\r\n      \"No se obtuvieron fuentes verificables para esta consulta. Aun asi, debes explicar tu respuesta y sugerir pasos de verificacion adicionales.\",\r\n      userQuery\r\n    )}`\r\n  }\r\n\r\n  const headerLines = [\r\n    \"## BUSQUEDA JURIDICA EJECUTADA\",\r\n    `Consulta original: \"${userQuery}\".`,\r\n    `Consultas planificadas: ${plannedQueries.join(\" | \") || \"no definidas\"}.`,\r\n    `Consultas ejecutadas: ${executedQueries.join(\" | \") || \"ninguna\"}.`,\r\n    `Motor utilizado: Serper (maximo ${maxResults} resultados).`,\r\n    \"Fuentes priorizadas: sitios oficiales, academicos y especializados de Colombia.\",\r\n    \"\",\r\n  ]\r\n\r\n  const resultsBlock = formatResultsForPrompt(aggregatedResults, maxResults)\n  const verificationBlock = buildVerificationChecklist(aggregatedResults)\n\n  return formatLegalSearchContext(\n    [headerLines.join(\"\\n\") + resultsBlock, verificationBlock].join(\"\\n\\n\"),\n    userQuery\n  )\n}\n\nfunction formatResultsForPrompt(\n  results: LegalSearchResult[],\n  maxResults: number\n): string {\r\n  if (!results || results.length === 0) {\r\n    return \"No se encontraron fuentes legales relevantes.\"\r\n  }\r\n\r\n  return results\r\n    .slice(0, maxResults)\r\n    .map((result, index) => {\r\n      const label = getSourceLabel(result.type)\r\n      const hostname = extractHostname(result.url)\r\n      const snippet = sanitizeSnippet(result.snippet)\r\n\r\n      return [\r\n        `FUENTE ${index + 1} ${label}`,\r\n        `Titulo: ${result.title}`,\r\n        `Dominio: ${hostname}`,\r\n        `URL: ${result.url}`,\r\n        `Resumen: ${snippet}`,\r\n        \"---\",\r\n      ].join(\"\\n\")\r\n    })\r\n    .join(\"\\n\")\r\n}\r\n\r\nfunction mapSourcesForResponse(\r\n  results: LegalSearchResult[],\r\n  maxResults: number\r\n): LegalSourceSummary[] {\r\n  return results.slice(0, maxResults).map((result) => ({\r\n    title: result.title,\r\n    url: result.url,\r\n    type: result.type,\r\n  }))\r\n}\r\n\r\nfunction getSourceLabel(type: LegalSearchResult[\"type\"]): string {\r\n  switch (type) {\r\n    case \"official\":\r\n      return \"[OFICIAL]\"\r\n    case \"academic\":\r\n      return \"[ACADEMICA]\"\r\n    case \"news\":\r\n      return \"[PRENSA ESPECIALIZADA]\"\r\n    default:\r\n      return \"[FUENTE COMPLEMENTARIA]\"\r\n  }\r\n}\r\n\r\nfunction extractHostname(url: string): string {\r\n  try {\r\n    return new URL(url).hostname\r\n  } catch (_error) {\r\n    return \"dominio-desconocido\"\r\n  }\r\n}\r\n\r\nfunction sanitizeSnippet(snippet: string): string {\r\n  return snippet.replace(/\\s+/g, \" \").trim().slice(0, 500)\r\n}\r\n\r\nfunction mergeResults(\r\n  accumulator: LegalSearchResult[],\r\n  incoming: LegalSearchResult[],\r\n  maxResults: number\r\n) {\r\n  const seenUrls = new Set(accumulator.map((item) => item.url))\r\n\r\n  for (const result of incoming) {\r\n    if (seenUrls.has(result.url)) {\r\n      continue\r\n    }\r\n\r\n    accumulator.push(result)\r\n    seenUrls.add(result.url)\r\n\r\n    if (accumulator.length >= maxResults * 2) {\r\n      break\r\n    }\r\n  }\r\n\r\n  accumulator.sort((a, b) => (b.relevance || 0) - (a.relevance || 0))\n}\n\nfunction sanitizeQueries(queries: string[] | undefined): string[] {\n  if (!queries || queries.length === 0) {\n    return []\n  }\n\n  return queries\n    .map((query) => query.trim())\n    .filter((query) => query.length > 0)\n}\n\nfunction buildVerificationChecklist(results: LegalSearchResult[]): string {\n  if (!results.length) {\n    return \"## Checklist de Verificacion\\n- Sin fuentes externas para verificar.\"\n  }\n\n  const lines: string[] = [\"## Checklist de Verificacion\"]\n\n  results.forEach((result, index) => {\n    const references = extractLegalReferences(`${result.title} ${result.snippet}`)\n    const label = references.length\n      ? `Referencias detectadas: ${references.join(\"; \")}`\n      : \"Referencias especificas no detectadas; revisa manualmente la cita.\"\n\n    lines.push(\n      `- Fuente ${index + 1}: ${result.title} (${result.url})`,\n      `  ${label}`\n    )\n  })\n\n  lines.push(\n    \"- Verifica que cada cita de tu respuesta coincida con el texto y vigencia de la fuente enlazada.\",\n    \"- Marca discrepancias explicando el conflicto y su implicacion.\"\n  )\n\n  return lines.join(\"\\n\")\n}\n\nfunction extractLegalReferences(text: string): string[] {\n  const patterns: RegExp[] = [\n    /\\barticulo\\s+\\d+[a-z]?/gi,\n    /\\barts?\\.\\s*\\d+[a-z]?/gi,\n    /\\bley\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bdecreto\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bautos?\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bsentencia\\s+[stc]\\-\\d+[a-z0-9\\-]*/gi,\n    /\\bprovidencia\\s+\\d+\\s+de\\s+\\d{4}/gi,\n    /\\bresolucion\\s+\\d+\\s+de\\s+\\d{4}/gi,\n  ]\n\n  const matches = new Set<string>()\n  patterns.forEach((pattern) => {\n    const found = text.match(pattern)\n    if (found) {\n      found.forEach((item) => matches.add(normalizeReference(item)))\n    }\n  })\n\n  return Array.from(matches)\n}\n\nfunction normalizeReference(reference: string): string {\n  return reference.trim().replace(/\\s+/g, \" \").toLowerCase()\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}