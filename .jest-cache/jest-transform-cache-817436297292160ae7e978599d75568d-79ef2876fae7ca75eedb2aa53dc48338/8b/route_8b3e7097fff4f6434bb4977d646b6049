8e6eb38b90cea169b7f8fbca2e306c9c
"use strict";

/* istanbul ignore next */
function cov_uo2fllkqu() {
  var path = "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\ai-agent\\route.ts";
  var hash = "0d12a4ea750ef2b95c5c4a02b20bcd7dfc0d7a28";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\ai-agent\\route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 22
        },
        end: {
          line: 4,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 4
        },
        end: {
          line: 3,
          column: 62
        }
      },
      "2": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 5,
          column: 62
        }
      },
      "3": {
        start: {
          line: 6,
          column: 0
        },
        end: {
          line: 6,
          column: 25
        }
      },
      "4": {
        start: {
          line: 7,
          column: 0
        },
        end: {
          line: 7,
          column: 20
        }
      },
      "5": {
        start: {
          line: 8,
          column: 30
        },
        end: {
          line: 8,
          column: 73
        }
      },
      "6": {
        start: {
          line: 9,
          column: 25
        },
        end: {
          line: 9,
          column: 63
        }
      },
      "7": {
        start: {
          line: 10,
          column: 13
        },
        end: {
          line: 10,
          column: 26
        }
      },
      "8": {
        start: {
          line: 11,
          column: 17
        },
        end: {
          line: 11,
          column: 51
        }
      },
      "9": {
        start: {
          line: 12,
          column: 28
        },
        end: {
          line: 12,
          column: 58
        }
      },
      "10": {
        start: {
          line: 13,
          column: 26
        },
        end: {
          line: 13,
          column: 43
        }
      },
      "11": {
        start: {
          line: 14,
          column: 27
        },
        end: {
          line: 14,
          column: 31
        }
      },
      "12": {
        start: {
          line: 15,
          column: 28
        },
        end: {
          line: 15,
          column: 31
        }
      },
      "13": {
        start: {
          line: 17,
          column: 56
        },
        end: {
          line: 17,
          column: 76
        }
      },
      "14": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 102,
          column: 5
        }
      },
      "15": {
        start: {
          line: 19,
          column: 24
        },
        end: {
          line: 19,
          column: 75
        }
      },
      "16": {
        start: {
          line: 20,
          column: 23
        },
        end: {
          line: 20,
          column: 89
        }
      },
      "17": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 23,
          column: 9
        }
      },
      "18": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 136
        }
      },
      "19": {
        start: {
          line: 24,
          column: 23
        },
        end: {
          line: 27,
          column: 10
        }
      },
      "20": {
        start: {
          line: 28,
          column: 26
        },
        end: {
          line: 28,
          column: 58
        }
      },
      "21": {
        start: {
          line: 29,
          column: 26
        },
        end: {
          line: 29,
          column: 44
        }
      },
      "22": {
        start: {
          line: 31,
          column: 28
        },
        end: {
          line: 31,
          column: 101
        }
      },
      "23": {
        start: {
          line: 32,
          column: 28
        },
        end: {
          line: 32,
          column: 75
        }
      },
      "24": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 52
        }
      },
      "25": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 34,
          column: 48
        }
      },
      "26": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 50
        }
      },
      "27": {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 50
        }
      },
      "28": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 37,
          column: 47
        }
      },
      "29": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 38,
          column: 41
        }
      },
      "30": {
        start: {
          line: 40,
          column: 24
        },
        end: {
          line: 49,
          column: 10
        }
      },
      "31": {
        start: {
          line: 51,
          column: 30
        },
        end: {
          line: 51,
          column: 88
        }
      },
      "32": {
        start: {
          line: 52,
          column: 8
        },
        end: {
          line: 52,
          column: 46
        }
      },
      "33": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 53,
          column: 61
        }
      },
      "34": {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 54,
          column: 104
        }
      },
      "35": {
        start: {
          line: 55,
          column: 8
        },
        end: {
          line: 60,
          column: 9
        }
      },
      "36": {
        start: {
          line: 56,
          column: 12
        },
        end: {
          line: 56,
          column: 80
        }
      },
      "37": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 57,
          column: 84
        }
      },
      "38": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 84
        }
      },
      "39": {
        start: {
          line: 59,
          column: 12
        },
        end: {
          line: 59,
          column: 84
        }
      },
      "40": {
        start: {
          line: 62,
          column: 30
        },
        end: {
          line: 72,
          column: 34
        }
      },
      "41": {
        start: {
          line: 74,
          column: 30
        },
        end: {
          line: 77,
          column: 9
        }
      },
      "42": {
        start: {
          line: 78,
          column: 35
        },
        end: {
          line: 78,
          column: 63
        }
      },
      "43": {
        start: {
          line: 80,
          column: 25
        },
        end: {
          line: 88,
          column: 10
        }
      },
      "44": {
        start: {
          line: 89,
          column: 23
        },
        end: {
          line: 89,
          column: 55
        }
      },
      "45": {
        start: {
          line: 90,
          column: 8
        },
        end: {
          line: 90,
          column: 54
        }
      },
      "46": {
        start: {
          line: 93,
          column: 8
        },
        end: {
          line: 93,
          column: 56
        }
      },
      "47": {
        start: {
          line: 94,
          column: 24
        },
        end: {
          line: 96,
          column: 67
        }
      },
      "48": {
        start: {
          line: 97,
          column: 23
        },
        end: {
          line: 97,
          column: 77
        }
      },
      "49": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 101,
          column: 24
        }
      },
      "50": {
        start: {
          line: 104,
          column: 0
        },
        end: {
          line: 104,
          column: 25
        }
      },
      "51": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 110,
          column: 5
        }
      },
      "52": {
        start: {
          line: 106,
          column: 17
        },
        end: {
          line: 106,
          column: 36
        }
      },
      "53": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 109,
          column: 9
        }
      },
      "54": {
        start: {
          line: 108,
          column: 12
        },
        end: {
          line: 108,
          column: 39
        }
      },
      "55": {
        start: {
          line: 111,
          column: 4
        },
        end: {
          line: 111,
          column: 14
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 56
          },
          end: {
            line: 2,
            column: 57
          }
        },
        loc: {
          start: {
            line: 2,
            column: 71
          },
          end: {
            line: 4,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "POST",
        decl: {
          start: {
            line: 16,
            column: 15
          },
          end: {
            line: 16,
            column: 19
          }
        },
        loc: {
          start: {
            line: 16,
            column: 29
          },
          end: {
            line: 103,
            column: 1
          }
        },
        line: 16
      },
      "2": {
        name: "extractLastUserMessage",
        decl: {
          start: {
            line: 105,
            column: 9
          },
          end: {
            line: 105,
            column: 31
          }
        },
        loc: {
          start: {
            line: 105,
            column: 42
          },
          end: {
            line: 112,
            column: 1
          }
        },
        line: 105
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 22
          },
          end: {
            line: 4,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 23
          },
          end: {
            line: 2,
            column: 27
          }
        }, {
          start: {
            line: 2,
            column: 31
          },
          end: {
            line: 2,
            column: 51
          }
        }, {
          start: {
            line: 2,
            column: 56
          },
          end: {
            line: 4,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 11
          },
          end: {
            line: 3,
            column: 61
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 37
          },
          end: {
            line: 3,
            column: 40
          }
        }, {
          start: {
            line: 3,
            column: 43
          },
          end: {
            line: 3,
            column: 61
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 12
          },
          end: {
            line: 3,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 3,
            column: 12
          },
          end: {
            line: 3,
            column: 15
          }
        }, {
          start: {
            line: 3,
            column: 19
          },
          end: {
            line: 3,
            column: 33
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 20,
            column: 23
          },
          end: {
            line: 20,
            column: 89
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 20,
            column: 23
          },
          end: {
            line: 20,
            column: 53
          }
        }, {
          start: {
            line: 20,
            column: 57
          },
          end: {
            line: 20,
            column: 83
          }
        }, {
          start: {
            line: 20,
            column: 87
          },
          end: {
            line: 20,
            column: 89
          }
        }],
        line: 20
      },
      "4": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 23,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 21
      },
      "5": {
        loc: {
          start: {
            line: 31,
            column: 28
          },
          end: {
            line: 31,
            column: 101
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 28
          },
          end: {
            line: 31,
            column: 34
          }
        }, {
          start: {
            line: 31,
            column: 38
          },
          end: {
            line: 31,
            column: 101
          }
        }],
        line: 31
      },
      "6": {
        loc: {
          start: {
            line: 32,
            column: 28
          },
          end: {
            line: 32,
            column: 75
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 32,
            column: 28
          },
          end: {
            line: 32,
            column: 34
          }
        }, {
          start: {
            line: 32,
            column: 38
          },
          end: {
            line: 32,
            column: 54
          }
        }, {
          start: {
            line: 32,
            column: 58
          },
          end: {
            line: 32,
            column: 75
          }
        }],
        line: 32
      },
      "7": {
        loc: {
          start: {
            line: 54,
            column: 49
          },
          end: {
            line: 54,
            column: 100
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 54,
            column: 89
          },
          end: {
            line: 54,
            column: 93
          }
        }, {
          start: {
            line: 54,
            column: 96
          },
          end: {
            line: 54,
            column: 100
          }
        }],
        line: 54
      },
      "8": {
        loc: {
          start: {
            line: 55,
            column: 8
          },
          end: {
            line: 60,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 55,
            column: 8
          },
          end: {
            line: 60,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 55
      },
      "9": {
        loc: {
          start: {
            line: 83,
            column: 25
          },
          end: {
            line: 85,
            column: 37
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 84,
            column: 18
          },
          end: {
            line: 84,
            column: 42
          }
        }, {
          start: {
            line: 85,
            column: 18
          },
          end: {
            line: 85,
            column: 37
          }
        }],
        line: 83
      },
      "10": {
        loc: {
          start: {
            line: 94,
            column: 24
          },
          end: {
            line: 96,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 94,
            column: 24
          },
          end: {
            line: 94,
            column: 45
          }
        }, {
          start: {
            line: 95,
            column: 12
          },
          end: {
            line: 95,
            column: 26
          }
        }, {
          start: {
            line: 96,
            column: 12
          },
          end: {
            line: 96,
            column: 67
          }
        }],
        line: 94
      },
      "11": {
        loc: {
          start: {
            line: 97,
            column: 23
          },
          end: {
            line: 97,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 97,
            column: 59
          },
          end: {
            line: 97,
            column: 71
          }
        }, {
          start: {
            line: 97,
            column: 74
          },
          end: {
            line: 97,
            column: 77
          }
        }],
        line: 97
      },
      "12": {
        loc: {
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 109,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 109,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 107
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0, 0],
      "11": [0, 0],
      "12": [0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\ai-agent\\route.ts",
      mappings: ";;;;;;AAmBA,oBA+GC;AAlID,0EAAmE;AACnE,gEAA0D;AAE1D,2BAAwD;AACxD,oDAA2B;AAG3B,MAAM,mBAAmB,GAAG,8BAA8B,CAAA;AAC1D,MAAM,iBAAiB,GAAG,iBAAiB,CAAA;AAC3C,MAAM,kBAAkB,GAAG,IAAI,CAAA;AAC/B,MAAM,mBAAmB,GAAG,GAAG,CAAA;AASxB,KAAK,UAAU,IAAI,CAAC,OAAgB;IACzC,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAC,MAAM,OAAO,CAAC,IAAI,EAAE,CAAgB,CAAA;IAExF,IAAI,CAAC;QACH,MAAM,OAAO,GAAG,MAAM,IAAA,sCAAgB,GAAE,CAAA;QACxC,MAAM,MAAM,GACV,OAAO,CAAC,GAAG,CAAC,kBAAkB,IAAI,OAAO,CAAC,kBAAkB,IAAI,EAAE,CAAA;QAEpE,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,MAAM,IAAI,KAAK,CACb,0GAA0G,CAC3G,CAAA;QACH,CAAC;QAED,MAAM,MAAM,GAAG,IAAI,gBAAM,CAAC;YACxB,MAAM;YACN,OAAO,EAAE,mBAAmB;SAC7B,CAAC,CAAA;QAEF,MAAM,SAAS,GAAG,sBAAsB,CAAC,QAAQ,CAAC,CAAA;QAClD,MAAM,SAAS,GAAG,YAAY,CAAC,KAAe,CAAA;QAE9C,wDAAwD;QACxD,MAAM,WAAW,GAAG,MAAM,IAAI,QAAQ,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAA;QAC7F,MAAM,WAAW,GAAG,MAAM,IAAI,OAAO,CAAC,QAAQ,IAAI,iBAAiB,CAAA;QAEnE,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAA;QAC3C,OAAO,CAAC,GAAG,CAAC,cAAc,SAAS,GAAG,CAAC,CAAA;QACvC,OAAO,CAAC,GAAG,CAAC,eAAe,WAAW,EAAE,CAAC,CAAA;QACzC,OAAO,CAAC,GAAG,CAAC,eAAe,WAAW,EAAE,CAAC,CAAA;QACzC,OAAO,CAAC,GAAG,CAAC,cAAc,SAAS,EAAE,CAAC,CAAA;QACtC,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;QAEhC,2CAA2C;QAC3C,MAAM,OAAO,GAAG,IAAI,6BAAY,CAAC;YAC/B,MAAM;YACN,KAAK,EAAE,SAAS;YAChB,MAAM,EAAE,WAAW;YACnB,MAAM,EAAE,WAAW;YACnB,YAAY,EAAE,IAAI;YAClB,mBAAmB,EAAE,IAAI;YACzB,eAAe,EAAE,EAAE;YACnB,eAAe,EAAE,KAAK;SACvB,CAAC,CAAA;QAEF,oCAAoC;QACpC,MAAM,aAAa,GAAG,MAAM,OAAO,CAAC,YAAY,CAAC,SAAS,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CAAA;QAEhF,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAA;QACrC,OAAO,CAAC,GAAG,CAAC,iBAAiB,aAAa,CAAC,MAAM,EAAE,CAAC,CAAA;QACpD,OAAO,CAAC,GAAG,CAAC,6BAA6B,aAAa,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;QAC/F,IAAI,aAAa,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,iBAAiB,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAA;YACnE,OAAO,CAAC,GAAG,CAAC,oBAAoB,aAAa,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,CAAA;YACvE,OAAO,CAAC,GAAG,CAAC,qBAAqB,aAAa,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAA;YACvE,OAAO,CAAC,GAAG,CAAC,kBAAkB,aAAa,CAAC,QAAQ,CAAC,YAAY,KAAK,CAAC,CAAA;QACzE,CAAC;QAED,sDAAsD;QACtD,MAAM,aAAa,GAAG;;EAExB,aAAa,CAAC,OAAO;;;;;;;;kCAQW,CAAA;QAE9B,6BAA6B;QAC7B,MAAM,aAAa,GAAG;YACpB,IAAI,EAAE,QAAiB;YACvB,OAAO,EAAE,aAAa;SACvB,CAAA;QAED,MAAM,kBAAkB,GAAG,CAAC,aAAa,EAAE,GAAG,QAAQ,CAAC,CAAA;QAEvD,8BAA8B;QAC9B,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,KAAK,EAAE,YAAY,CAAC,KAAgD;YACpE,QAAQ,EAAE,kBAAkB;YAC5B,WAAW,EACT,OAAO,YAAY,CAAC,WAAW,KAAK,QAAQ;gBAC1C,CAAC,CAAC,YAAY,CAAC,WAAW;gBAC1B,CAAC,CAAC,mBAAmB;YACzB,UAAU,EAAE,kBAAkB;YAC9B,MAAM,EAAE,IAAI;SACb,CAAC,CAAA;QAEF,MAAM,MAAM,GAAG,IAAA,iBAAY,EAAC,QAAQ,CAAC,CAAA;QACrC,OAAO,IAAI,0BAAqB,CAAC,MAAM,CAAC,CAAA;IAE1C,CAAC;IAAC,OAAO,KAAU,EAAE,CAAC;QACpB,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC,CAAA;QAC/C,MAAM,OAAO,GACX,KAAK,EAAE,KAAK,EAAE,OAAO;YACrB,KAAK,EAAE,OAAO;YACd,uDAAuD,CAAA;QAEzD,MAAM,MAAM,GAAG,OAAO,KAAK,EAAE,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAA;QAErE,OAAO,IAAI,QAAQ,CACjB,IAAI,CAAC,SAAS,CAAC;YACb,OAAO;YACP,KAAK,EAAE,gBAAgB;SACxB,CAAC,EACF,EAAE,MAAM,EAAE,CACX,CAAA;IACH,CAAC;AACH,CAAC;AAEY,QAAA,OAAO,GAAG,MAAM,CAAA;AAE7B,SAAS,sBAAsB,CAAC,QAAkD;IAChF,KAAK,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAC9C,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;YAChC,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAA;QAC5B,CAAC;IACH,CAAC;IACD,OAAO,EAAE,CAAA;AACX,CAAC",
      names: [],
      sources: ["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\app\\api\\chat\\ai-agent\\route.ts"],
      sourcesContent: ["import { getServerProfile } from \"@/lib/server/server-chat-helpers\"\r\nimport { LegalAIAgent } from \"@/lib/agents/legal-ai-agent\"\r\nimport { ChatSettings } from \"@/types\"\r\nimport { OpenAIStream, StreamingTextResponse } from \"ai\"\r\nimport OpenAI from \"openai\"\r\nimport { ChatCompletionCreateParamsBase } from \"openai/resources/chat/completions.mjs\"\r\n\r\nconst OPENROUTER_BASE_URL = \"https://openrouter.ai/api/v1\"\r\nconst FALLBACK_USERNAME = \"usuario-anonimo\"\r\nconst DEFAULT_MAX_TOKENS = 4000\r\nconst DEFAULT_TEMPERATURE = 0.3\r\n\r\ninterface RequestBody {\r\n  chatSettings: ChatSettings\r\n  messages: Array<{ role: \"system\" | \"user\" | \"assistant\"; content: string }>\r\n  chatId?: string\r\n  userId?: string\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  const { chatSettings, messages, chatId, userId } = (await request.json()) as RequestBody\r\n\r\n  try {\r\n    const profile = await getServerProfile()\r\n    const apiKey =\r\n      process.env.OPENROUTER_API_KEY || profile.openrouter_api_key || \"\"\r\n\r\n    if (!apiKey) {\r\n      throw new Error(\r\n        \"OpenRouter API Key no configurada. Define OPENROUTER_API_KEY o agrega la clave en el perfil del usuario.\"\r\n      )\r\n    }\r\n\r\n    const client = new OpenAI({\r\n      apiKey,\r\n      baseURL: OPENROUTER_BASE_URL,\r\n    })\r\n\r\n    const userQuery = extractLastUserMessage(messages)\r\n    const modelName = chatSettings.model as string\r\n    \r\n    // Generar IDs \xFAnicos para el chat si no se proporcionan\r\n    const finalChatId = chatId || `chat-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n    const finalUserId = userId || profile.username || FALLBACK_USERNAME\r\n\r\n    console.log(`\\n\uD83E\uDD16 AI AGENT LEGAL INICIADO`)\r\n    console.log(`\uD83D\uDCDD Query: \"${userQuery}\"`)\r\n    console.log(`\uD83D\uDCAC Chat ID: ${finalChatId}`)\r\n    console.log(`\uD83D\uDC64 User ID: ${finalUserId}`)\r\n    console.log(`\uD83E\uDD16 Modelo: ${modelName}`)\r\n    console.log(`${'='.repeat(80)}`)\r\n\r\n    // Crear AI Agent con capacidades agenticas\r\n    const aiAgent = new LegalAIAgent({\r\n      client,\r\n      model: modelName,\r\n      chatId: finalChatId,\r\n      userId: finalUserId,\r\n      enableMemory: true,\r\n      enableAgenticSearch: true,\r\n      maxSearchRounds: 10,\r\n      searchTimeoutMs: 45000\r\n    })\r\n\r\n    // Procesar consulta con el AI Agent\r\n    const agentResponse = await aiAgent.processQuery(userQuery, `msg-${Date.now()}`)\r\n\r\n    console.log(`\u2705 AI Agent completado:`)\r\n    console.log(`   \uD83C\uDFAF Acci\xF3n: ${agentResponse.action}`)\r\n    console.log(`   \uD83D\uDD0D B\xFAsqueda ejecutada: ${agentResponse.metadata.searchExecuted ? 'S\xCD' : 'NO'}`)\r\n    if (agentResponse.metadata.searchExecuted) {\r\n      console.log(`   \uD83D\uDCCA Rondas: ${agentResponse.metadata.searchRounds}`)\r\n      console.log(`   \uD83D\uDD0D B\xFAsquedas: ${agentResponse.metadata.totalSearches}`)\r\n      console.log(`   \uD83D\uDCC4 Resultados: ${agentResponse.metadata.totalResults}`)\r\n      console.log(`   \uD83C\uDFAF Calidad: ${agentResponse.metadata.finalQuality}/10`)\r\n    }\r\n\r\n    // Crear mensaje de sistema con el contexto del agente\r\n    const systemContent = `Eres un asistente legal experto en derecho colombiano. Utiliza EXCLUSIVAMENTE la informaci\xF3n proporcionada para responder la consulta del usuario.\r\n\r\n${agentResponse.content}\r\n\r\nINSTRUCCIONES:\r\n1. Responde de manera completa y precisa\r\n2. Usa terminolog\xEDa jur\xEDdica apropiada\r\n3. Incluye referencias a art\xEDculos y leyes cuando sea relevante\r\n4. Proporciona informaci\xF3n pr\xE1ctica y aplicable\r\n5. Si hay informaci\xF3n insuficiente, ind\xEDcalo claramente\r\n6. Responde en espa\xF1ol colombiano`\r\n\r\n    // Agregar mensaje de sistema\r\n    const systemMessage = {\r\n      role: \"system\" as const,\r\n      content: systemContent\r\n    }\r\n    \r\n    const messagesWithSystem = [systemMessage, ...messages]\r\n\r\n    // Generar respuesta streaming\r\n    const response = await client.chat.completions.create({\r\n      model: chatSettings.model as ChatCompletionCreateParamsBase[\"model\"],\r\n      messages: messagesWithSystem,\r\n      temperature:\r\n        typeof chatSettings.temperature === \"number\"\r\n          ? chatSettings.temperature\r\n          : DEFAULT_TEMPERATURE,\r\n      max_tokens: DEFAULT_MAX_TOKENS,\r\n      stream: true,\r\n    })\r\n\r\n    const stream = OpenAIStream(response)\r\n    return new StreamingTextResponse(stream)\r\n\r\n  } catch (error: any) {\r\n    console.error(\"[ai-agent-route] Error:\", error)\r\n    const message =\r\n      error?.error?.message ||\r\n      error?.message ||\r\n      \"Error en el asistente legal con capacidades agenticas\"\r\n\r\n    const status = typeof error?.status === \"number\" ? error.status : 500\r\n\r\n    return new Response(\r\n      JSON.stringify({\r\n        message,\r\n        error: \"AI_AGENT_ERROR\",\r\n      }),\r\n      { status }\r\n    )\r\n  }\r\n}\r\n\r\nexport const runtime = \"edge\"\r\n\r\nfunction extractLastUserMessage(messages: Array<{ role: string; content: string }>): string {\r\n  for (let i = messages.length - 1; i >= 0; i--) {\r\n    if (messages[i].role === \"user\") {\r\n      return messages[i].content\r\n    }\r\n  }\r\n  return \"\"\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "0d12a4ea750ef2b95c5c4a02b20bcd7dfc0d7a28"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_uo2fllkqu = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_uo2fllkqu();
var __importDefault =
/* istanbul ignore next */
(cov_uo2fllkqu().s[0]++,
/* istanbul ignore next */
(cov_uo2fllkqu().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_uo2fllkqu().b[0][1]++, this.__importDefault) ||
/* istanbul ignore next */
(cov_uo2fllkqu().b[0][2]++, function (mod) {
  /* istanbul ignore next */
  cov_uo2fllkqu().f[0]++;
  cov_uo2fllkqu().s[1]++;
  return /* istanbul ignore next */(cov_uo2fllkqu().b[2][0]++, mod) &&
  /* istanbul ignore next */
  (cov_uo2fllkqu().b[2][1]++, mod.__esModule) ?
  /* istanbul ignore next */
  (cov_uo2fllkqu().b[1][0]++, mod) :
  /* istanbul ignore next */
  (cov_uo2fllkqu().b[1][1]++, {
    "default": mod
  });
}));
/* istanbul ignore next */
cov_uo2fllkqu().s[2]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_uo2fllkqu().s[3]++;
exports.runtime = void 0;
/* istanbul ignore next */
cov_uo2fllkqu().s[4]++;
exports.POST = POST;
const server_chat_helpers_1 =
/* istanbul ignore next */
(cov_uo2fllkqu().s[5]++, require("@/lib/server/server-chat-helpers"));
const legal_ai_agent_1 =
/* istanbul ignore next */
(cov_uo2fllkqu().s[6]++, require("@/lib/agents/legal-ai-agent"));
const ai_1 =
/* istanbul ignore next */
(cov_uo2fllkqu().s[7]++, require("ai"));
const openai_1 =
/* istanbul ignore next */
(cov_uo2fllkqu().s[8]++, __importDefault(require("openai")));
const OPENROUTER_BASE_URL =
/* istanbul ignore next */
(cov_uo2fllkqu().s[9]++, "https://openrouter.ai/api/v1");
const FALLBACK_USERNAME =
/* istanbul ignore next */
(cov_uo2fllkqu().s[10]++, "usuario-anonimo");
const DEFAULT_MAX_TOKENS =
/* istanbul ignore next */
(cov_uo2fllkqu().s[11]++, 4000);
const DEFAULT_TEMPERATURE =
/* istanbul ignore next */
(cov_uo2fllkqu().s[12]++, 0.3);
async function POST(request) {
  /* istanbul ignore next */
  cov_uo2fllkqu().f[1]++;
  const {
    chatSettings,
    messages,
    chatId,
    userId
  } =
  /* istanbul ignore next */
  (cov_uo2fllkqu().s[13]++, await request.json());
  /* istanbul ignore next */
  cov_uo2fllkqu().s[14]++;
  try {
    const profile =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[15]++, await (0, server_chat_helpers_1.getServerProfile)());
    const apiKey =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[16]++,
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[3][0]++, process.env.OPENROUTER_API_KEY) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[3][1]++, profile.openrouter_api_key) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[3][2]++, ""));
    /* istanbul ignore next */
    cov_uo2fllkqu().s[17]++;
    if (!apiKey) {
      /* istanbul ignore next */
      cov_uo2fllkqu().b[4][0]++;
      cov_uo2fllkqu().s[18]++;
      throw new Error("OpenRouter API Key no configurada. Define OPENROUTER_API_KEY o agrega la clave en el perfil del usuario.");
    } else
    /* istanbul ignore next */
    {
      cov_uo2fllkqu().b[4][1]++;
    }
    const client =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[19]++, new openai_1.default({
      apiKey,
      baseURL: OPENROUTER_BASE_URL
    }));
    const userQuery =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[20]++, extractLastUserMessage(messages));
    const modelName =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[21]++, chatSettings.model);
    // Generar IDs Ãºnicos para el chat si no se proporcionan
    const finalChatId =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[22]++,
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[5][0]++, chatId) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[5][1]++, `chat-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`));
    const finalUserId =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[23]++,
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[6][0]++, userId) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[6][1]++, profile.username) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[6][2]++, FALLBACK_USERNAME));
    /* istanbul ignore next */
    cov_uo2fllkqu().s[24]++;
    console.log(`\nðŸ¤– AI AGENT LEGAL INICIADO`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[25]++;
    console.log(`ðŸ“ Query: "${userQuery}"`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[26]++;
    console.log(`ðŸ’¬ Chat ID: ${finalChatId}`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[27]++;
    console.log(`ðŸ‘¤ User ID: ${finalUserId}`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[28]++;
    console.log(`ðŸ¤– Modelo: ${modelName}`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[29]++;
    console.log(`${'='.repeat(80)}`);
    // Crear AI Agent con capacidades agenticas
    const aiAgent =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[30]++, new legal_ai_agent_1.LegalAIAgent({
      client,
      model: modelName,
      chatId: finalChatId,
      userId: finalUserId,
      enableMemory: true,
      enableAgenticSearch: true,
      maxSearchRounds: 10,
      searchTimeoutMs: 45000
    }));
    // Procesar consulta con el AI Agent
    const agentResponse =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[31]++, await aiAgent.processQuery(userQuery, `msg-${Date.now()}`));
    /* istanbul ignore next */
    cov_uo2fllkqu().s[32]++;
    console.log(`âœ… AI Agent completado:`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[33]++;
    console.log(`   ðŸŽ¯ AcciÃ³n: ${agentResponse.action}`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[34]++;
    console.log(`   ðŸ” BÃºsqueda ejecutada: ${agentResponse.metadata.searchExecuted ?
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[7][0]++, 'SÃ') :
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[7][1]++, 'NO')}`);
    /* istanbul ignore next */
    cov_uo2fllkqu().s[35]++;
    if (agentResponse.metadata.searchExecuted) {
      /* istanbul ignore next */
      cov_uo2fllkqu().b[8][0]++;
      cov_uo2fllkqu().s[36]++;
      console.log(`   ðŸ“Š Rondas: ${agentResponse.metadata.searchRounds}`);
      /* istanbul ignore next */
      cov_uo2fllkqu().s[37]++;
      console.log(`   ðŸ” BÃºsquedas: ${agentResponse.metadata.totalSearches}`);
      /* istanbul ignore next */
      cov_uo2fllkqu().s[38]++;
      console.log(`   ðŸ“„ Resultados: ${agentResponse.metadata.totalResults}`);
      /* istanbul ignore next */
      cov_uo2fllkqu().s[39]++;
      console.log(`   ðŸŽ¯ Calidad: ${agentResponse.metadata.finalQuality}/10`);
    } else
    /* istanbul ignore next */
    {
      cov_uo2fllkqu().b[8][1]++;
    }
    // Crear mensaje de sistema con el contexto del agente
    const systemContent =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[40]++, `Eres un asistente legal experto en derecho colombiano. Utiliza EXCLUSIVAMENTE la informaciÃ³n proporcionada para responder la consulta del usuario.

${agentResponse.content}

INSTRUCCIONES:
1. Responde de manera completa y precisa
2. Usa terminologÃ­a jurÃ­dica apropiada
3. Incluye referencias a artÃ­culos y leyes cuando sea relevante
4. Proporciona informaciÃ³n prÃ¡ctica y aplicable
5. Si hay informaciÃ³n insuficiente, indÃ­calo claramente
6. Responde en espaÃ±ol colombiano`);
    // Agregar mensaje de sistema
    const systemMessage =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[41]++, {
      role: "system",
      content: systemContent
    });
    const messagesWithSystem =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[42]++, [systemMessage, ...messages]);
    // Generar respuesta streaming
    const response =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[43]++, await client.chat.completions.create({
      model: chatSettings.model,
      messages: messagesWithSystem,
      temperature: typeof chatSettings.temperature === "number" ?
      /* istanbul ignore next */
      (cov_uo2fllkqu().b[9][0]++, chatSettings.temperature) :
      /* istanbul ignore next */
      (cov_uo2fllkqu().b[9][1]++, DEFAULT_TEMPERATURE),
      max_tokens: DEFAULT_MAX_TOKENS,
      stream: true
    }));
    const stream =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[44]++, (0, ai_1.OpenAIStream)(response));
    /* istanbul ignore next */
    cov_uo2fllkqu().s[45]++;
    return new ai_1.StreamingTextResponse(stream);
  } catch (error) {
    /* istanbul ignore next */
    cov_uo2fllkqu().s[46]++;
    console.error("[ai-agent-route] Error:", error);
    const message =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[47]++,
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[10][0]++, error?.error?.message) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[10][1]++, error?.message) ||
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[10][2]++, "Error en el asistente legal con capacidades agenticas"));
    const status =
    /* istanbul ignore next */
    (cov_uo2fllkqu().s[48]++, typeof error?.status === "number" ?
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[11][0]++, error.status) :
    /* istanbul ignore next */
    (cov_uo2fllkqu().b[11][1]++, 500));
    /* istanbul ignore next */
    cov_uo2fllkqu().s[49]++;
    return new Response(JSON.stringify({
      message,
      error: "AI_AGENT_ERROR"
    }), {
      status
    });
  }
}
/* istanbul ignore next */
cov_uo2fllkqu().s[50]++;
exports.runtime = "edge";
function extractLastUserMessage(messages) {
  /* istanbul ignore next */
  cov_uo2fllkqu().f[2]++;
  cov_uo2fllkqu().s[51]++;
  for (let i =
  /* istanbul ignore next */
  (cov_uo2fllkqu().s[52]++, messages.length - 1); i >= 0; i--) {
    /* istanbul ignore next */
    cov_uo2fllkqu().s[53]++;
    if (messages[i].role === "user") {
      /* istanbul ignore next */
      cov_uo2fllkqu().b[12][0]++;
      cov_uo2fllkqu().s[54]++;
      return messages[i].content;
    } else
    /* istanbul ignore next */
    {
      cov_uo2fllkqu().b[12][1]++;
    }
  }
  /* istanbul ignore next */
  cov_uo2fllkqu().s[55]++;
  return "";
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfdW8yZmxsa3F1IiwiYWN0dWFsQ292ZXJhZ2UiLCJleHBvcnRzIiwiUE9TVCIsInNlcnZlcl9jaGF0X2hlbHBlcnNfMSIsInMiLCJyZXF1aXJlIiwibGVnYWxfYWlfYWdlbnRfMSIsImFpXzEiLCJvcGVuYWlfMSIsIl9faW1wb3J0RGVmYXVsdCIsIk9QRU5ST1VURVJfQkFTRV9VUkwiLCJGQUxMQkFDS19VU0VSTkFNRSIsIkRFRkFVTFRfTUFYX1RPS0VOUyIsIkRFRkFVTFRfVEVNUEVSQVRVUkUiLCJyZXF1ZXN0IiwiZiIsImNoYXRTZXR0aW5ncyIsIm1lc3NhZ2VzIiwiY2hhdElkIiwidXNlcklkIiwianNvbiIsInByb2ZpbGUiLCJnZXRTZXJ2ZXJQcm9maWxlIiwiYXBpS2V5IiwiYiIsInByb2Nlc3MiLCJlbnYiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJvcGVucm91dGVyX2FwaV9rZXkiLCJFcnJvciIsImNsaWVudCIsImRlZmF1bHQiLCJiYXNlVVJMIiwidXNlclF1ZXJ5IiwiZXh0cmFjdExhc3RVc2VyTWVzc2FnZSIsIm1vZGVsTmFtZSIsIm1vZGVsIiwiZmluYWxDaGF0SWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiZmluYWxVc2VySWQiLCJ1c2VybmFtZSIsImNvbnNvbGUiLCJsb2ciLCJyZXBlYXQiLCJhaUFnZW50IiwiTGVnYWxBSUFnZW50IiwiZW5hYmxlTWVtb3J5IiwiZW5hYmxlQWdlbnRpY1NlYXJjaCIsIm1heFNlYXJjaFJvdW5kcyIsInNlYXJjaFRpbWVvdXRNcyIsImFnZW50UmVzcG9uc2UiLCJwcm9jZXNzUXVlcnkiLCJhY3Rpb24iLCJtZXRhZGF0YSIsInNlYXJjaEV4ZWN1dGVkIiwic2VhcmNoUm91bmRzIiwidG90YWxTZWFyY2hlcyIsInRvdGFsUmVzdWx0cyIsImZpbmFsUXVhbGl0eSIsInN5c3RlbUNvbnRlbnQiLCJjb250ZW50Iiwic3lzdGVtTWVzc2FnZSIsInJvbGUiLCJtZXNzYWdlc1dpdGhTeXN0ZW0iLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInN0cmVhbSIsIk9wZW5BSVN0cmVhbSIsIlN0cmVhbWluZ1RleHRSZXNwb25zZSIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInJ1bnRpbWUiLCJpIiwibGVuZ3RoIl0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxwZWRyb1xcRG9jdW1lbnRzXFxHaXRIdWJcXEFzaXN0ZW50ZS1MZWdhbC1JbnRlbGlnZW50ZVxcYXBwXFxhcGlcXGNoYXRcXGFpLWFnZW50XFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTZXJ2ZXJQcm9maWxlIH0gZnJvbSBcIkAvbGliL3NlcnZlci9zZXJ2ZXItY2hhdC1oZWxwZXJzXCJcclxuaW1wb3J0IHsgTGVnYWxBSUFnZW50IH0gZnJvbSBcIkAvbGliL2FnZW50cy9sZWdhbC1haS1hZ2VudFwiXHJcbmltcG9ydCB7IENoYXRTZXR0aW5ncyB9IGZyb20gXCJAL3R5cGVzXCJcclxuaW1wb3J0IHsgT3BlbkFJU3RyZWFtLCBTdHJlYW1pbmdUZXh0UmVzcG9uc2UgfSBmcm9tIFwiYWlcIlxyXG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIlxyXG5pbXBvcnQgeyBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UgfSBmcm9tIFwib3BlbmFpL3Jlc291cmNlcy9jaGF0L2NvbXBsZXRpb25zLm1qc1wiXHJcblxyXG5jb25zdCBPUEVOUk9VVEVSX0JBU0VfVVJMID0gXCJodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxXCJcclxuY29uc3QgRkFMTEJBQ0tfVVNFUk5BTUUgPSBcInVzdWFyaW8tYW5vbmltb1wiXHJcbmNvbnN0IERFRkFVTFRfTUFYX1RPS0VOUyA9IDQwMDBcclxuY29uc3QgREVGQVVMVF9URU1QRVJBVFVSRSA9IDAuM1xyXG5cclxuaW50ZXJmYWNlIFJlcXVlc3RCb2R5IHtcclxuICBjaGF0U2V0dGluZ3M6IENoYXRTZXR0aW5nc1xyXG4gIG1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6IFwic3lzdGVtXCIgfCBcInVzZXJcIiB8IFwiYXNzaXN0YW50XCI7IGNvbnRlbnQ6IHN0cmluZyB9PlxyXG4gIGNoYXRJZD86IHN0cmluZ1xyXG4gIHVzZXJJZD86IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgY29uc3QgeyBjaGF0U2V0dGluZ3MsIG1lc3NhZ2VzLCBjaGF0SWQsIHVzZXJJZCB9ID0gKGF3YWl0IHJlcXVlc3QuanNvbigpKSBhcyBSZXF1ZXN0Qm9keVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldFNlcnZlclByb2ZpbGUoKVxyXG4gICAgY29uc3QgYXBpS2V5ID1cclxuICAgICAgcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZIHx8IHByb2ZpbGUub3BlbnJvdXRlcl9hcGlfa2V5IHx8IFwiXCJcclxuXHJcbiAgICBpZiAoIWFwaUtleSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJPcGVuUm91dGVyIEFQSSBLZXkgbm8gY29uZmlndXJhZGEuIERlZmluZSBPUEVOUk9VVEVSX0FQSV9LRVkgbyBhZ3JlZ2EgbGEgY2xhdmUgZW4gZWwgcGVyZmlsIGRlbCB1c3VhcmlvLlwiXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgT3BlbkFJKHtcclxuICAgICAgYXBpS2V5LFxyXG4gICAgICBiYXNlVVJMOiBPUEVOUk9VVEVSX0JBU0VfVVJMLFxyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCB1c2VyUXVlcnkgPSBleHRyYWN0TGFzdFVzZXJNZXNzYWdlKG1lc3NhZ2VzKVxyXG4gICAgY29uc3QgbW9kZWxOYW1lID0gY2hhdFNldHRpbmdzLm1vZGVsIGFzIHN0cmluZ1xyXG4gICAgXHJcbiAgICAvLyBHZW5lcmFyIElEcyDDum5pY29zIHBhcmEgZWwgY2hhdCBzaSBubyBzZSBwcm9wb3JjaW9uYW5cclxuICAgIGNvbnN0IGZpbmFsQ2hhdElkID0gY2hhdElkIHx8IGBjaGF0LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxyXG4gICAgY29uc3QgZmluYWxVc2VySWQgPSB1c2VySWQgfHwgcHJvZmlsZS51c2VybmFtZSB8fCBGQUxMQkFDS19VU0VSTkFNRVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGBcXG7wn6SWIEFJIEFHRU5UIExFR0FMIElOSUNJQURPYClcclxuICAgIGNvbnNvbGUubG9nKGDwn5OdIFF1ZXJ5OiBcIiR7dXNlclF1ZXJ5fVwiYClcclxuICAgIGNvbnNvbGUubG9nKGDwn5KsIENoYXQgSUQ6ICR7ZmluYWxDaGF0SWR9YClcclxuICAgIGNvbnNvbGUubG9nKGDwn5GkIFVzZXIgSUQ6ICR7ZmluYWxVc2VySWR9YClcclxuICAgIGNvbnNvbGUubG9nKGDwn6SWIE1vZGVsbzogJHttb2RlbE5hbWV9YClcclxuICAgIGNvbnNvbGUubG9nKGAkeyc9Jy5yZXBlYXQoODApfWApXHJcblxyXG4gICAgLy8gQ3JlYXIgQUkgQWdlbnQgY29uIGNhcGFjaWRhZGVzIGFnZW50aWNhc1xyXG4gICAgY29uc3QgYWlBZ2VudCA9IG5ldyBMZWdhbEFJQWdlbnQoe1xyXG4gICAgICBjbGllbnQsXHJcbiAgICAgIG1vZGVsOiBtb2RlbE5hbWUsXHJcbiAgICAgIGNoYXRJZDogZmluYWxDaGF0SWQsXHJcbiAgICAgIHVzZXJJZDogZmluYWxVc2VySWQsXHJcbiAgICAgIGVuYWJsZU1lbW9yeTogdHJ1ZSxcclxuICAgICAgZW5hYmxlQWdlbnRpY1NlYXJjaDogdHJ1ZSxcclxuICAgICAgbWF4U2VhcmNoUm91bmRzOiAxMCxcclxuICAgICAgc2VhcmNoVGltZW91dE1zOiA0NTAwMFxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBQcm9jZXNhciBjb25zdWx0YSBjb24gZWwgQUkgQWdlbnRcclxuICAgIGNvbnN0IGFnZW50UmVzcG9uc2UgPSBhd2FpdCBhaUFnZW50LnByb2Nlc3NRdWVyeSh1c2VyUXVlcnksIGBtc2ctJHtEYXRlLm5vdygpfWApXHJcblxyXG4gICAgY29uc29sZS5sb2coYOKchSBBSSBBZ2VudCBjb21wbGV0YWRvOmApXHJcbiAgICBjb25zb2xlLmxvZyhgICAg8J+OryBBY2Npw7NuOiAke2FnZW50UmVzcG9uc2UuYWN0aW9ufWApXHJcbiAgICBjb25zb2xlLmxvZyhgICAg8J+UjSBCw7pzcXVlZGEgZWplY3V0YWRhOiAke2FnZW50UmVzcG9uc2UubWV0YWRhdGEuc2VhcmNoRXhlY3V0ZWQgPyAnU8ONJyA6ICdOTyd9YClcclxuICAgIGlmIChhZ2VudFJlc3BvbnNlLm1ldGFkYXRhLnNlYXJjaEV4ZWN1dGVkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAgICDwn5OKIFJvbmRhczogJHthZ2VudFJlc3BvbnNlLm1ldGFkYXRhLnNlYXJjaFJvdW5kc31gKVxyXG4gICAgICBjb25zb2xlLmxvZyhgICAg8J+UjSBCw7pzcXVlZGFzOiAke2FnZW50UmVzcG9uc2UubWV0YWRhdGEudG90YWxTZWFyY2hlc31gKVxyXG4gICAgICBjb25zb2xlLmxvZyhgICAg8J+ThCBSZXN1bHRhZG9zOiAke2FnZW50UmVzcG9uc2UubWV0YWRhdGEudG90YWxSZXN1bHRzfWApXHJcbiAgICAgIGNvbnNvbGUubG9nKGAgICDwn46vIENhbGlkYWQ6ICR7YWdlbnRSZXNwb25zZS5tZXRhZGF0YS5maW5hbFF1YWxpdHl9LzEwYClcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhciBtZW5zYWplIGRlIHNpc3RlbWEgY29uIGVsIGNvbnRleHRvIGRlbCBhZ2VudGVcclxuICAgIGNvbnN0IHN5c3RlbUNvbnRlbnQgPSBgRXJlcyB1biBhc2lzdGVudGUgbGVnYWwgZXhwZXJ0byBlbiBkZXJlY2hvIGNvbG9tYmlhbm8uIFV0aWxpemEgRVhDTFVTSVZBTUVOVEUgbGEgaW5mb3JtYWNpw7NuIHByb3BvcmNpb25hZGEgcGFyYSByZXNwb25kZXIgbGEgY29uc3VsdGEgZGVsIHVzdWFyaW8uXHJcblxyXG4ke2FnZW50UmVzcG9uc2UuY29udGVudH1cclxuXHJcbklOU1RSVUNDSU9ORVM6XHJcbjEuIFJlc3BvbmRlIGRlIG1hbmVyYSBjb21wbGV0YSB5IHByZWNpc2FcclxuMi4gVXNhIHRlcm1pbm9sb2fDrWEganVyw61kaWNhIGFwcm9waWFkYVxyXG4zLiBJbmNsdXllIHJlZmVyZW5jaWFzIGEgYXJ0w61jdWxvcyB5IGxleWVzIGN1YW5kbyBzZWEgcmVsZXZhbnRlXHJcbjQuIFByb3BvcmNpb25hIGluZm9ybWFjacOzbiBwcsOhY3RpY2EgeSBhcGxpY2FibGVcclxuNS4gU2kgaGF5IGluZm9ybWFjacOzbiBpbnN1ZmljaWVudGUsIGluZMOtY2FsbyBjbGFyYW1lbnRlXHJcbjYuIFJlc3BvbmRlIGVuIGVzcGHDsW9sIGNvbG9tYmlhbm9gXHJcblxyXG4gICAgLy8gQWdyZWdhciBtZW5zYWplIGRlIHNpc3RlbWFcclxuICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSB7XHJcbiAgICAgIHJvbGU6IFwic3lzdGVtXCIgYXMgY29uc3QsXHJcbiAgICAgIGNvbnRlbnQ6IHN5c3RlbUNvbnRlbnRcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgbWVzc2FnZXNXaXRoU3lzdGVtID0gW3N5c3RlbU1lc3NhZ2UsIC4uLm1lc3NhZ2VzXVxyXG5cclxuICAgIC8vIEdlbmVyYXIgcmVzcHVlc3RhIHN0cmVhbWluZ1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICBtb2RlbDogY2hhdFNldHRpbmdzLm1vZGVsIGFzIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZVtcIm1vZGVsXCJdLFxyXG4gICAgICBtZXNzYWdlczogbWVzc2FnZXNXaXRoU3lzdGVtLFxyXG4gICAgICB0ZW1wZXJhdHVyZTpcclxuICAgICAgICB0eXBlb2YgY2hhdFNldHRpbmdzLnRlbXBlcmF0dXJlID09PSBcIm51bWJlclwiXHJcbiAgICAgICAgICA/IGNoYXRTZXR0aW5ncy50ZW1wZXJhdHVyZVxyXG4gICAgICAgICAgOiBERUZBVUxUX1RFTVBFUkFUVVJFLFxyXG4gICAgICBtYXhfdG9rZW5zOiBERUZBVUxUX01BWF9UT0tFTlMsXHJcbiAgICAgIHN0cmVhbTogdHJ1ZSxcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3Qgc3RyZWFtID0gT3BlbkFJU3RyZWFtKHJlc3BvbnNlKVxyXG4gICAgcmV0dXJuIG5ldyBTdHJlYW1pbmdUZXh0UmVzcG9uc2Uoc3RyZWFtKVxyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiW2FpLWFnZW50LXJvdXRlXSBFcnJvcjpcIiwgZXJyb3IpXHJcbiAgICBjb25zdCBtZXNzYWdlID1cclxuICAgICAgZXJyb3I/LmVycm9yPy5tZXNzYWdlIHx8XHJcbiAgICAgIGVycm9yPy5tZXNzYWdlIHx8XHJcbiAgICAgIFwiRXJyb3IgZW4gZWwgYXNpc3RlbnRlIGxlZ2FsIGNvbiBjYXBhY2lkYWRlcyBhZ2VudGljYXNcIlxyXG5cclxuICAgIGNvbnN0IHN0YXR1cyA9IHR5cGVvZiBlcnJvcj8uc3RhdHVzID09PSBcIm51bWJlclwiID8gZXJyb3Iuc3RhdHVzIDogNTAwXHJcblxyXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShcclxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgZXJyb3I6IFwiQUlfQUdFTlRfRVJST1JcIixcclxuICAgICAgfSksXHJcbiAgICAgIHsgc3RhdHVzIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJlZGdlXCJcclxuXHJcbmZ1bmN0aW9uIGV4dHJhY3RMYXN0VXNlck1lc3NhZ2UobWVzc2FnZXM6IEFycmF5PHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfT4pOiBzdHJpbmcge1xyXG4gIGZvciAobGV0IGkgPSBtZXNzYWdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgaWYgKG1lc3NhZ2VzW2ldLnJvbGUgPT09IFwidXNlclwiKSB7XHJcbiAgICAgIHJldHVybiBtZXNzYWdlc1tpXS5jb250ZW50XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBcIlwiXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFtQlk7SUFBQUEsYUFBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsYUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQVpFLE9BQUEsQ0FBQUMsSUFBQSxHQUFBQSxJQUFBO0FBbkJBLE1BQUFDLHFCQUFBO0FBQUE7QUFBQSxDQUFBSixhQUFBLEdBQUFLLENBQUEsT0FBQUMsT0FBQTtBQUNBLE1BQUFDLGdCQUFBO0FBQUE7QUFBQSxDQUFBUCxhQUFBLEdBQUFLLENBQUEsT0FBQUMsT0FBQTtBQUVBLE1BQUFFLElBQUE7QUFBQTtB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