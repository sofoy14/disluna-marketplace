{"version":3,"names":["cov_15f1vvmls8","actualCoverage","context_1","s","require","files_1","llm_list_1","mammoth_1","__importDefault","react_1","sonner_1","exports","ACCEPTED_FILE_TYPES","join","useSelectFileHandler","f","selectedWorkspace","profile","chatSettings","setNewMessageImages","setNewMessageFiles","setShowFilesDisplay","setFiles","setUseRetrieval","useContext","ChatbotUIContext","filesToAccept","setFilesToAccept","useState","useEffect","handleFilesToAccept","model","FULL_MODEL","LLM_LIST","find","llm","modelId","b","imageInput","handleSelectDeviceFile","file","console","log","name","type","size","simplifiedFileType","split","reader","FileReader","includes","readAsDataURL","prev","id","arrayBuffer","result","default","extractRawText","createdFile","createDocXFile","value","user_id","description","file_path","tokens","embeddingsProvider","map","item","onloadend","readAsArrayBuffer","readAsText","Error","imageUrl","URL","createObjectURL","messageId","path","base64","url","createFile","error","toast","message","duration","filter","img"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\components\\chat\\chat-hooks\\use-select-file-handler.tsx"],"sourcesContent":["import { ChatbotUIContext } from \"@/context/context\"\r\nimport { createDocXFile, createFile } from \"@/db/files\"\r\nimport { LLM_LIST } from \"@/lib/models/llm/llm-list\"\r\nimport mammoth from \"mammoth\"\r\nimport { useContext, useEffect, useState } from \"react\"\r\nimport { toast } from \"sonner\"\r\n\r\nexport const ACCEPTED_FILE_TYPES = [\r\n  \"text/csv\",\r\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n  \"application/json\",\r\n  \"text/markdown\",\r\n  \"application/pdf\",\r\n  \"text/plain\"\r\n].join(\",\")\r\n\r\nexport const useSelectFileHandler = () => {\r\n  const {\r\n    selectedWorkspace,\r\n    profile,\r\n    chatSettings,\r\n    setNewMessageImages,\r\n    setNewMessageFiles,\r\n    setShowFilesDisplay,\r\n    setFiles,\r\n    setUseRetrieval\r\n  } = useContext(ChatbotUIContext)\r\n\r\n  const [filesToAccept, setFilesToAccept] = useState(ACCEPTED_FILE_TYPES)\r\n\r\n  useEffect(() => {\r\n    handleFilesToAccept()\r\n  }, [chatSettings?.model])\r\n\r\n  const handleFilesToAccept = () => {\r\n    const model = chatSettings?.model\r\n    const FULL_MODEL = LLM_LIST.find(llm => llm.modelId === model)\r\n\r\n    if (!FULL_MODEL) return\r\n\r\n    setFilesToAccept(\r\n      FULL_MODEL.imageInput\r\n        ? `${ACCEPTED_FILE_TYPES},image/*`\r\n        : ACCEPTED_FILE_TYPES\r\n    )\r\n  }\r\n\r\n  const handleSelectDeviceFile = async (file: File) => {\r\n    // Validar que el archivo existe\r\n    if (!file) {\r\n      console.log('No se proporcionÃ³ archivo')\r\n      return\r\n    }\r\n    \r\n    console.log('handleSelectDeviceFile llamado con archivo:', file.name, file.type, file.size)\r\n    console.log('profile:', profile)\r\n    console.log('selectedWorkspace:', selectedWorkspace)\r\n    \r\n    if (!profile || !selectedWorkspace) {\r\n      console.log('Faltan profile o selectedWorkspace')\r\n      return\r\n    }\r\n\r\n    console.log('Configurando archivo para mostrar...')\r\n    setShowFilesDisplay(true)\r\n    setUseRetrieval(true)\r\n\r\n    if (file) {\r\n      let simplifiedFileType = file.type.split(\"/\")[1]\r\n\r\n      let reader = new FileReader()\r\n\r\n      if (file.type.includes(\"image\")) {\r\n        reader.readAsDataURL(file)\r\n      } else if (ACCEPTED_FILE_TYPES.split(\",\").includes(file.type)) {\r\n        if (simplifiedFileType.includes(\"vnd.adobe.pdf\")) {\r\n          simplifiedFileType = \"pdf\"\r\n        } else if (\r\n          simplifiedFileType.includes(\r\n            \"vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\r\n              \"docx\"\r\n          )\r\n        ) {\r\n          simplifiedFileType = \"docx\"\r\n        }\r\n\r\n        setNewMessageFiles(prev => [\r\n          ...prev,\r\n          {\r\n            id: \"loading\",\r\n            name: file.name,\r\n            type: simplifiedFileType,\r\n            file: file\r\n          }\r\n        ])\r\n\r\n        // Handle docx files\r\n        if (\r\n          file.type.includes(\r\n            \"vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\r\n              \"docx\"\r\n          )\r\n        ) {\r\n          const arrayBuffer = await file.arrayBuffer()\r\n          const result = await mammoth.extractRawText({\r\n            arrayBuffer\r\n          })\r\n\r\n          const createdFile = await createDocXFile(\r\n            result.value,\r\n            file,\r\n            {\r\n              user_id: profile.user_id,\r\n              description: \"\",\r\n              file_path: \"\",\r\n              name: file.name,\r\n              size: file.size,\r\n              tokens: 0,\r\n              type: simplifiedFileType\r\n            },\r\n            selectedWorkspace.id,\r\n            chatSettings.embeddingsProvider\r\n          )\r\n\r\n          setFiles(prev => [...prev, createdFile])\r\n\r\n          setNewMessageFiles(prev =>\r\n            prev.map(item =>\r\n              item.id === \"loading\"\r\n                ? {\r\n                    id: createdFile.id,\r\n                    name: createdFile.name,\r\n                    type: createdFile.type,\r\n                    file: file\r\n                  }\r\n                : item\r\n            )\r\n          )\r\n\r\n          reader.onloadend = null\r\n\r\n          return\r\n        } else {\r\n          // Use readAsArrayBuffer for PDFs and readAsText for other types\r\n          file.type.includes(\"pdf\")\r\n            ? reader.readAsArrayBuffer(file)\r\n            : reader.readAsText(file)\r\n        }\r\n      } else {\r\n        throw new Error(\"Unsupported file type\")\r\n      }\r\n\r\n      reader.onloadend = async function () {\r\n        try {\r\n          if (file.type.includes(\"image\")) {\r\n            // Create a temp url for the image file\r\n            const imageUrl = URL.createObjectURL(file)\r\n\r\n            // This is a temporary image for display purposes in the chat input\r\n            setNewMessageImages(prev => [\r\n              ...prev,\r\n              {\r\n                messageId: \"temp\",\r\n                path: \"\",\r\n                base64: reader.result, // base64 image\r\n                url: imageUrl,\r\n                file\r\n              }\r\n            ])\r\n          } else {\r\n            const createdFile = await createFile(\r\n              file,\r\n              {\r\n                user_id: profile.user_id,\r\n                description: \"\",\r\n                file_path: \"\",\r\n                name: file.name,\r\n                size: file.size,\r\n                tokens: 0,\r\n                type: simplifiedFileType\r\n              },\r\n              selectedWorkspace.id,\r\n              chatSettings.embeddingsProvider\r\n            )\r\n\r\n            setFiles(prev => [...prev, createdFile])\r\n\r\n            setNewMessageFiles(prev =>\r\n              prev.map(item =>\r\n                item.id === \"loading\"\r\n                  ? {\r\n                      id: createdFile.id,\r\n                      name: createdFile.name,\r\n                      type: createdFile.type,\r\n                      file: file\r\n                    }\r\n                  : item\r\n              )\r\n            )\r\n          }\r\n        } catch (error: any) {\r\n          toast.error(\"Failed to upload. \" + error?.message, {\r\n            duration: 10000\r\n          })\r\n          setNewMessageImages(prev =>\r\n            prev.filter(img => img.messageId !== \"temp\")\r\n          )\r\n          setNewMessageFiles(prev => prev.filter(file => file.id !== \"loading\"))\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    handleSelectDeviceFile,\r\n    filesToAccept\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}