{"version":3,"names":["cov_1l3klevnoz","actualCoverage","s","exports","runDynamicSearchWorkflow","legal_search_specialized_1","require","web_search_1","dynamic_search_prompts_1","SearchTimeoutError","Error","constructor","message","f","name","userQuery","options","client","model","maxSearchRounds","b","maxSearchesPerRound","searchTimeoutMs","enableModelDecision","console","log","repeat","startTime","Date","now","rounds","allResults","modelDecisions","executedQueries","Set","initialStrategy","planSearchStrategy","strategy","queries","length","round","roundStart","slice","lastRound","decision","nextQueries","filter","q","priority","map","query","generateAdaptiveQueries","trim","key","normalizeQueryKey","has","add","roundResults","executeSearchRound","enrichedResults","enrichSearchResults","removeDuplicateResults","sort","a","quality","evaluateSearchDecision","roundDuration","searchRound","roundNumber","results","durationMs","push","reduce","sum","r","toFixed","shouldContinue","confidence","qualityAssessment","overall","reasoning","totalDuration","finalContext","generateFinalSynthesis","finalQuality","calculateOverallQuality","searchStrategy","determineSearchStrategy","result","originalQuery","metadata","totalRounds","totalSearches","totalResults","totalDurationMs","error","generateErrorSynthesis","Math","max","response","chat","completions","create","messages","role","content","DYNAMIC_SEARCH_STRATEGY_PROMPT","temperature","max_tokens","stream","choices","parseSearchStrategy","warn","rationale","previousRounds","context","buildDecisionContext","DYNAMIC_SEARCH_DECISION_PROMPT","parseSearchDecision","completeness","accuracy","relevance","authority","buildQueryGenerationContext","DYNAMIC_SEARCH_EVALUATION_PROMPT","parsed","parseQueryGeneration","maxResults","timeoutMs","searchResult","withTimeout","searchLegalSpecialized","success","sources","type","recommendedUse","baselineQuality","title","url","snippet","currency","officialCount","source","uniqueResults","extractUrlContent","preferFirecrawl","resultsText","index","toUpperCase","substring","join","roundsSummary","synthesisPrompt","DYNAMIC_SEARCH_SYNTHESIS_PROMPT","replace","i","synthesis","buildFallbackContext","promise","timeoutHandle","timeoutPromise","Promise","_","reject","setTimeout","race","clearTimeout","seen","avgResultQuality","lastDecision","diversityBonus","min","size","highQualityBonus","toLowerCase","resultsByQuality","alta","media","baja","resultsByType","categorizeResultsByType","Object","entries","count","line","resultsSummary","roundsInfo","categories","forEach","jsonText","extractJson","JSON","parse","start","indexOf","end","lastIndexOf"],"sources":["C:\\Users\\pedro\\Documents\\GitHub\\Asistente-Legal-Inteligente\\lib\\tools\\dynamic-search-orchestrator.ts"],"sourcesContent":["import OpenAI from \"openai\"\nimport { searchLegalSpecialized, enrichLegalResults } from \"@/lib/tools/legal-search-specialized\"\nimport { extractUrlContent } from \"@/lib/tools/web-search\"\nimport { \n  DYNAMIC_SEARCH_DECISION_PROMPT,\n  DYNAMIC_SEARCH_EVALUATION_PROMPT,\n  DYNAMIC_SEARCH_STRATEGY_PROMPT,\n  DYNAMIC_SEARCH_SYNTHESIS_PROMPT\n} from \"./dynamic-search-prompts\"\n\nexport interface DynamicSearchOptions {\n  client: OpenAI\n  model: string\n  maxSearchRounds?: number\n  maxSearchesPerRound?: number\n  searchTimeoutMs?: number\n  enableModelDecision?: boolean\n}\n\nexport interface SearchDecision {\n  shouldContinue: boolean\n  confidence: number\n  reasoning: string\n  nextQueries?: Array<{\n    query: string\n    type: 'normativa' | 'jurisprudencia' | 'doctrina' | 'actualidad' | 'general'\n    priority: 'alta' | 'media' | 'baja'\n    reason: string\n  }>\n  qualityAssessment: {\n    completeness: number\n    accuracy: number\n    relevance: number\n    authority: number\n    overall: number\n  }\n}\n\nexport interface SearchRound {\n  roundNumber: number\n  queries: string[]\n  results: SearchResult[]\n  decision: SearchDecision\n  durationMs: number\n}\n\nexport interface SearchResult {\n  title: string\n  url: string\n  snippet: string\n  content?: string\n  type: 'official' | 'academic' | 'news' | 'general'\n  relevance: number\n  quality: number\n  authority: 'maxima' | 'alta' | 'media' | 'baja' | 'minima'\n  currency: 'actualizada' | 'desactualizada' | 'desconocida'\n  recommendedUse: 'cita_principal' | 'secundaria' | 'contextual' | 'no_usar'\n}\n\nexport interface DynamicSearchResult {\n  originalQuery: string\n  rounds: SearchRound[]\n  allResults: SearchResult[]\n  finalContext: string\n  metadata: {\n    totalRounds: number\n    totalSearches: number\n    totalResults: number\n    totalDurationMs: number\n    finalQuality: number\n    modelDecisions: number\n    searchStrategy: string\n  }\n}\n\nclass SearchTimeoutError extends Error {\n  constructor(message: string) {\n    super(message)\n    this.name = \"SearchTimeoutError\"\n  }\n}\n\n/**\n * Sistema de b√∫squeda din√°mico donde el modelo decide aut√≥nomamente cu√°ntas veces buscar\n * El modelo eval√∫a la calidad de la informaci√≥n y decide si necesita m√°s b√∫squedas\n */\nexport async function runDynamicSearchWorkflow(\n  userQuery: string,\n  options: DynamicSearchOptions\n): Promise<DynamicSearchResult> {\n  const {\n    client,\n    model,\n    maxSearchRounds = 10, // Aumentado para permitir m√°s rondas\n    maxSearchesPerRound = 8, // Aumentado para m√°s b√∫squedas por ronda\n    searchTimeoutMs = 45000, // Aumentado a 45 segundos\n    enableModelDecision = true\n  } = options\n\n  console.log(`\\nüß† INICIANDO B√öSQUEDA DIN√ÅMICA INTELIGENTE`)\n  console.log(`üìù Consulta: \"${userQuery}\"`)\n  console.log(`üéØ M√°ximo de rondas: ${maxSearchRounds}`)\n  console.log(`üîç B√∫squedas por ronda: ${maxSearchesPerRound}`)\n  console.log(`‚è±Ô∏è Timeout por b√∫squeda: ${searchTimeoutMs}ms`)\n  console.log(`ü§ñ Decisi√≥n del modelo: ${enableModelDecision ? 'ACTIVADA' : 'DESACTIVADA'}`)\n  console.log(`${'='.repeat(80)}`)\n\n  const startTime = Date.now()\n  const rounds: SearchRound[] = []\n  let allResults: SearchResult[] = []\n  let modelDecisions = 0\n  const executedQueries = new Set<string>()\n\n  try {\n    // FASE 1: An√°lisis inicial y planificaci√≥n\n    console.log(`\\nüß† FASE 1: AN√ÅLISIS INICIAL Y PLANIFICACI√ìN`)\n    const initialStrategy = await planSearchStrategy(client, model, userQuery)\n    console.log(`üìã Estrategia inicial: ${initialStrategy.strategy}`)\n    console.log(`üéØ Consultas planificadas: ${initialStrategy.queries.length}`)\n    \n    // FASE 2: Ejecuci√≥n din√°mica dirigida por el modelo\n    console.log(`\\nüß† FASE 2: EJECUCI√ìN DIN√ÅMICA DIRIGIDA POR EL MODELO`)\n    \n    for (let round = 1; round <= maxSearchRounds; round++) {\n      console.log(`\\nüîç RONDA ${round} DE B√öSQUEDA DIN√ÅMICA`)\n      const roundStart = Date.now()\n      \n      // Generar consultas para esta ronda\n      let queries: string[] = []\n      \n      if (round === 1) {\n        // Primera ronda: usar consultas del plan inicial\n        queries = initialStrategy.queries.slice(0, maxSearchesPerRound)\n        console.log(`üìã Usando ${queries.length} consultas del plan inicial`)\n      } else {\n        // Rondas subsiguientes: el modelo decide qu√© buscar\n        const lastRound = rounds[rounds.length - 1]\n        if (lastRound?.decision.nextQueries && lastRound.decision.nextQueries.length > 0) {\n          queries = lastRound.decision.nextQueries\n            .filter(q => q.priority === 'alta' || q.priority === 'media')\n            .slice(0, maxSearchesPerRound)\n            .map(q => q.query)\n          console.log(`üß† Modelo decidi√≥ ${queries.length} consultas adicionales`)\n          modelDecisions++\n        }\n        \n        // Si no hay consultas del modelo, generar autom√°ticas\n        if (queries.length === 0) {\n          queries = await generateAdaptiveQueries(client, model, userQuery, allResults, rounds)\n          console.log(`üîÑ Generadas ${queries.length} consultas adaptativas`)\n        }\n      }\n\n      // Filtrar consultas ya ejecutadas\n      queries = queries\n        .map(q => q.trim())\n        .filter(q => q.length > 0)\n        .filter(q => {\n          const key = normalizeQueryKey(q)\n          if (executedQueries.has(key)) {\n            return false\n          }\n          executedQueries.add(key)\n          return true\n        })\n\n      if (queries.length === 0) {\n        console.log(`‚ö†Ô∏è No se generaron consultas nuevas para ronda ${round}`)\n        break\n      }\n\n      // Ejecutar b√∫squedas\n      console.log(`üîç Ejecutando ${queries.length} b√∫squedas especializadas...`)\n      const roundResults = await executeSearchRound(queries, maxSearchesPerRound, searchTimeoutMs)\n      \n      // Enriquecer resultados con contenido completo\n      console.log(`üìÑ Enriqueciendo ${roundResults.length} resultados con contenido completo...`)\n      const enrichedResults = await enrichSearchResults(roundResults)\n      \n      allResults = [...allResults, ...enrichedResults]\n      \n      // Eliminar duplicados y mantener solo los mejores\n      allResults = removeDuplicateResults(allResults)\n      allResults = allResults.sort((a, b) => b.quality - a.quality).slice(0, 25) // M√°ximo 25 resultados\n      \n      // DECISI√ìN CR√çTICA: El modelo eval√∫a si necesita m√°s informaci√≥n\n      console.log(`üß† El modelo eval√∫a si necesita m√°s informaci√≥n...`)\n      const decision = await evaluateSearchDecision(\n        client, \n        model, \n        userQuery, \n        allResults, \n        rounds\n      )\n\n      const roundDuration = Date.now() - roundStart\n\n      const searchRound: SearchRound = {\n        roundNumber: round,\n        queries,\n        results: enrichedResults,\n        decision,\n        durationMs: roundDuration\n      }\n\n      rounds.push(searchRound)\n      \n      console.log(`‚úÖ Ronda ${round} completada en ${roundDuration}ms`)\n      console.log(`üìä Resultados: ${enrichedResults.length} | Calidad promedio: ${enrichedResults.length > 0 ? (enrichedResults.reduce((sum, r) => sum + r.quality, 0) / enrichedResults.length).toFixed(1) : 0}/10`)\n      console.log(`üß† Decisi√≥n del modelo: ${decision.shouldContinue ? 'CONTINUAR' : 'FINALIZAR'}`)\n      console.log(`üìà Confianza: ${decision.confidence.toFixed(2)}`)\n      console.log(`üéØ Calidad general: ${decision.qualityAssessment.overall}/10`)\n      \n      if (decision.reasoning) {\n        console.log(`üí≠ Razonamiento: ${decision.reasoning}`)\n      }\n\n      // CRITERIO DE PARADA: El modelo decide si tiene suficiente informaci√≥n\n      // Solo parar si el modelo est√° MUY seguro (confianza >= 0.9) Y calidad >= 8\n      if (!decision.shouldContinue && decision.confidence >= 0.9 && decision.qualityAssessment.overall >= 8) {\n        console.log(`üéØ El modelo considera que tiene informaci√≥n suficiente`)\n        console.log(`üìä Calidad general: ${decision.qualityAssessment.overall}/10`)\n        console.log(`üéØ Confianza: ${decision.confidence.toFixed(2)}`)\n        break\n      }\n\n      // Criterios de seguridad m√°s permisivos para permitir m√°s b√∫squedas\n      if (round >= 6 && decision.qualityAssessment.overall >= 9) {\n        console.log(`üõ°Ô∏è Calidad muy alta alcanzada (${decision.qualityAssessment.overall}/10), finalizando`)\n        break\n      }\n\n      if (round >= 8 && allResults.length >= 30) {\n        console.log(`üõ°Ô∏è Muchos resultados (${allResults.length}), finalizando`)\n        break\n      }\n    }\n\n    // FASE 3: S√≠ntesis final inteligente\n    console.log(`\\nüß† FASE 3: S√çNTESIS FINAL INTELIGENTE`)\n    const totalDuration = Date.now() - startTime\n    \n    // Generar contexto final con s√≠ntesis experta\n    const finalContext = await generateFinalSynthesis(client, model, userQuery, allResults, rounds)\n    \n    const finalQuality = calculateOverallQuality(rounds, allResults)\n    const searchStrategy = determineSearchStrategy(rounds, allResults)\n\n    const result: DynamicSearchResult = {\n      originalQuery: userQuery,\n      rounds,\n      allResults,\n      finalContext,\n      metadata: {\n        totalRounds: rounds.length,\n        totalSearches: rounds.reduce((sum, round) => sum + round.queries.length, 0),\n        totalResults: allResults.length,\n        totalDurationMs: totalDuration,\n        finalQuality,\n        modelDecisions,\n        searchStrategy\n      }\n    }\n\n    console.log(`\\nüéØ B√öSQUEDA DIN√ÅMICA COMPLETADA`)\n    console.log(`üìä Resumen final:`)\n    console.log(`   üîç Rondas: ${result.metadata.totalRounds}/${maxSearchRounds}`)\n    console.log(`   üîç B√∫squedas: ${result.metadata.totalSearches}`)\n    console.log(`   üìÑ Resultados: ${result.metadata.totalResults}`)\n    console.log(`   üéØ Calidad final: ${result.metadata.finalQuality}/10`)\n    console.log(`   üß† Decisiones del modelo: ${result.metadata.modelDecisions}`)\n    console.log(`   ‚è±Ô∏è Duraci√≥n: ${(totalDuration / 1000).toFixed(1)}s`)\n    console.log(`   üìã Estrategia: ${result.metadata.searchStrategy}`)\n    console.log(`${'='.repeat(80)}`)\n\n    return result\n\n  } catch (error) {\n    console.error(`‚ùå Error en b√∫squeda din√°mica:`, error)\n    \n    // Retornar resultado parcial mejorado\n    const totalDuration = Date.now() - startTime\n    const finalContext = await generateErrorSynthesis(client, model, userQuery, rounds, allResults, error)\n    \n    return {\n      originalQuery: userQuery,\n      rounds,\n      allResults,\n      finalContext,\n      metadata: {\n        totalRounds: rounds.length,\n        totalSearches: rounds.reduce((sum, round) => sum + round.queries.length, 0),\n        totalResults: allResults.length,\n        totalDurationMs: totalDuration,\n        finalQuality: Math.max(1, calculateOverallQuality(rounds, allResults) - 2),\n        modelDecisions,\n        searchStrategy: \"ERROR_PARCIAL_MEJORADO\"\n      }\n    }\n  }\n}\n\n/**\n * Planificaci√≥n estrat√©gica inicial\n */\nasync function planSearchStrategy(client: OpenAI, model: string, query: string) {\n  try {\n    const response = await client.chat.completions.create({\n      model,\n      messages: [\n        { role: \"system\", content: DYNAMIC_SEARCH_STRATEGY_PROMPT },\n        { role: \"user\", content: `CONSULTA DEL USUARIO: \"${query}\"` }\n      ],\n      temperature: 0.1,\n      max_tokens: 1000,\n      stream: false\n    })\n\n    const content = response.choices?.[0]?.message?.content || '{}'\n    const strategy = parseSearchStrategy(content)\n    \n    // Garantizar n√∫mero m√≠nimo de consultas\n    if (strategy.queries.length < 3) {\n      strategy.queries = [\n        query,\n        `${query} Colombia normativa`,\n        `${query} jurisprudencia Corte Constitucional`\n      ]\n    }\n    \n    return strategy\n  } catch (error) {\n    console.warn(`‚ö†Ô∏è Error planificando estrategia:`, error)\n    return {\n      strategy: \"B√∫squeda general adaptativa\",\n      queries: [\n        query,\n        `${query} Colombia ley`,\n        `${query} jurisprudencia`,\n        `${query} concepto DIAN`\n      ],\n      rationale: \"Plan generado por error en planificaci√≥n inicial\"\n    }\n  }\n}\n\n/**\n * Evaluaci√≥n de decisi√≥n de b√∫squeda por el modelo\n */\nasync function evaluateSearchDecision(\n  client: OpenAI,\n  model: string,\n  originalQuery: string,\n  results: SearchResult[],\n  previousRounds: SearchRound[]\n): Promise<SearchDecision> {\n  try {\n    const context = buildDecisionContext(originalQuery, results, previousRounds)\n    \n    const response = await client.chat.completions.create({\n      model,\n      messages: [\n        { role: \"system\", content: DYNAMIC_SEARCH_DECISION_PROMPT },\n        { role: \"user\", content: context }\n      ],\n      temperature: 0.1,\n      max_tokens: 1200,\n      stream: false\n    })\n\n    const content = response.choices?.[0]?.message?.content || '{}'\n    const decision = parseSearchDecision(content)\n    \n    return decision\n  } catch (error) {\n    console.warn(`‚ö†Ô∏è Error evaluando decisi√≥n:`, error)\n    return {\n      shouldContinue: true, // En caso de error, continuar buscando por seguridad\n      confidence: 0.2,\n      reasoning: \"Error en evaluaci√≥n de decisi√≥n - continuando por seguridad\",\n      qualityAssessment: {\n        completeness: 2, // Muy bajo para forzar m√°s b√∫squedas\n        accuracy: 2,\n        relevance: 2,\n        authority: 2,\n        overall: 2\n      }\n    }\n  }\n}\n\n/**\n * Generaci√≥n de consultas adaptativas\n */\nasync function generateAdaptiveQueries(\n  client: OpenAI, \n  model: string, \n  originalQuery: string, \n  results: SearchResult[], \n  previousRounds: SearchRound[]\n): Promise<string[]> {\n  try {\n    const context = buildQueryGenerationContext(originalQuery, results, previousRounds)\n    \n    const response = await client.chat.completions.create({\n      model,\n      messages: [\n        { role: \"system\", content: DYNAMIC_SEARCH_EVALUATION_PROMPT },\n        { role: \"user\", content: context }\n      ],\n      temperature: 0.2,\n      max_tokens: 800,\n      stream: false\n    })\n\n    const content = response.choices?.[0]?.message?.content || '{\"queries\":[]}'\n    const parsed = parseQueryGeneration(content)\n    \n    return parsed.queries.slice(0, 6)\n  } catch (error) {\n    console.warn(`‚ö†Ô∏è Error generando consultas adaptativas:`, error)\n    return [\n      `${originalQuery} Colombia normativa reciente`,\n      `${originalQuery} jurisprudencia actual`,\n      `${originalQuery} doctrina especializada`\n    ]\n  }\n}\n\n/**\n * Ejecuci√≥n de ronda de b√∫squeda\n */\nasync function executeSearchRound(\n  queries: string[], \n  maxResults: number, \n  timeoutMs: number\n): Promise<SearchResult[]> {\n  const results: SearchResult[] = []\n\n  for (const query of queries) {\n    try {\n      console.log(`üîç Buscando: \"${query}\"`)\n      const searchResult = await withTimeout(\n        searchLegalSpecialized(query, Math.max(maxResults, 6)),\n        timeoutMs\n      )\n\n      if (searchResult.success && searchResult.results.length > 0) {\n        const sources = searchResult.results.map(result => {\n          const authority: SearchResult['authority'] =\n            result.type === 'official' ? 'maxima' :\n            result.type === 'academic' ? 'alta' :\n            result.type === 'news' ? 'media' : 'baja'\n          const recommendedUse: SearchResult['recommendedUse'] =\n            result.type === 'official' ? 'cita_principal' :\n            result.type === 'academic' ? 'secundaria' :\n            result.type === 'news' ? 'contextual' : 'contextual'\n          const baselineQuality =\n            result.type === 'official' ? 8 :\n            result.type === 'academic' ? 7 :\n            result.type === 'news' ? 6 : 5\n\n          return {\n            title: result.title,\n            url: result.url,\n            snippet: result.snippet,\n            type: result.type,\n            relevance: result.relevance,\n            quality: baselineQuality,\n            authority,\n            currency: 'desconocida' as const,\n            recommendedUse\n          }\n        })\n\n        results.push(...sources)\n        const officialCount = sources.filter(source => source.type === 'official').length\n        console.log(`‚úÖ \"${query}\": ${sources.length} fuentes encontradas (${officialCount} oficiales)`)\n      } else {\n        console.log(`‚ö†Ô∏è \"${query}\": sin resultados en la b√∫squeda especializada`)\n      }\n    } catch (error) {\n      if (error instanceof SearchTimeoutError) {\n        console.log(`‚è±Ô∏è Timeout en b√∫squeda: \"${query}\"`)\n      } else {\n        console.log(`‚ùå Fallo en b√∫squeda \"${query}\":`, error)\n      }\n    }\n  }\n\n  // Eliminar duplicados y priorizar mayor relevancia\n  const uniqueResults = removeDuplicateResults(results)\n  return uniqueResults.sort((a, b) => b.relevance - a.relevance)\n}\n\n/**\n * Enriquecimiento de resultados con contenido completo\n */\nasync function enrichSearchResults(results: SearchResult[]): Promise<SearchResult[]> {\n  const enrichedResults: SearchResult[] = []\n\n  for (const result of results.slice(0, 10)) { // Limitar a 10 para evitar sobrecarga\n    try {\n      console.log(`üìÑ Enriqueciendo: ${result.title}`)\n      const content = await extractUrlContent(result.url, { preferFirecrawl: true })\n      \n      if (content && content.length > 100) {\n        enrichedResults.push({\n          ...result,\n          content: content.slice(0, 2000) // Limitar contenido a 2000 caracteres\n        })\n        console.log(`‚úÖ Enriquecido: ${result.title} (${content.length} caracteres)`)\n      } else {\n        enrichedResults.push(result)\n        console.log(`‚ö†Ô∏è Sin contenido enriquecido: ${result.title}`)\n      }\n    } catch (error) {\n      enrichedResults.push(result)\n      console.log(`‚ùå Error enriqueciendo ${result.title}:`, error)\n    }\n  }\n\n  return enrichedResults\n}\n\n/**\n * Generaci√≥n de s√≠ntesis final\n */\nasync function generateFinalSynthesis(\n  client: OpenAI,\n  model: string,\n  query: string,\n  results: SearchResult[],\n  rounds: SearchRound[]\n): Promise<string> {\n  try {\n    const resultsText = results.map((result, index) => \n      `FUENTE ${index + 1} [${result.type.toUpperCase()}] [Calidad: ${result.quality}/10]\\n` +\n      `T√≠tulo: ${result.title}\\n` +\n      `URL: ${result.url}\\n` +\n      `Resumen: ${result.snippet}\\n` +\n      `Autoridad: ${result.authority} | Vigencia: ${result.currency}\\n` +\n      `Uso recomendado: ${result.recommendedUse}\\n` +\n      (result.content ? `Contenido: ${result.content.substring(0, 500)}...\\n` : '') +\n      `---`\n    ).join('\\n\\n')\n\n    const roundsSummary = rounds.map(round => \n      `Ronda ${round.roundNumber}: ${round.queries.length} b√∫squedas, ${round.results.length} resultados, decisi√≥n: ${round.decision.shouldContinue ? 'CONTINUAR' : 'FINALIZAR'}`\n    ).join(' | ')\n\n    const synthesisPrompt = DYNAMIC_SEARCH_SYNTHESIS_PROMPT.replace(\n      '{originalQuery}',\n      query\n    ).replace(\n      '{verifiedInfo}',\n      resultsText\n    ).replace(\n      '{mainSources}',\n      results.filter(r => r.quality >= 7).slice(0, 5).map((r, i) => `${i+1}. ${r.title} (${r.url})`).join('\\n')\n    )\n\n    const response = await client.chat.completions.create({\n      model,\n      messages: [\n        { role: \"system\", content: synthesisPrompt },\n        { role: \"user\", content: `Genera la s√≠ntesis final para la consulta: \"${query}\"` }\n      ],\n      temperature: 0.2,\n      max_tokens: 1500,\n      stream: false\n    })\n\n    const synthesis = response.choices?.[0]?.message?.content || \"Error en s√≠ntesis autom√°tica\"\n\n    return [\n      \"## B√öSQUEDA DIN√ÅMICA COMPLETADA - S√çNTESIS INTELIGENTE\",\n      `Consulta original: \"${query}\"`,\n      `Estrategia: ${roundsSummary}`,\n      `Resultados totales: ${results.length} (${results.filter(r => r.quality >= 7).length} de alta calidad)`,\n      `Calidad promedio: ${(results.reduce((sum, r) => sum + r.quality, 0) / results.length).toFixed(1)}/10`,\n      \"\",\n      \"## S√çNTESIS INTELIGENTE\",\n      synthesis,\n      \"\",\n      \"## FUENTES VERIFICADAS COMPLETAS\",\n      resultsText,\n      \"\",\n      \"## INSTRUCCIONES FINALES PARA RESPUESTA\",\n      \"- Utiliza exclusivamente la informaci√≥n de las fuentes verificadas proporcionadas\",\n      \"- Verifica la vigencia y jerarqu√≠a de cada norma citada\",\n      \"- Proporciona una respuesta completa, precisa y bien estructurada\",\n      \"- Incluye citas exactas y enlaces a fuentes oficiales\",\n      \"- Si detectas contradicciones, expl√≠calas claramente\",\n      \"- Admite cuando la informaci√≥n sea insuficiente para alg√∫n aspecto espec√≠fico\"\n    ].join('\\n')\n  } catch (error) {\n    console.warn(`‚ö†Ô∏è Error en s√≠ntesis final:`, error)\n    return buildFallbackContext(query, rounds, results)\n  }\n}\n\n/**\n * S√≠ntesis para casos de error\n */\nasync function generateErrorSynthesis(\n  client: OpenAI,\n  model: string,\n  query: string,\n  rounds: SearchRound[],\n  results: SearchResult[],\n  error: any\n): Promise<string> {\n  try {\n    const resultsText = results.slice(0, 5).map((result, index) => \n      `FUENTE ${index + 1}: ${result.title} (${result.url}) [Calidad: ${result.quality}/10]`\n    ).join('\\n')\n\n    return [\n      \"## B√öSQUEDA DIN√ÅMICA INCOMPLETA (ERROR)\",\n      `Consulta original: \"${query}\"`,\n      `Error: ${error instanceof Error ? error.message : 'Error desconocido'}`,\n      `Rondas completadas: ${rounds.length}`,\n      `Resultados parciales: ${results.length}`,\n      \"\",\n      \"## RESULTADOS PARCIALES RECOPILADOS\",\n      resultsText,\n      \"\",\n      \"## INSTRUCCIONES PARA RESPUESTA\",\n      \"- La b√∫squeda fue interrumpida por un error t√©cnico\",\n      \"- Usa los resultados disponibles con extrema precauci√≥n\",\n      \"- Verifica manualmente cada fuente antes de citarla\",\n      \"- Indica claramente qu√© informaci√≥n no pudo ser verificada\",\n      \"- Sugiere al usuario consultar fuentes oficiales directamente\",\n      \"- Recomienda realizar b√∫squedas adicionales si la informaci√≥n es insuficiente\"\n    ].join('\\n')\n  } catch (error) {\n    return buildFallbackContext(query, rounds, results)\n  }\n}\n\n/**\n * Contexto fallback mejorado\n */\nfunction buildFallbackContext(query: string, rounds: SearchRound[], results: SearchResult[]): string {\n  const resultsText = results.slice(0, 5).map((result, index) => \n    `FUENTE ${index + 1}: ${result.title} (${result.url})`\n  ).join('\\n')\n\n  return [\n    \"## B√öSQUEDA DIN√ÅMICA - RESULTADOS PARCIALES\",\n    `Consulta: \"${query}\"`,\n    `Rondas: ${rounds.length}`,\n    `Resultados: ${results.length}`,\n    \"\",\n    \"## FUENTES DISPONIBLES\",\n    resultsText,\n    \"\",\n    \"## INSTRUCCIONES\",\n    \"- Usa las fuentes disponibles con precauci√≥n\",\n    \"- Verifica la vigencia de las normas\",\n    \"- Indica claramente la informaci√≥n limitada\"\n  ].join('\\n')\n}\n\n/**\n * Funciones utilitarias\n */\nasync function withTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\n  let timeoutHandle: ReturnType<typeof setTimeout>\n\n  const timeoutPromise = new Promise<T>((_, reject) => {\n    timeoutHandle = setTimeout(() => {\n      reject(new SearchTimeoutError(`Operaci√≥n excedi√≥ ${timeoutMs}ms`))\n    }, timeoutMs)\n  })\n\n  try {\n    return await Promise.race([promise, timeoutPromise])\n  } finally {\n    clearTimeout(timeoutHandle!)\n  }\n}\n\nfunction removeDuplicateResults(results: SearchResult[]): SearchResult[] {\n  const seen = new Set<string>()\n  return results.filter(result => {\n    const key = result.url\n    if (seen.has(key)) return false\n    seen.add(key)\n    return true\n  })\n}\n\nfunction calculateOverallQuality(rounds: SearchRound[], results: SearchResult[]): number {\n  if (results.length === 0) return 1\n  \n  const avgResultQuality = results.reduce((sum, r) => sum + r.quality, 0) / results.length\n  const lastDecision = rounds[rounds.length - 1]?.decision.qualityAssessment.overall || 5\n  const diversityBonus = Math.min(2, new Set(results.map(r => r.type)).size * 0.5)\n  const highQualityBonus = Math.min(2, results.filter(r => r.quality >= 8).length * 0.3)\n  \n  return Math.round(Math.min(10, (avgResultQuality * 0.4) + (lastDecision * 0.3) + diversityBonus + highQualityBonus))\n}\n\nfunction determineSearchStrategy(rounds: SearchRound[], results: SearchResult[]): string {\n  if (results.length === 0) return \"SIN_RESULTADOS\"\n  if (rounds.length === 1) return \"B√öSQUEDA_DIRECTA\"\n  if (rounds.length <= 3) return \"B√öSQUEDA_EST√ÅNDAR\"\n  if (results.filter(r => r.quality >= 8).length >= 5) return \"B√öSQUEDA_EXHAUSTIVA_ALTA_CALIDAD\"\n  return \"B√öSQUEDA_EXHAUSTIVA\"\n}\n\nfunction normalizeQueryKey(query: string): string {\n  return query.toLowerCase().replace(/\\s+/g, ' ').trim()\n}\n\nfunction buildDecisionContext(query: string, results: SearchResult[], rounds: SearchRound[]): string {\n  const resultsByQuality = {\n    alta: results.filter(r => r.quality >= 8).length,\n    media: results.filter(r => r.quality >= 6 && r.quality < 8).length,\n    baja: results.filter(r => r.quality < 6).length\n  }\n\n  const resultsByType = categorizeResultsByType(results)\n  const lastDecision = rounds[rounds.length - 1]?.decision\n\n  return [\n    `CONSULTA ORIGINAL: \"${query}\"`,\n    `RONDAS COMPLETADAS: ${rounds.length}`,\n    `RESULTADOS TOTALES: ${results.length}`,\n    '',\n    'DISTRIBUCI√ìN POR CALIDAD:',\n    `- Alta calidad (>=8): ${resultsByQuality.alta}`,\n    `- Media calidad (6-7): ${resultsByQuality.media}`,\n    `- Baja calidad (<6): ${resultsByQuality.baja}`,\n    '',\n    'DISTRIBUCI√ìN POR TIPO:',\n    Object.entries(resultsByType).map(([type, count]) => `- ${type}: ${count}`).join('\\n'),\n    '',\n    'RESULTADOS ESPEC√çFICOS:',\n    results.map(r => `- ${r.title} (${r.type}, calidad ${r.quality}/10, autoridad: ${r.authority})`).join('\\n'),\n    '',\n    lastDecision ? `√öLTIMA DECISI√ìN: ${lastDecision.shouldContinue ? 'CONTINUAR' : 'FINALIZAR'} (confianza: ${lastDecision.confidence})` : 'Sin decisi√≥n previa',\n    '',\n    'Eval√∫a si esta informaci√≥n es suficiente para responder COMPLETAMENTE la consulta original y decide si necesitas m√°s b√∫squedas.'\n  ].filter(line => line.trim()).join('\\n')\n}\n\nfunction buildQueryGenerationContext(query: string, results: SearchResult[], rounds: SearchRound[]): string {\n  const resultsSummary = results.map(r => `- ${r.title} (${r.type}, calidad ${r.quality}/10)`).join('\\n')\n  const roundsInfo = rounds.map(r => `Ronda ${r.roundNumber}: ${r.queries.join(', ')}`).join('\\n')\n  const lastDecision = rounds[rounds.length - 1]?.decision\n  \n  return [\n    `CONSULTA ORIGINAL: \"${query}\"`,\n    `RONDAS COMPLETADAS: ${rounds.length}`,\n    `RESULTADOS ENCONTRADOS: ${results.length}`,\n    `CALIDAD PROMEDIO: ${results.length > 0 ? (results.reduce((sum, r) => sum + r.quality, 0) / results.length).toFixed(1) : 0}/10`,\n    \"\",\n    \"RESULTADOS ACTUALES:\",\n    resultsSummary,\n    \"\",\n    \"B√öSQUEDAS ANTERIORES:\",\n    roundsInfo,\n    \"\",\n    \"√öLTIMA DECISI√ìN:\",\n    lastDecision ? `Continuar: ${lastDecision.shouldContinue ? 'S√ç' : 'NO'}, Confianza: ${lastDecision.confidence}` : \"Sin decisi√≥n previa\",\n    \"\",\n    lastDecision?.reasoning ? \"RAZONAMIENTO:\\n\" + lastDecision.reasoning : \"\",\n    \"\",\n    \"Basado en esta informaci√≥n, genera nuevas consultas espec√≠ficas para mejorar la calidad de la respuesta.\"\n  ].filter(line => line.trim()).join('\\n')\n}\n\nfunction categorizeResultsByType(results: SearchResult[]): Record<string, number> {\n  const categories: Record<string, number> = {}\n  results.forEach(result => {\n    categories[result.type] = (categories[result.type] || 0) + 1\n  })\n  return categories\n}\n\nfunction parseSearchStrategy(content: string) {\n  try {\n    const jsonText = extractJson(content)\n    const parsed = JSON.parse(jsonText)\n    \n    return {\n      strategy: parsed.strategy || \"B√∫squeda general adaptativa\",\n      queries: parsed.queries || [],\n      rationale: parsed.rationale || \"Plan generado autom√°ticamente\"\n    }\n  } catch (error) {\n    console.warn(\"Error parsing search strategy:\", error)\n    return {\n      strategy: \"B√∫squeda general adaptativa\",\n      queries: [],\n      rationale: \"Error en parsing, usando valores por defecto\"\n    }\n  }\n}\n\nfunction parseSearchDecision(content: string) {\n  try {\n    const jsonText = extractJson(content)\n    const parsed = JSON.parse(jsonText)\n    \n    // Ser m√°s conservador: si no hay decisi√≥n clara, continuar buscando\n    const shouldContinue = parsed.shouldContinue !== false // Default a true si no est√° especificado\n    const confidence = parsed.confidence || 0.3 // Default m√°s bajo para ser m√°s conservador\n    \n    return {\n      shouldContinue,\n      confidence,\n      reasoning: parsed.reasoning || \"Sin razonamiento proporcionado - continuando por defecto\",\n      nextQueries: parsed.nextQueries || [],\n      qualityAssessment: parsed.qualityAssessment || {\n        completeness: 3, // Default m√°s bajo para ser m√°s conservador\n        accuracy: 3,\n        relevance: 3,\n        authority: 3,\n        overall: 3\n      }\n    }\n  } catch (error) {\n    console.warn(\"Error parsing search decision:\", error)\n    return {\n      shouldContinue: true, // En caso de error, continuar buscando\n      confidence: 0.2,\n      reasoning: \"Error en parsing de decisi√≥n - continuando por seguridad\",\n      nextQueries: [],\n      qualityAssessment: {\n        completeness: 2, // Muy bajo para forzar m√°s b√∫squedas\n        accuracy: 2,\n        relevance: 2,\n        authority: 2,\n        overall: 2\n      }\n    }\n  }\n}\n\nfunction parseQueryGeneration(content: string) {\n  try {\n    const jsonText = extractJson(content)\n    return JSON.parse(jsonText)\n  } catch (error) {\n    console.warn(\"Error parsing query generation:\", error)\n    return { \n      queries: [],\n      rationale: \"Error en parsing\" \n    }\n  }\n}\n\nfunction extractJson(content: string): string {\n  const start = content.indexOf(\"{\")\n  const end = content.lastIndexOf(\"}\")\n  if (start === -1 || end === -1 || end <= start) {\n    throw new Error(\"JSON no encontrado en el contenido\")\n  }\n  return content.slice(start, end + 1)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}